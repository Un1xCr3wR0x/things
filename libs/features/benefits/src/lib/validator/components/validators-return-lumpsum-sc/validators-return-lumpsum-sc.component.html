<!-- Copyright GOSI. All Rights Reserved.
This software is the proprietary information of GOSI.
Use is subject to license terms. -->
<div id="mainHeading">
  <ng-container>
    <div *ngIf="!isNonOcc && !isJailedLumpsum && !isHazardous && !isHeir && !isOcc && !isWomenLumpsum">
      <frm-main-heading-dc [heading]="'BENEFITS.RETURN-RETIREMENT-LUMPSUM' | translate"></frm-main-heading-dc>
    </div>
    <div *ngIf="isNonOcc">
      <frm-main-heading-dc [heading]="'BENEFITS.RETURN-NONOCC-LUMPSUM' | translate"></frm-main-heading-dc>
    </div>
    <div *ngIf="isJailedLumpsum">
      <frm-main-heading-dc [heading]="'BENEFITS.RETURN-JAILED-LUMPSUM' | translate"></frm-main-heading-dc>
    </div>
    <div *ngIf="isHazardous">
      <frm-main-heading-dc [heading]="'BENEFITS.RETURN-HAZARDOUS-LUMPSUM' | translate"></frm-main-heading-dc>
    </div>
    <div *ngIf="isHeir">
      <frm-main-heading-dc [heading]="'BENEFITS.RETURN-HEIR-LUMPSUM-HEADING' | translate"></frm-main-heading-dc>
    </div>
    <div *ngIf="isOcc">
      <frm-main-heading-dc [heading]="'BENEFITS.RETURN-OCC-LUMPSUM-HEADING' | translate"></frm-main-heading-dc>
    </div>
    <div *ngIf="isWomenLumpsum">
      <frm-main-heading-dc [heading]="'BENEFITS.RETURN-WOMAN-LUMPSUM' | translate"></frm-main-heading-dc>
    </div>
  </ng-container>
</div>

<frm-main-content-dc [documents]="reqDocList" [showComments]="showComments" [comments]="transactionRefData">
  <div id="contentArea">
    <div class="row">
      <div class="col-sm-12 col-md-12 col-lg-12">
        <frm-content-heading-dc
          icon="user"
          [canEdit]="false"
          heading="{{ 'BENEFITS.CONTRIBUTOR-DETAILS' | translate }}"
        >
        </frm-content-heading-dc>
        <div class="row">
          <div class="col-sm-12 col-md-12 col-lg-12">
            <gosi-label-dc
              id="contributorNIN"
              label="{{ 'BENEFITS.NIN' | translate }}"
              isLink="true"
              [value]="returnBenefitDetails?.nin"
              (click)="viewContributorDetails()"
            >
            </gosi-label-dc>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-6">
            <gosi-label-dc
              id="dob"
              [control]="'BENEFITS.AGE' | translate: { age: returnBenefitDetails?.ageInGregorian }"
              label="BENEFITS.DATE-OF-BIRTH"
              ><span id="prefixValue"
                >{{ returnBenefitDetails?.dateOfBirth?.gregorian | date: getDateFormat(lang) }}
              </span>
            </gosi-label-dc>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-6">
            <gosi-label-dc
              id="dobHijiri"
              [control]="'BENEFITS.AGE' | translate: { age: returnBenefitDetails?.age }"
              label="BENEFITS.DATE-OF-BIRTH-HIJIRI"
              ><span id="prefixValue">{{ returnBenefitDetails?.dateOfBirth?.hijiri | date: 'dd/MM/yyyy' }} </span>
            </gosi-label-dc>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-6">
            <gosi-label-dc
              id="contributorName"
              label="{{ 'BENEFITS.CONTRIBUTOR-NAME-EN' | translate }}"
              [value]="returnBenefitDetails?.contributorName?.english"
            >
            </gosi-label-dc>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-6">
            <gosi-label-dc
              id="contributorName"
              label="{{ 'BENEFITS.CONTRIBUTOR-NAME-AR' | translate }}"
              [value]="returnBenefitDetails?.contributorName?.arabic"
            >
            </gosi-label-dc>
          </div>
        </div>
      </div>
    </div>

    <!--BENEFIT DETAILS-->
    <!--    removing condition-->
    <!--    *ngIf="returnBenefitDetails?.enabledRestoration !== true" -->
    <div class="row">
      <div class="col-sm-12 col-md-12 col-lg-12">
        <frm-content-heading-dc
          icon="Benefits"
          isSvg="true"
          [canEdit]="false"
          heading="{{ 'BENEFITS.BENEFIT-DETAIL' | translate }}"
        >
        </frm-content-heading-dc>
        <div class="row">
          <div class="col-sm-6 col-md-6 col-lg-6">
            <gosi-label-dc
              id="requestDate"
              label="{{ 'BENEFITS.REQUEST-DATE' | translate }}"
              value="{{ returnBenefitDetails?.requestDate?.gregorian | date: getDateFormat(lang) }}"
            >
            </gosi-label-dc>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-6">
            <gosi-label-dc
              id="benefitType"
              label="{{ 'BENEFITS.BENEFIT-TYPE' | translate }}"
              [value]="returnBenefitDetails?.benefitType | bilingualText"
            >
            </gosi-label-dc>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-6">
            <gosi-label-dc
              id="benefitAmount"
              label="{{ 'BENEFITS.BENEFIT-AMOUNT' | translate }}"
              [value]="
                'BENEFITS.AVERAGE-AMOUNT'
                  | translate: { amount: returnBenefitDetails?.benefitAmount || 0 | number: '1.2-2' }
              "
            >
            </gosi-label-dc>
          </div>
        </div>
      </div>
    </div>
    <br />
    <!--PAYMENT DETAILS-->
    <!--    removing condition  -->
    <!--     *ngIf="returnBenefitDetails?.enabledRestoration !== true"-->
    <div class="row">
      <div class="col-sm-12 col-md-12 col-lg-12">
        <frm-content-heading-dc
          icon="money-bill-alt"
          heading="{{ 'BENEFITS.PAYMENT-DETAILS' | translate }}"
          [canEdit]="isValidatorCanEditPayment && validatorCanEdit"
          (onEdit)="navigateToEdit()"
        >
        </frm-content-heading-dc>
        <div class="row">
          <div class="col-sm-6 col-md-6 col-lg-6" *ngIf="returnBenefitDetails?.contributionMonthsToBeCredited">
            <gosi-label-dc
              id="contributionMonth"
              label="{{ 'BENEFITS.CONTRIBUTION-MONTHS-CREDITED' | translate }}"
              [value]="returnBenefitDetails?.contributionMonthsToBeCredited"
            >
            </gosi-label-dc>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6 col-md-6 col-lg-6" *ngIf="returnBenefitDetails?.repaymentDetails?.receiptMode">
            <gosi-label-dc
              id="receiptMode"
              label="{{ 'BENEFITS.RECEIPT-MODE' | translate }}"
              [value]="returnBenefitDetails?.repaymentDetails?.receiptMode | bilingualText"
            >
            </gosi-label-dc>
          </div>
          <div
            class="col-sm-6 col-md-6 col-lg-6"
            *ngIf="returnBenefitDetails?.repaymentDetails?.transactionDate?.gregorian"
          >
            <gosi-label-dc
              id="transactionDate"
              label="{{ 'BENEFITS.TRANSACTION-DATE' | translate }}"
              value="{{
                returnBenefitDetails?.repaymentDetails?.transactionDate?.gregorian | date: getDateFormat(lang)
              }}"
            >
            </gosi-label-dc>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-6" *ngIf="returnBenefitDetails?.repaymentDetails?.paymentReferenceNo">
            <gosi-label-dc
              id="referenceNumber"
              label="{{ 'BENEFITS.PAYMENT-REFERENCE-NUMBER' | translate }}"
              [value]="returnBenefitDetails?.repaymentDetails?.paymentReferenceNo"
            >
            </gosi-label-dc>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-6" *ngIf="returnBenefitDetails?.repaymentDetails?.bankType">
            <gosi-label-dc
              id="bankType"
              label="{{ 'BENEFITS.BANK-TYPE' | translate }}"
              [value]="returnBenefitDetails?.repaymentDetails?.bankType | bilingualText"
            >
            </gosi-label-dc>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-6" *ngIf="returnBenefitDetails?.repaymentDetails?.bankName">
            <gosi-label-dc
              id="bankName"
              label="{{ 'BENEFITS.BANK-NAME' | translate }}"
              [value]="returnBenefitDetails?.repaymentDetails?.bankName | bilingualText"
            >
            </gosi-label-dc>
          </div>
          <div class="col-sm-6 col-md-6 col-lg-6" *ngIf="returnBenefitDetails?.repaymentDetails?.amountTransferred">
            <gosi-label-dc
              id="benefitReturned"
              label="{{ 'BENEFITS.LUMPSUM-BENEFIT-RETURNED' | translate }}"
              [value]="
                'BENEFITS.AVERAGE-AMOUNT'
                  | translate
                    : { amount: returnBenefitDetails?.repaymentDetails?.amountTransferred || 0 | number: '1.2-2' }
              "
            >
            </gosi-label-dc>
          </div>
        </div>
        <div class="row">
          <div
            class="col-sm-6 col-md-6 col-lg-6"
            *ngIf="returnBenefitDetails?.repaymentDetails?.additionalPaymentDetails"
          >
            <gosi-label-dc
              id="additionalPaymentDetails"
              label="{{ 'BENEFITS.ADDITIONAL-PAYMENT-DETAILS' | translate }}"
              [value]="returnBenefitDetails?.repaymentDetails?.additionalPaymentDetails"
            >
            </gosi-label-dc>
          </div>
        </div>
        <!--       We are removing sadad and enabling the other options. So we need to show the restoration details here -->
        <div class="row">
          <div class="col-sm-6 col-md-6 col-lg-6" *ngIf="returnBenefitDetails?.reasonForEnableRestoration">
            <gosi-label-dc
              id="reason"
              label="{{ 'BENEFITS.REASON-FOR-ENABLING-RETURN-LUMPSUM' | translate }}"
              [value]="returnBenefitDetails?.reasonForEnableRestoration | bilingualText"
            >
            </gosi-label-dc>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6 col-md-6 col-lg-6" *ngIf="returnBenefitDetails?.notesForEnableRestoration">
            <gosi-label-dc
              id="notes"
              label="{{ 'BENEFITS.NOTES' | translate }}"
              [value]="returnBenefitDetails?.notesForEnableRestoration"
            >
            </gosi-label-dc>
          </div>
        </div>
      </div>
    </div>
    <!--LUMPSUM RETURN DETAILS-->
    <!--       We are removing sadad and enabling the other options. Commenting restoration section -->
    <!--    <div class="row" *ngIf="returnBenefitDetails?.enabledRestoration === true">-->
    <!--      <div class="col-sm-12 col-md-12 col-lg-12">-->
    <!--        <frm-content-heading-dc-->
    <!--          icon="file-invoice"-->
    <!--          [canEdit]="enabledRestoration && validatorCanEdit"-->
    <!--          heading="{{ 'BENEFITS.LUMPSUM-RETURN-DETAILS' | translate }}"-->
    <!--          (onEdit)="navigateToRestore()"-->
    <!--        >-->
    <!--        </frm-content-heading-dc>-->
    <!--        <div class="row">-->
    <!--          <div class="col-sm-6 col-md-6 col-lg-6" *ngIf="returnBenefitDetails?.benefitAmount">-->
    <!--            <gosi-label-dc-->
    <!--              id="benefitAmount"-->
    <!--              label="{{ 'BENEFITS.BENEFIT-AMOUNT' | translate }}"-->
    <!--              [value]="-->
    <!--                'BENEFITS.AVERAGE-AMOUNT'-->
    <!--                  | translate: { amount: returnBenefitDetails?.benefitAmount || 0 | number: '1.2-2' }-->
    <!--              "-->
    <!--            >-->
    <!--            </gosi-label-dc>-->
    <!--          </div>-->
    <!--          <div class="col-sm-6 col-md-6 col-lg-6" *ngIf="returnBenefitDetails?.requestDate?.gregorian">-->
    <!--            <gosi-label-dc-->
    <!--              id="requestDate"-->
    <!--              label="{{ 'BENEFITS.REQUEST-DATE' | translate }}"-->
    <!--              [value]="returnBenefitDetails?.requestDate?.gregorian | date: 'dd/MM/yyyy'"-->
    <!--            >-->
    <!--            </gosi-label-dc>-->
    <!--          </div>-->
    <!--        </div>-->
    <!--        <div class="row">-->
    <!--          <div class="col-sm-6 col-md-6 col-lg-6" *ngIf="returnBenefitDetails?.contributionMonthsToBeCredited">-->
    <!--            <gosi-label-dc-->
    <!--              id="contributionMonth"-->
    <!--              label="{{ 'BENEFITS.CONTRIBUTION-MONTHS-CREDITED' | translate }}"-->
    <!--              [value]="returnBenefitDetails?.contributionMonthsToBeCredited"-->
    <!--            >-->
    <!--            </gosi-label-dc>-->
    <!--          </div>-->
    <!--          <div class="col-sm-6 col-md-6 col-lg-6" *ngIf="returnBenefitDetails?.repaymentDetails?.amountTransferred">-->
    <!--            <gosi-label-dc-->
    <!--              id="benefitReturned"-->
    <!--              label="{{ 'BENEFITS.LUMPSUM-BENEFIT-RETURNED' | translate }}"-->
    <!--              [value]="-->
    <!--                'BENEFITS.AVERAGE-AMOUNT'-->
    <!--                  | translate-->
    <!--                    : { amount: returnBenefitDetails?.repaymentDetails?.amountTransferred || 0 | number: '1.2-2' }-->
    <!--              "-->
    <!--            >-->
    <!--            </gosi-label-dc>-->
    <!--          </div>-->
    <!--        </div>-->
    <!--        <div class="row">-->
    <!--          <div class="col-sm-6 col-md-6 col-lg-6">-->
    <!--            <gosi-label-dc-->
    <!--              id="reason"-->
    <!--              label="{{ 'BENEFITS.REASON-FOR-ENABLING-RETURN-LUMPSUM' | translate }}"-->
    <!--              [value]="returnBenefitDetails?.reasonForEnableRestoration | bilingualText"-->
    <!--            >-->
    <!--            </gosi-label-dc>-->
    <!--          </div>-->
    <!--        </div>-->
    <!--        <div class="row">-->
    <!--          <div class="col-sm-6 col-md-6 col-lg-6">-->
    <!--            <gosi-label-dc-->
    <!--              id="notes"-->
    <!--              label="{{ 'BENEFITS.NOTES' | translate }}"-->
    <!--              [value]="returnBenefitDetails?.notesForEnableRestoration"-->
    <!--            >-->
    <!--            </gosi-label-dc>-->
    <!--          </div>-->
    <!--        </div>-->
    <!--      </div>-->
    <!--    </div>-->
  </div>

  <div id="actionArea">
    <div class="row">
      <div class="col-lg-12 form-action">
        <div class="col-lg-12 action-requests">
          <ng-container>
            <div class="btn-section float-right">
              <ng-container *gosiShow="validatorAccess">
              <gosi-button-dc
                id="approve"
                [disabled]="disableApprove"
                type="primary"
                (submit)="approveTransaction(approveTemplate)"
              >
                {{ 'BENEFITS.APPROVE' | translate }}</gosi-button-dc
              >
              </ng-container>
            </div>
            <div class="btn-section float-right" *ngIf="canReturn">
              <ng-container *gosiShow="validatorAccess">
              <gosi-button-dc
                type="secondary"
                id="return"
                (submit)="returnTransaction(returnTemplate)"
              >
                {{ 'BENEFITS.RETURN' | translate }}</gosi-button-dc
              >
              </ng-container>
            </div>
            <div class="btn-section float-right" *ngIf="canReject">
              <ng-container *gosiShow="validatorAccess">
              <gosi-button-dc
                type="danger"
                id="reject"
                (submit)="rejectTransaction(rejectLumpsumTemplate)"
              >
                {{ 'BENEFITS.REJECT' | translate }}</gosi-button-dc
              >
              </ng-container>
            </div>
          </ng-container>
          <div class="btn-section float-left">
            <ng-container *gosiShow="validatorAccess">
            <gosi-button-dc
              id="cancel"
              type="secondary"
              (submit)="showCancelTemplate(cancelTemplate)"
            >
              {{ 'BENEFITS.CANCEL' | translate }}</gosi-button-dc
            >
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
</frm-main-content-dc>
<!-- approve template -->
<ng-template #approveTemplate>
  <frm-approve-template-dc
    [heading]="
      isNonOcc
        ? 'BENEFITS.APPROVE-NONOCC-LUMPSUM-HEADING'
        : isJailedLumpsum
        ? 'BENEFITS.APPROVE-JAILED-LUMPSUM-HEADING'
        : isHazardous
        ? 'BENEFITS.APPROVE-HAZARDOUS-LUMPSUM-HEADING'
        : isHeir
        ? 'BENEFITS.APPROVE-RETURN-HEIR-LUMPSUM'
        : isWomenLumpsum
        ? 'BENEFITS.APPROVE-WOMAN-LUMPSUM'
        : isOcc
        ? 'BENEFITS.APPROVE-OCC-LUMPSUM-HEADING'
        : 'BENEFITS.APPROVE-RETIREMENT-LUMPSUM'
    "
    [isCommentsMandatory]="approveComments"
    [parentForm]="returnLumpsumForm"
    (cancelEvent)="hideModal()"
    (approveEvent)="confirmApproveLumpsum()"
  >
  </frm-approve-template-dc>
</ng-template>
<!-- reject template -->
<ng-template #rejectLumpsumTemplate>
  <frm-reject-template-dc
    [heading]="
      isNonOcc
        ? 'BENEFITS.REJECT-RETURN-NONOCC-LUMPSUM-HEADING'
        : isJailedLumpsum
        ? 'BENEFITS.REJECT-RETURN-JAILED-LUMPSUM-HEADING'
        : isHazardous
        ? 'BENEFITS.REJECT-RETURN-HAZARDOUS-LUMPSUM-HEADING'
        : isHeir
        ? 'BENEFITS.REJECT-RETURN-HEIR-LUMPSUM'
        : isOcc
        ? 'BENEFITS.REJECT-RETURN-OCC-LUMPSUM-HEADING'
        : isWomenLumpsum
        ? 'BENEFITS.REJECT-RETURN-WOMAN-LUMPSUM'
        : 'BENEFITS.REJECT-RETURN-RETIREMENT-LUMPSUM'
    "
    [rejectReasonList$]="rejectReasonList"
    [warningMessage]="'BENEFITS.INFO-VALIDATOR-REJECTION' | translate: { transactionNo: referenceNo }"
    [parentForm]="returnLumpsumForm"
    (rejectEvent)="confirmRejectLumpsum()"
    (cancelEvent)="hideModal()"
  >
  </frm-reject-template-dc>
</ng-template>
<!-- return template -->
<ng-template #returnTemplate>
  <frm-return-template-dc
    [returnReasonList$]="returnReasonList"
    [heading]="
      isNonOcc
        ? 'BENEFITS.RETURN-RETURN-NONOCC-LUMPSUM-HEADING'
        : isJailedLumpsum
        ? 'BENEFITS.RETURN-RETURN-JAILED-LUMPSUM-HEADING'
        : isHazardous
        ? 'BENEFITS.RETURN-RETURN-HAZARDOUS-LUMPSUM-HEADING'
        : isHeir
        ? 'BENEFITS.RETURN-RETURN-HEIR-LUMPSUM'
        : isOcc
        ? 'BENEFITS.RETURN-RETURN-OCC-LUMPSUM-HEADING'
        : isWomenLumpsum
        ? 'BENEFITS.RETURN-RETURN-WOMAN-LUMPSUM'
        : 'BENEFITS.RETURN-RETURN-RETIREMENT-LUMPSUM'
    "
    [warningMessage]="
      channel === Channel.TAMINATY && routerData.assignedRole === rolesEnum.VALIDATOR_1
        ? 'BENEFITS.INFO-IND-RETURN'
        : routerData.assignedRole === rolesEnum.VALIDATOR_2
        ? 'BENEFITS.INFO-VALIDATOR-RETURN-VALIDATOR'
        : 'BENEFITS.INFO-FC-RETURN-VALIDATOR'
    "
    (cancelEvent)="hideModal()"
    [parentForm]="returnLumpsumForm"
    (returnEvent)="returnLumpsum()"
  >
  </frm-return-template-dc>
</ng-template>
<!-- cancel template -->
<ng-template #cancelTemplate>
  <gosi-confirm-modal-dc (onCancel)="hideModal()" [message]="'BENEFITS.CONFIRM-CANCEL'" (onConfirm)="confirmCancel()">
  </gosi-confirm-modal-dc>
</ng-template>
