<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->

<div class="d-flex justify-content-start total-section mt-4">
  <!-- *ngIf="engagementPeriod?.wage?.contributoryWage" -->

  <div class="flex-container d-flex flex-column">
    <div>
      <div class="con-label">
        {{ 'CONTRIBUTOR.WAGE.CONTRIBUTORY-WAGE' | translate }}
      </div>
    </div>
    <div class="d-flex justify-content-start">
      <div class="con-wage d-inline-flex p-2 bd-highlight">
        <!-- making contributorWage '-' if the value is zero -->
        {{
          engagementPeriod?.wage?.contributoryWage === 0
            ? '-'
            : (engagementPeriod?.wage?.contributoryWage | number: '.2-2')
        }}
        {{ engagementPeriod?.wage?.contributoryWage === 0 ? '' : ('CONTRIBUTOR.WAGE.SAR' | translate) }}
      </div>
    </div>
  </div>
  <div class="d-flex flex-column" *ngIf="engagementPeriod?.coverages && engagementPeriod?.coverages.length > 0">
    <div>
      <span class="con-label">
        {{ 'CONTRIBUTOR.WAGE.COVERAGE' | translate }}
      </span>
    </div>

    <div>
      <div class="d-flex justify-content-start mobile-coverage-section mt-2">
        <ng-container *ngFor="let cov of engagementPeriod.coverages">
          <div
            class="icon-wrapper d-flex tooltip-oh tooltip-an"
            *ngIf="
              cov.coverageType.english === 'Annuity' &&
              cov.coverage !== 0 &&
              (cov.establishmentPercentage !== 0 || isVic)
            "
          >
            <ng-template #annuityMessage>
              <ng-container *ngTemplateOutlet="tolTemplate; context: { coverage: cov }"></ng-container>
            </ng-template>
            <img
              src="assets/icons/annuity.svg"
              [placement]="lang === 'en' ? 'top' : 'top'"
              [tooltip]="displayIcon ? annuityMessage : null"
              alt="annuity"
            />
            <ng-container *ngIf="!displayIcon || (isIndividualProfile && cov.coverage !== 0)">
              <div class="pr-2 pl-2">
                <div>
                  <span class="small-label"> {{ 'CONTRIBUTOR.WAGE.ANNUITY-CAP' | translate }}</span>
                </div>
                <div class="mid-label">
                  {{ cov.coverage | number: '1.2-2' }}
                  {{ 'CONTRIBUTOR.WAGE.SAR' | translate }}
                </div>
              </div>
            </ng-container>
          </div>
          <div
            class="icon-wrapper d-flex tooltip-oh"
            *ngIf="
              cov.coverageType.english === 'Occupational Hazard' &&
              cov.coverage !== 0 &&
              cov.establishmentPercentage !== 0
            "
          >
            <ng-template #ohMessage>
              <ng-container *ngTemplateOutlet="tolTemplate; context: { coverage: cov }"></ng-container>
            </ng-template>
            <img
              src="assets/icons/OH.svg"
              [placement]="lang === 'en' ? 'top' : 'top'"
              [tooltip]="displayIcon ? ohMessage : null"
              alt="Occupational Hazard"
            />
            <ng-container *ngIf="!displayIcon || (isIndividualProfile && cov.coverage !== 0)">
              <div class="pr-2 pl-2">
                <div>
                  <span class="small-label"> {{ 'CONTRIBUTOR.WAGE.OCCUPATIONAL-HAZARD-CAP' | translate }}</span>
                </div>
                <div class="mid-label">
                  {{ cov.coverage | number: '1.2-2' }}
                  {{ 'CONTRIBUTOR.WAGE.SAR' | translate }}
                </div>
              </div>
            </ng-container>
          </div>
          <div class="icon-wrapper d-flex tooltip-oh" *ngIf="cov.coverageType.english === 'Pension Reform Annuity'">
            <ng-template #pensionReformMessage>
              <span> {{ 'DASHBOARD.PENSION-REFORM-ANNUITY' | translate }}</span>
            </ng-template>
            <img
              src="assets/icons/pension-reform.svg"
              [placement]="lang === 'en' ? 'top' : 'top'"
              [tooltip]="displayIcon ? pensionReformMessage : null"
              alt="Pension Reform Annuity"
            />
          </div>
          <div class="icon-wrapper d-flex tooltip-oh" *ngIf="cov.coverageType.english === 'PPA Annuity'">
            <ng-template #ppaMessage>
              <span> {{ 'DASHBOARD.PPA-ANNUITY' | translate }}</span>
            </ng-template>
            <img
              src="assets/icons/ppa-annuity.svg"
              [placement]="lang === 'en' ? 'top' : 'top'"
              [tooltip]="displayIcon ? ppaMessage : null"
              alt="PPA Annuity"
            />
          </div>
          <div
            class="icon-wrapper d-flex tooltip-ui"
            *ngIf="
              cov.coverageType.english === 'Unemployment Insurance' &&
              cov.coverage !== 0 &&
              cov.establishmentPercentage !== 0
            "
          >
            <ng-template #uiMessage>
              <ng-container *ngTemplateOutlet="tolTemplate; context: { coverage: cov }"></ng-container>
            </ng-template>
            <img
              src="assets/icons/UI.svg"
              [placement]="lang === 'en' ? 'top' : 'top'"
              [tooltip]="displayIcon ? uiMessage : null"
              alt="Unemployment insurance"
            />
            <ng-container *ngIf="!displayIcon || (isIndividualProfile && cov.coverage !== 0)">
              <div class="pr-2 pl-2">
                <div>
                  <span class="small-label"> {{ 'CONTRIBUTOR.WAGE.UNEMPLOYMENT-INS-CAP' | translate }}</span>
                </div>
                <div class="mid-label">
                  {{ cov.coverage | number: '1.2-2' }}
                  {{ 'CONTRIBUTOR.WAGE.SAR' | translate }}
                </div>
              </div>
            </ng-container>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</div>

<ng-template #tolTemplate let-coverage="coverage">
  <div class="tooltip-custom custom-direction">
    <!-- <div class="tooltip-header">
     
    </div> -->
    <div class="tooltip-body" data-placement="top">
      {{ coverage?.coverageType | bilingualText }}
      <!-- <div>
        <div class="share-header">
          {{
            isTotalShare
              ? ('CONTRIBUTOR.TOTAL-CONTRIBUTOR-SHARE' | translate)
              : ('CONTRIBUTOR.CONTRIBUTOR-SHARE' | translate)
          }}
        </div>
        <div class="sar-value">
          {{ coverage?.contributorShare | number: '.2-2' }}
          {{ 'CONTRIBUTOR.WAGE.SAR' | translate }}
        </div>
        <div class="percent" *ngIf="!engagementPeriod?.endDate?.gregorian">
          {{ coverage?.contributorPercentage }}{{ 'CONTRIBUTOR.WAGE.OF-CONTRIBUTORY-WAGE' | translate }}
        </div>
      </div>
      <div *ngIf="!isVic">
        <div class="share-header">
          {{
            isTotalShare ? ('CONTRIBUTOR.TOTAL-EMPLOYER-SHARE' | translate) : ('CONTRIBUTOR.EMPLOYER-SHARE' | translate)
          }}
        </div>
        <div class="sar-value">
          {{ coverage.establishmentShare | number: '.2-2' }}
          {{ 'CONTRIBUTOR.WAGE.SAR' | translate }}
        </div>
        <div class="percent" *ngIf="!engagementPeriod?.endDate?.gregorian">
          {{ coverage.establishmentPercentage }}{{ 'CONTRIBUTOR.WAGE.OF-CONTRIBUTORY-WAGE' | translate }}
        </div>
      </div> -->
    </div>
  </div>
</ng-template>
