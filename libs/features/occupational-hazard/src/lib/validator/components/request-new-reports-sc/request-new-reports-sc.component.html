<!-- Copyright GOSI. All Rights Reserved.
This software is the proprietary information of GOSI.
Use is subject to license terms. -->
<!-- Common breadcrumb component -->
<gosi-breadcrumb-dc> </gosi-breadcrumb-dc>
<div class="content">
  <gosi-alert-sc></gosi-alert-sc>
  <div id="mainHeading">
    <frm-main-heading-dc heading="{{ 'OCCUPATIONAL-HAZARD.REQUEST-NEW-MEDICAL-REPORTS' | translate }}">
    </frm-main-heading-dc>
    <div id="contentArea">
      <div class="row">
        <div class="col-lg-12">
          <div class="row">
            <div class="align">
              <gosi-alert-dc
                [message]="'OCCUPATIONAL-HAZARD.NEW-MEDICAL-REPORT-INFO'"
                type="info"
                [dismissible]="false"
              >
              </gosi-alert-dc>
            </div>
          </div>
          <div class="col-md-12">
            <gosi-card-dc
              type="secondary"
              heading="{{ 'OCCUPATIONAL-HAZARD.REQUIRE-MEDICAL-REPORTS' | translate }}"
              headingSize="md"
            >
              <br />
              <table class="table table-borderless">
                <thead class="thead-light">
                  <tr>
                    <th class="col-md-3 justify-content-md-center">
                      {{ 'OCCUPATIONAL-HAZARD.DOCUMENT-TYPE' | translate }}
                    </th>
                    <th class="col-md-2 justify-content-md-center">
                      {{ 'OCCUPATIONAL-HAZARD.SPECIALITY' | translate }}
                    </th>
                    <th class="col-md-3 justify-content-md-center">
                      {{ 'OCCUPATIONAL-HAZARD.CPT-CODE-DETAILS' | translate }}
                    </th>
                    <th class="col-md-3 justify-content-md-center">
                      {{ 'OCCUPATIONAL-HAZARD.DOCUMENT-DETAILS' | translate }}
                    </th>
                    <th class="col-md-1"></th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Dynamic row using *ngFor -->
                  <tr *ngFor="let item of medicalReportsArray; let i = index" class="border-bottom">
                    <td class="col-md-3">
                      <strong>{{ item?.documentType | bilingualText }}</strong>
                    </td>
                    <td class="col-md-2">
                      {{ item?.specialty | bilingualText }}
                    </td>
                    <td class="col-md-3">
                      {{ item?.cptCodeDetails | bilingualText }}
                    </td>
                    <td class="col-md-3">
                      {{ item?.documentDetails }}
                    </td>
                    <td class="col-md-1">
                      <a [id]="'delete' + i" class="delete-icon" (click)="onDeleteField(i)">
                        <fa-icon size="lg" [icon]="['far', 'trash-alt']"></fa-icon>
                      </a>
                    </td>
                  </tr>
                </tbody>
              </table>
              <!-- Add another dynamic row button -->
              <div class="col-md-12">
                <div class="d-flex justify-content-center">
                  <gosi-button-dc
                    class="mb-2 add-btn"
                    id="addButton"
                    type="primary "
                    [size]="'sm'"
                    [outlineOnly]="true"
                    (submit)="addAnotherRequest(addReportsModal)"
                  >
                    {{ 'OCCUPATIONAL-HAZARD.ADD-ANOTHER-REQUEST ' | translate }}
                  </gosi-button-dc>
                </div>
              </div>
              <!-- Comments text area -->
              <div class="col-lg-12">
                <gosi-input-text-area-dc
                  id="comments"
                  [label]="'OCCUPATIONAL-HAZARD.COMMENTS'"
                  [control]="reportsFormControl.get('comments')"
                >
                </gosi-input-text-area-dc>
              </div>
            </gosi-card-dc>
          </div>
        </div>
      </div>
    </div>
    <div id="actionArea">
      <div class="row">
        <div class="col-lg-12">
          <div class="btn-section float-left">
            <gosi-button-dc name="cancelSubmit" type="secondary" (submit)="cancelSubmit()">
              {{ 'OCCUPATIONAL-HAZARD.CANCEL' | translate }}
            </gosi-button-dc>
          </div>
          <div class="btn-section float-right">
            <gosi-button-dc name="savenext" type="primary" (submit)="requestNewMedicalReport()">
              {{ 'OCCUPATIONAL-HAZARD.CONFIRM' | translate }}</gosi-button-dc
            >
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<ng-template #addReportsModal>
  <gosi-modal-dc [modalHeader]="'OCCUPATIONAL-HAZARD.ADD-MEDICAL-DOCUMENT-DETAILS' | translate">
    <div class="row" modalContent>
      <div class="col-lg-12">
        <div class="row message-style">
          <div class="col-lg-12">
            <gosi-input-radio-dc
              id="documentTypeList"
              [label]="'OCCUPATIONAL-HAZARD.DOCUMENT-TYPE' | translate"
              [control]="documentRadioform.get('documentType')"
              [list]="documentTypeList$"
              (select)="onchangeDocType($event)"
              [hideOptionalLabel]="true"
            ></gosi-input-radio-dc>
          </div>
        </div>
        <div class="row message-style">
          <div class="col-lg-12">
            <gosi-input-select-dc
              id="specialtyList"
              [label]="
                documentRadioform?.get('documentType').get('english')?.value === 'Laboratory test'
                  ? ('OCCUPATIONAL-HAZARD.Investigation-Document-Type' | translate)
                  : ('OCCUPATIONAL-HAZARD.SPECIALTY' | translate)
              "
              [list]="
                documentRadioform?.get('documentType').get('english')?.value === 'Laboratory test'
                  ? investigationDocType
                  : specialtyList
              "
              [control]="requestReportsForm.get('specialty')"
              (selectLov)="selectedSpecialty($event)"
              (changeEvent)="onChange($event)"
            >
            </gosi-input-select-dc>
          </div>
        </div>
        <div class="row message-style">
          <div class="col-lg-12">
            <gosi-input-select-dc
              id="cptCodeList"
              [label]="'OCCUPATIONAL-HAZARD.CPT' | translate"
              [list]="cptCodeList$"
              [control]="requestReportsForm.get('cptCodeDetails')"
            >
            </gosi-input-select-dc>
          </div>
        </div>
        <div class="row message-style">
          <div class="col-lg-12">
            <gosi-input-text-dc
              id="documentDetails"
              [label]="'OCCUPATIONAL-HAZARD.DOCUMENT-DETAILS' | translate"
              [control]="requestReportsForm.get('documentDetails')"
            >
            </gosi-input-text-dc>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-12" modalAction>
      <div class="btn-section float-left">
        <gosi-button-dc name="cancelSubmit" type="secondary" (submit)="cancel()">
          {{ 'OCCUPATIONAL-HAZARD.CANCEL' | translate }}
        </gosi-button-dc>
      </div>
      <div class="btn-section float-right">
        <gosi-button-dc
          name="savenext"
          type="primary"
          [disabled]="!requestReportsForm?.valid ? true : false"
          (submit)="addRequestNewMedicalReports()"
        >
          {{ 'OCCUPATIONAL-HAZARD.ADD' | translate }}</gosi-button-dc
        >
      </div>
    </div>
  </gosi-modal-dc>
</ng-template>
