<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->

<div class="content">
  <!-- Heading -->
  <est-heading-dc [isTransparent]="false" [showBackArrow]="false" [showSeparator]="false">
    {{ 'ESTABLISHMENT.OH-SAFETY-AND-HEALTH-INSPECTION' | translate }}
  </est-heading-dc>

  <!-- banner est details -->
  <div class="row no-gutters banner mb-5">
    <div>
      <gosi-label-dc
        id="est-name"
        [control]="establishment?.name | bilingualText: true"
        label="ESTABLISHMENT.ESTABLISHMENT-NAME"
      >
      </gosi-label-dc>
    </div>
    <div>
      <gosi-label-dc
        id="registrationNo"
        [value]="establishment?.registrationNo"
        label="ESTABLISHMENT.REGISTRATION-NO"
        [isLink]="true"
        (select)="navigateToProfile()"
      >
      </gosi-label-dc>
    </div>
    <div>
      <gosi-label-dc
        id="nationality"
        label="{{ 'ESTABLISHMENT.NATIONALITY' | translate }}"
        [control]="establishment?.nationalityCode"
      >
      </gosi-label-dc>
    </div>
  </div>
  <div class="mb-5">
    <gosi-alert-sc [noSpacing]="true"></gosi-alert-sc>
  </div>
  <gosi-card-dc
    id="abc"
    [isHeading]="false"
    type="secondary"
    [paddingBottom]="true"
  >
  <!-- [heading]="'ESTABLISHMENT.VIOLATION-DETAILS' | translate" -->
    <!--Comments section -->
    <div class="row">
      <div class="col-lg-12">
        <gosi-input-text-area-dc
          id="evaluationReason"
          gosiSpecialCharacterMask
          [maxLength]="maxLengthComments"
          label="ESTABLISHMENT.EVALUATION-REASON"
          [control]="evaluationForm.get('evaluationReason')"
        >
        </gosi-input-text-area-dc>
      </div>
    </div>
  </gosi-card-dc>
  <est-footer-buttons-dc
    *ngIf="!isApiInProgress"
    primaryLabel="ESTABLISHMENT.SUBMIT"
    [showPrevious]="false"
    (submit)="showSubmitModal(submitTemplate)"
    (cancel)="showModal(cancelTemplate)"
  >
  </est-footer-buttons-dc>
</div>

<ng-template #submitTemplate>
  <gosi-confirm-modal-dc
    [message]="'ESTABLISHMENT.SAFETY-EVALUATION-CONFIRM-MSG'"
    (onConfirm)="submitSafetyCheckTransaction()"
    (onCancel)="hideConfirmModal()"
  >
  </gosi-confirm-modal-dc>
</ng-template>

<ng-template #cancelTemplate>
  <gosi-confirm-modal-dc
    iconName="warning"
    message="ESTABLISHMENT.INFO-CANCEL"
    (onConfirm)="cancelModal()"
    (onCancel)="hideModal()"
  >
  </gosi-confirm-modal-dc>
</ng-template>
