<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->
<div class="content">
  <div class="row">
    <div class="col-lg-12">
      <div class="heading-prop">{{ 'BENEFITS.VERIFY-OTP' | translate }}</div>
    </div>
  </div>
  <div class="col-md-12 col-lg-12 otpinfo mb-4" *ngIf="isResend === false && inCorrectOtp !== 3">
    <gosi-alert-dc
      [message]="'BENEFITS.OTP-SENT-INFO' | translate: { mobNo: mobileNumber }"
      type="info"
      [dismissible]="false"
    >
    </gosi-alert-dc>
  </div>
  <div *ngIf="isResend === true">
    <div *ngIf="noOfIncorrectOtp !== noOfResend">
      <gosi-alert-dc [message]="'BENEFITS.OTP-RESEND-INFO' | translate" type="info" [dismissible]="false">
      </gosi-alert-dc>
    </div>
  </div>
  <ng-container *ngIf="showOtpError && isNullOtp === true">
    <gosi-alert-dc type="danger" [dismissible]="false" [message]="'BENEFITS.ERROR.OTP_ERROR_NO_OTP' | translate">
    </gosi-alert-dc>
  </ng-container>
  <div *ngIf="inCorrectOtp >= 1 && inCorrectOtp % 3 === 0 && !isResend">
    <gosi-alert-dc type="info" [message]="'BENEFITS.OTP-EXCEED-INFO' | translate" [dismissible]="false">
    </gosi-alert-dc>
  </div>
  <div *ngIf="isInValid">
    <gosi-alert-sc> </gosi-alert-sc>
  </div>
  <gosi-card-dc type="secondary">
    <div class="row">
      <div class="col-lg-12">
        <div class="col-lg-6">
          <gosi-input-number-dc
            id="nationalIdentity"
            [control]="verifyOtpForm?.get('identity')"
            [label]="'BENEFITS.NATIONAL-IDENTIFICATION-NO-IQAMA' | translate"
            [placeholder]="'BENEFITS.NATIONAL-IDENTIFICATION-NO-IQAMA' | translate"
            [maxLength]="10"
            [disabled]="disabled"
          >
          </gosi-input-number-dc>
        </div>
        <div class="col-lg-6">
          <div class="mb-3 lbl-prop mr-1 ml-1">
            <div class="d-inline-block">{{ 'BENEFITS.OTP' | translate }}</div>
          </div>
          <gosi-input-otp-dc
            [componentId]="'bypassAuth'"
            (timerStopped)="hasRetriesExceeded()"
            [isValid]="isOtpValid"
            [otpLength]="4"
            [disabledOTP]="disabledOTP"
            [control]="verifyOtpForm?.get('otp')"
          >
          </gosi-input-otp-dc>
        </div>
        <div class="col-lg-6 d-flex justify-content-flex-end timer-wrapper" *ngIf="isResend === false">
          <gosi-timer-dc (timerStopped)="hasRetriesExceeded()" [min]="minutes"> </gosi-timer-dc>
        </div>
        <div class="col-lg-6 d-flex justify-content-flex-left">
          <div *ngIf="isResend === true" class="regen-otp p-2">
            <a
              id="resendOtp"
              *ngIf="noOfIncorrectOtp !== noOfResend"
              class="resend-otp custom-wrap"
              (click)="reSendOtp()"
            >
              {{ 'BENEFITS.VERIFY-OTP.REGENERATEOTP' | translate }}
            </a>
          </div>
        </div>
      </div>
    </div>
  </gosi-card-dc>
  <div class="row form-action">
    <div class="col-lg-12 form-action">
      <div class="btn-section float-right">
        <gosi-button-dc id="verify" type="primary" (submit)="verifyOtp()">
          {{ 'BENEFITS.VERIFY' | translate }}
        </gosi-button-dc>
      </div>
      <div class="btn-section float-left">
        <gosi-button-dc id="cancel" type="secondary" (submit)="cancelTransaction()">
          {{ 'BENEFITS.CANCEL' | translate }}
        </gosi-button-dc>
      </div>
    </div>
  </div>
</div>
<!-- templates -->
<ng-template #cancelTemplate>
  <gosi-confirm-modal-dc [message]="'BENEFITS.INFO-CANCEL'" (onConfirm)="confirm()" (onCancel)="decline()">
  </gosi-confirm-modal-dc>
</ng-template>
