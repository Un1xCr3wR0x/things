<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->
<div class="row list-heading mb-4">
  <div class="col-md-6 align-self-center no-of-admins">
    {{ 'ESTABLISHMENT.ADMINS' | translate }} ({{ totalAdmin?.length }})
  </div>
  <div class="col-md-6" *ngIf="canAdd">
    <gosi-button-dc class="add-button" (submit)="add.emit()" size="md">
      <fa-icon icon="plus" class="pl-2 pr-2"></fa-icon>{{ 'ESTABLISHMENT.ADD-ADMIN' | translate }}
    </gosi-button-dc>
  </div>
</div>
<div class="d-flex mt-3 mb-3" *ngIf="showFilter">
  <gosi-search-dc
    class="flex-grow-1"
    placeholder="{{ 'ESTABLISHMENT.ADMIN-NAME-ID' | translate }}"
    (search)="search.emit($event)"
    [isLoading]="isLoadingAdmin"
  >
  </gosi-search-dc>
  <est-admin-filter-dc
    class="pl-2"
    [nationalityList$]="nationalityList$"
    [roleList$]="roleList$"
    [adminFilters]="adminFilters"
    (apply)="applyFilter($event)"
    (reset)="applyFilter([])"
  ></est-admin-filter-dc>
</div>
<div class="col-md-12 search-result pb-2" *ngIf="adminsForView?.length != 0 && adminSearchParam && !isLoadingAdmin">
  <est-search-result-dc [count]="adminsForView?.length" [value]="adminSearchParam"> </est-search-result-dc>
</div>
<div class="col-md-12" *ngIf="adminsForView?.length == 0 && !isLoadingAdmin">
  <est-search-result-dc [count]="0" [value]="adminSearchParam"> </est-search-result-dc>
  <est-no-result-dc></est-no-result-dc>
</div>
<div class="row" *ngIf="adminFilters?.length > 0">
  <div class="col-md-12">
    <gosi-applied-filters-dc [filters]="adminFilters" (clearFilter)="applyFilter($event)"></gosi-applied-filters-dc>
  </div>
</div>
<div class="row admin-row gosi-scrollbar">
  <div
    class="col-md-12 admin-item"
    ngClass="{{ selectedAdminId === person.commonId.id ? 'selected' : '' }}"
    *ngFor="let person of loadedAdmins"
    (click)="selectAdmin(person.commonId.id)"
  >
    <est-person-dc
      class="overflow-hidden"
      *ngIf="!isLoadingAdmin"
      [person]="person"
      [showRole]="false"
      [showId]="true"
    ></est-person-dc>
    <div class="selected-item" *ngIf="selectedAdminId === person.commonId.id"></div>
    <div class="only-sm mt-3" *ngIf="selectedAdminId === person.commonId.id">
      <ng-content select="[id=adminDetails]"> </ng-content>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-12">
    <gosi-loadmore-dc
      (loadMore)="loadMore($event)"
      [currentPage]="currentPage"
      [pageSize]="pageSize"
      [totalCount]="totalCount"
    ></gosi-loadmore-dc>
  </div>
</div>
<div class="col-md-12" *ngIf="isLoadingAdmin">
  <est-loading-dc></est-loading-dc>
</div>
