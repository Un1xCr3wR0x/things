<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->
<gosi-breadcrumb-dc></gosi-breadcrumb-dc>
<div class="content">
  <frm-main-content-dc [documents]="documentList" [comments]="transactionReference" [canEdit]="false">
    <div id="mainHeading">
      <frm-main-heading-dc [heading]="'VIOLATIONS.CANCEL-VIOLATIONS' | translate"> </frm-main-heading-dc>
      <gosi-alert-dc
        *ngIf="isReopenClosingInProgress"
        [message]="'VIOLATIONS.REOPEN_CLOSING_VALIDATOR_INFO'"
        [dismissible]="false"
        type="info"
      >
      </gosi-alert-dc>
    </div>
    <div id="contentArea">
      <div class="row">
        <div class="col-md-12">
          <vol-validator-violations-details-dc
            [isCancelViolation]="true"
            [violationDetails]="violationDetails"
            (profileNavigation)="navigateToViolationProfile($event)"
          >
          </vol-validator-violations-details-dc>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <vol-validator-establishment-details-dc
            [violationDetails]="violationDetails"
            [isCancelViolation]="true"
            (estProfile)="navigateToEstablishmentProfile($event)"
          ></vol-validator-establishment-details-dc>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <vol-cancellation-details-dc
            [violationDetails]="violationDetails"
            [isValidator1]="isValidator1"
            [isReopenClosingInProgress]="isReopenClosingInProgress"
            (editScreen)="navigateToCancelScreen()"
          ></vol-cancellation-details-dc>
        </div>
      </div>
    </div>
    <div id="actionArea">
      <frm-action-area-dc
        [canReject]="true"
        [canApprove]="!billBatchInProgress"
        [canReturn]="isValidator2 && !isReopenClosingInProgress"
        [isReturn]="false"
        (approveEvent)="showTemplate(approveTemplate)"
        (rejectEvent)="showTemplate(rejectTemplate)"
        (returnEvent)="showTemplate(returnTemplate)"
        (cancelEvent)="showTemplate(cancelTemplate)"
      >
      </frm-action-area-dc>
    </div>
  </frm-main-content-dc>
</div>
<ng-template #approveTemplate>
  <frm-approve-template-dc
    [parentForm]="validatorMemberForm"
    (cancelEvent)="hideTemplate()"
    (approveEvent)="saveWorkFlowDetails(0)"
    [isCommentsMandatory]="isReturn"
  >
  </frm-approve-template-dc>
</ng-template>

<ng-template #rejectTemplate>
  <frm-reject-template-dc
    [parentForm]="validatorMemberForm"
    [rejectReasonList$]="rejectReasonList$"
    (rejectEvent)="saveWorkFlowDetails(1)"
    (cancelEvent)="hideTemplate()"
    [warningMessage]="'VIOLATIONS.INFO-VALIDATOR-REJECTION' | translate: { transactionId: transactionNo }"
  >
  </frm-reject-template-dc>
</ng-template>

<ng-template #returnTemplate>
  <frm-return-template-dc
    [parentForm]="validatorMemberForm"
    [returnReasonList$]="returnReasonList$"
    (returnEvent)="saveWorkFlowDetails(2)"
    [warningMessage]="'VIOLATIONS.RETURN-TO-VALIDATOR-TRANSACTION-INFO'"
    (cancelEvent)="hideTemplate()"
  >
  </frm-return-template-dc>
</ng-template>

<ng-template #cancelTemplate>
  <gosi-confirm-modal-dc [message]="'VIOLATIONS.INFO-CANCEL'" (onConfirm)="confirmCancel()" (onCancel)="hideTemplate()">
  </gosi-confirm-modal-dc>
</ng-template>
