<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->
<!-- establishment details -->
<ng-container *ngIf="establishmentDet">
  <div class="sub-content-items">
    <div class="row">
      <div class="col-lg-6">
        <gosi-label-dc
          label="BILLING.REGISTRATION-NUMBER"
          id="registrationNo"
          [control]="establishmentDet.registrationNo"
        >
        </gosi-label-dc>
      </div>
      <div class="col-lg-6" *ngIf="establishmentDet.name !== undefined">
        <gosi-label-dc
          label="BILLING.ESTABLISHMENT-NAME"
          id="establishmentName"
          [control]="
            establishmentDet.name.english === null
              ? establishmentDet.name.arabic
              : (establishmentDet.name | bilingualText)
          "
        >
        </gosi-label-dc>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-6">
        <gosi-label-dc
          id="legalEntity"
          [control]="
            establishmentDet.legalEntity.english == null
              ? establishmentDet.legalEntity.arabic
              : (establishmentDet.legalEntity | bilingualText)
          "
          label="BILLING.LEGAL-ENTITY"
        >
        </gosi-label-dc>
      </div>
      <div class="col-lg-6">
        <gosi-label-dc
          id="establishmentType"
          [control]="establishmentDet.establishmentType"
          label="BILLING.ESTABLISHMENT-TYPE"
        >
        </gosi-label-dc>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-6">
        <gosi-label-dc id="status" [control]="establishmentDet.status" label="BILLING.STATUS"> </gosi-label-dc>
      </div>
    </div>
  </div>
</ng-container>
<!-- end of establishment details -->
<!-- available credit details -->
<div class="sub-content-items">
  <!--------------------------------------TRANSFERABLE-CREDIT--------------------------------------------------->

  <div class="row">
    <div class="col-lg-12">
      <frm-content-heading-dc
        icon="hand-holding-usd"
        heading="BILLING.CREDIT-BALANCE-TRANSFER-DETAILS"
        [canEdit]="false"
      >
      </frm-content-heading-dc>
    </div>
  </div>
  <ng-container *ngIf="creditEstDetails?.creditAccountDetail">
    <div class="row">
      <div class="col-lg-12">
        <div class="heading-font">
          {{ 'BILLING.AVAILABLE-BALANCE-DETAILS' | translate }}
          <span class="suffix">{{ 'BILLING.AT-THE-TIME-OF-SUBMISSION' | translate }}</span>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-6">
        <gosi-currency-label-dc
          id="transferbleCredit"
          [label]="'BILLING.TRANSFERABLE-CREDIT'"
          [currencyTo]="creditEstDetails?.creditAccountDetail?.transferableBalance"
          [countryCodeFrom]="'BILLING.SAR' | translate"
        ></gosi-currency-label-dc>
      </div>
      <div class="col-lg-6">
        <gosi-currency-label-dc
          id="creditBalance"
          [label]="'BILLING.TOTAL-CREDIT-BALANCE'"
          [currencyTo]="creditEstDetails?.creditAccountDetail?.totalCreditBalance"
          [countryCodeFrom]="'BILLING.SAR' | translate"
        ></gosi-currency-label-dc>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-6">
        <gosi-currency-label-dc
          id="retainedBalance"
          [label]="'BILLING.CREDIT-BALANCE-RETAINED'"
          [currencyTo]="creditEstDetails?.creditAccountDetail?.retainedBalance"
          [countryCodeFrom]="'BILLING.SAR' | translate"
        ></gosi-currency-label-dc>
      </div>
    </div>
  </ng-container>
  <!-------------------------------------CURRENT-TRANSFERABLE-CREDIT--------------------------------------------------->
  <ng-container *ngIf="creditEstDetails?.currentAccountDetail">
    <div class="row">
      <div class="col-lg-12">
        <div class="heading-font">{{ 'BILLING.CURRENT-BALANCE-DETAILS' | translate }}</div>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-6">
        <gosi-currency-label-dc
          id="transferbleCredit"
          [label]="'BILLING.TRANSFERABLE-CREDIT'"
          [currencyTo]="creditEstDetails?.currentAccountDetail?.transferableBalance"
          [countryCodeFrom]="'BILLING.SAR' | translate"
        ></gosi-currency-label-dc>
      </div>
      <div class="col-lg-6">
        <gosi-currency-label-dc
          id="creditBalance"
          [label]="'BILLING.TOTAL-CREDIT-BALANCE'"
          [currencyTo]="creditEstDetails?.currentAccountDetail?.totalCreditBalance"
          [countryCodeFrom]="'BILLING.SAR' | translate"
        ></gosi-currency-label-dc>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-6">
        <gosi-currency-label-dc
          id="retainedBalance"
          [label]="'BILLING.CREDIT-BALANCE-RETAINED'"
          [currencyTo]="creditEstDetails?.currentAccountDetail?.retainedBalance"
          [countryCodeFrom]="'BILLING.SAR' | translate"
        ></gosi-currency-label-dc>
      </div>
    </div>
  </ng-container>

  <!-- end of available credit details -->

  <!-- start of recepient establishment details-->

  <div class="row">
    <div class="col-lg-12 sub-heading-value">
      {{ 'BILLING.RECEPIENT-ESTABLISHMENT-DETAILS' | translate }}
    </div>
    <div class="col-lg-12 pl-4 validator-table">
      <div class="table-scroll table-responsive">
        <table class="table">
          <thead class="thead-light">
            <tr>
              <th>{{ 'BILLING.ESTABLISHMENT-NAME' | translate }}</th>
              <th>{{ 'BILLING.REGISTRATION-NUMBER' | translate }}</th>

              <th>
                {{ 'BILLING.STATUS' | translate }}
              </th>
              <th>
                {{ 'BILLING.CURRENT-BALANCE' | translate }}
                <span class="currency-label"> ({{ 'BILLING.SAR' | translate }})</span>
              </th>
              <th>
                {{ 'BILLING.TRANSFER-AMOUNT' | translate
                }}<span class="currency-label"> ({{ 'BILLING.SAR' | translate }})</span>
              </th>
            </tr>
          </thead>
          <tbody>
            <ng-container *ngFor="let details of creditEstDetails?.recipientDetail">
              <ng-container *ngFor="let value of currentBalanceList">
                <ng-container *ngIf="details.registrationNo === value.regNo">
                  <tr>
                    <td>
                      <div>
                        {{
                          details.name.english === null
                            ? details.name.arabic
                            : (details.name | bilingualText | bilingualText)
                        }}
                      </div>
                    </td>
                    <td>
                      {{ details.registrationNo }}
                    </td>
                    <td>
                      {{ details.status | bilingualText }}
                    </td>
                    <td *ngIf="value.balance !== 0">
                      {{ value.balance | number: '1.2-2' }}
                      <span
                        >({{
                          value.creditBalance
                            ? ('BILLING.CREDIT' | translate)
                            : value.debitBalance
                            ? ('BILLING.DEBIT' | translate)
                            : ''
                        }})</span
                      >
                    </td>
                    <td *ngIf="value.balance === 0">
                      {{ '-' }}
                    </td>
                    <td>
                      {{ details.amount | number: '1.2-2' }}
                    </td>
                  </tr>
                </ng-container>
              </ng-container>
            </ng-container>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <!-- end of recepient establishment details-->
</div>
