<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->

<div class="mr-auto heading" *ngIf="ReceiptDetails.noOfRecords > 0">
  {{ 'BILLING.PAYMENT-RECEIPT-DETAILS' | translate }}
</div>
<accordion>
  <accordion-group class="accordion-group-class" heading="{{ 'BILLING.RECEIPT' | translate }}" *ngIf="ReceiptDetails.noOfRecords > 0">
    <span class="arrow-up-btn arrow-color" accordion-heading>
      <span
        >({{ 'BILLING.TOTAL' | translate }}: {{ ReceiptDetails.total * exchangeRate | number: '1.2-2' }}
        {{ currencyType | bilingualText }} )</span
      >
      <fa-icon class="icon-margin" icon="angle-up" size="lg"></fa-icon>
    </span>
    <span class="arrow-down-btn arrow-color" accordion-heading>
      <span
        >({{ 'BILLING.TOTAL' | translate }}: {{ ReceiptDetails.total * exchangeRate | number: '1.2-2' }}
        {{ currencyType | bilingualText }} )</span
      >
      <fa-icon class="icon-margin" icon="angle-down" size="lg"></fa-icon>
    </span>
    <ng-container>
      <div class="row">
        <div class="col-lg-12 search-padding">
          <div class="search-sort-filter-sec menu">
            <div class="search" id="searchid">
              <gosi-search-dc
                [placeholder]="'BILLING.SEARCH' | translate"
                (search)="onSearchReceiptNo($event)"
                (keyup)="onSearchReceiptNo($event.target.value)"
              >
              </gosi-search-dc>
            </div>
            <div class="filter">
              <blg-payment-receipt-details-filter-dc (filterValues)="filterReceipts($event)">
              </blg-payment-receipt-details-filter-dc>
            </div>
            <div class="sort">
              <gosi-sort-dc
                [list]="receiptSort | async"
                (direction)="sortDirection($event)"
                (sortItemSelected)="sortList($event)"
              >
              </gosi-sort-dc>
            </div>
          </div>
        </div>
        <div class="col-lg-12 full-width" *ngIf="itemList?.length > 0; else noResult">
          <div class="table-scroll table-responsive">
            <table class="table table-borderless">
              <thead class="thead-light">
                <tr>
                  <th>
                    {{ 'BILLING.RECEIPT-NUMBER' | translate }}
                  </th>
                  <th>
                    {{ 'BILLING.RECEIPT-DATE' | translate }}
                  </th>
                  <th>
                    {{ 'BILLING.RECEIPT-MODE' | translate }}
                  </th>
                  <th>
                    {{ 'BILLING.AMOUNT' | translate }}
                    <span class="amount-value">({{ currencyType | bilingualText }})</span>
                  </th>
                </tr>
              </thead>
              <tbody>
                <ng-container
                  *ngFor="
                    let item of itemList
                      | paginate
                        : {
                            id: 'paginationId',
                            itemsPerPage: itemsPerPage,
                            currentPage: pageDetails.currentPage,
                            totalItems: ReceiptDetails.noOfRecords
                          };
                    let i = index
                  "
                >
                  <tr class="border-bottom">
                    <td>{{ item.parentReceiptNo }}</td>
                    <td>{{ item.receiptDate.gregorian | date: 'dd/MM/yyyy' }}</td>
                    <td>{{ item.receiptMode | bilingualText }}</td>
                    <td>{{ item.amountReceived * exchangeRate | number: '1.2-2' }}</td>
                  </tr>
                </ng-container>
              </tbody>
            </table>
          </div>
          <ng-container>
            <div>
              <gosi-pagination-dc
                *ngIf="ReceiptDetails.noOfRecords > itemsPerPage"
                [totalSize]="ReceiptDetails.noOfRecords"
                [itemsPerPage]="itemsPerPage"
                [pageDetails]="pageDetails"
                (pageChange)="selectPage($event)"
                paginationId="paginationId"
              ></gosi-pagination-dc>
            </div>
          </ng-container>
        </div>
      </div>
    </ng-container>
  </accordion-group>
</accordion>

<ng-template #noResult>
  <div class="mt-5 text-center full-width">
    <img src="assets/images/search-error.svg" alt="search-error" />
    <br />
    <p class="text-muted">{{ 'BILLING.NO-DATA' | translate | titlecase }}</p>
  </div>
</ng-template>
