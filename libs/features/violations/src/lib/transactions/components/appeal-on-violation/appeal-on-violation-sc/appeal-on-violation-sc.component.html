<div class="row">
  <div class="col-md-12">
    <vol-transactions-accordion-dc heading="{{ 'VIOLATIONS.CUSTOMER-SUMMARY' | translate }}">
      <div class="details row">
        <div class="col-lg-3">
          <gosi-label-dc id="customer-name"
                         [value]="customerSummary?.customerName | bilingualText"
                         [label]="'VIOLATIONS.CUSTOMER-NAME' | translate"
          ></gosi-label-dc>
        </div>
        <div class="col-lg-3" *ngIf="customerSummary?.id?.idType">
          <div *ngIf="customerSummary?.id?.idType === 'NIN'">
            <gosi-label-dc [label]="'BILLING.ID-NATIONAL' | translate"
                           [value]="ninOrIqama"
                           [isLink]="appToken === 'PRIVATE'"
                           (select)="navigateToProfile()"
            ></gosi-label-dc>
          </div>
          <div *ngIf="customerSummary?.id?.idType === 'IQAMA'">
            <gosi-label-dc [label]="'BILLING.IQAMA-NUMBER' | translate"
                           [value]="ninOrIqama"
                           [isLink]="appToken === 'PRIVATE'"
                           (select)="navigateToProfile()"
            ></gosi-label-dc>
          </div>
        </div>
        <div class="col-lg-3">
          <gosi-label-dc id="email"
                         [label]="'VIOLATIONS.CUSTOMER-EMAIL' | translate"
                         [value]="customerSummary?.emailId"
          ></gosi-label-dc>
        </div>
      </div>
    </vol-transactions-accordion-dc>
  </div>
</div>


<div class="row">
  <div class="col-md-12">
    <vol-transactions-accordion-dc heading="{{ 'VIOLATIONS.APPEAL-SUMMARY' | translate }}">
      <div class="row">
        <div class="col-lg-12">
          <div class="row">
            <div class="col-sm-12 col-md-3 col-lg-3">
              <gosi-label-dc id="appeal-violation"
                             [value]="appealTxn?.violationType | bilingualText"
                             [label]="'VIOLATIONS.APPEAL-ON-VIOLATION' | translate"
              ></gosi-label-dc>
            </div>
            <div class="col-sm-12 col-md-3 col-lg-3">
              <gosi-label-dc id="violation-number"
                             [value]="violationId"
                             [label]="'VIOLATIONS.VIOLATION-NUMBER' | translate"
                             [isLink]="true"
                             (select)="onViolationPage($event)"
              ></gosi-label-dc>
            </div>
            <div class="col-sm-12 col-md-3 col-lg-3">
              <gosi-label-dc id="penalty"
                             [value]="appealTxn?.penaltyAmount"
                             [label]="'VIOLATIONS.PENALTY-AMOUNT' | translate"
              ></gosi-label-dc>
            </div>
            <div class="col-sm-12 col-md-3 col-lg-3">
              <gosi-label-dc id="establishment-name"
                             [value]="appealTxn?.establishmentName?.english == null ? appealTxn?.establishmentName?.arabic : appealTxn?.establishmentName?.english == null ? '-' : (appealTxn?.establishmentName | bilingualText)"
                             [label]="'VIOLATIONS.APPEAL-ESTABLISHMENT-NAME' | translate"
              ></gosi-label-dc>
            </div>
            <div class="col-sm-12 col-md-3 col-lg-3">
              <gosi-label-dc id="registeration-number"
                             [value]="appealTxn?.registrationNo"
                             [label]="'VIOLATIONS.CUSTOMER-REG-NO' | translate"
              ></gosi-label-dc>
            </div>
          </div>
        </div>
      </div>
    </vol-transactions-accordion-dc>
  </div>
</div>

<ng-container>
  <div class="row">
    <div class="col-md-12">
      <vol-transactions-accordion-dc heading="{{ 'VIOLATIONS.APPEAL-IN-DETAIL' | translate }}">
        <div class="row bg-light border rounded py-3 mx-2">
          <div class="col-12">
            <div class="row">
              <div class="col-4">
                <p>{{'VIOLATIONS.CONTRIBUTOR-DETAILS' | translate | titlecase}}</p>
              </div>
              <div class="col-4">
                <p>{{'VIOLATIONS.PENALTY-AMOUNT' | translate | titlecase}}</p>
              </div>
              <div class="col-3">
                <p>{{'VIOLATIONS.APPEAL-OPINION' | translate | titlecase}}</p>
              </div>
              <div class="col-1"></div>
            </div>
            <accordion
              *ngFor="let form of contributorFormArray.controls; let i = index">
              <accordion-group id="{{ i }}" class="accordion-group-class cz-accordion-group"
                               (isOpenChange)="selectPanel($event, i + 1)" [isOpen]="accordionPanel === i + 1">
                <div class="col-lg-12 row text-dark px-1" accordion-heading>
                  <div class="col-4">
                    <p>{{ contributorList[i]?.contributorName.english == null || contributorList[i]?.contributorName.english.trim() === '' ? contributorList[i]?.contributorName.arabic : (contributorList[i]?.contributorName | bilingualText) }}</p>
                    <div *ngIf="contributorList[i]?.idType !== null">
                      <div *ngIf="contributorList[i]?.idType === 'NIN'">
                        <span class="identity-heading"> ({{ 'BILLING.ID-NATIONAL' | translate }}: </span>
                        <span>
                            {{ contributorList[i].idNumber }})</span
                        >
                      </div>
                      <div *ngIf="contributorList[i]?.idType === 'PASSPORT'">
                        <span class="identity-heading"> ({{ 'BILLING.PASSPORT' | translate }}: </span>
                        <span>
                            {{ contributorList[i]?.idNumber }})
                          </span>
                      </div>
                      <div *ngIf="contributorList[i]?.idType === 'IQAMA'">
                        <span class="identity-heading"> ({{ 'BILLING.IQAMA-NUMBER' | translate }}: </span>
                        <span>
                            {{ contributorList[i].idNumber }})</span
                        >
                      </div>
                      <div *ngIf="contributorList[i]?.idType === 'BORDERNO'">
                        <span class="identity-heading"> ({{ 'BILLING.BORDER-NUMBER' | translate }}: </span>
                        <span>
                            {{ contributorList[i]?.idNumber }})
                          </span>
                      </div>
                    </div>
                  </div>
                  <div class="col-4">
                    <p>{{contributorList[i]?.violationAmount}}</p>
                  </div>
                  <div class="col-3">
                    <p>{{contributorList[i]?.appealReason}}</p>
                  </div>
                  <div class="col-1">
                          <span class="angle-up" accordion-heading>
                          <fa-icon icon="angle-up" size="lg"></fa-icon>
                          </span>
                    <span class="angle-down" accordion-heading>
                            <fa-icon icon="angle-down" size="lg"></fa-icon>
                          </span>
                  </div>
                </div>
                <div class="row-detail row card-container py-3 mx-5">
                  <div class="col-12">
                    <div class="row">
                      <div class="col-lg-4 col-md-6 col-sm-12 hori-align"
                           *ngFor="let document of contributorList[i]?.documents; let i = index">
                        <gosi-document-view-dc [document]="document"></gosi-document-view-dc>
                      </div>
                      <div class="col-12 mt-5" *ngIf="contributorList[i]?.docReview != null">
                        <label for="fo-comment"
                               class="form-label">{{'VIOLATIONS.APPEAL-GOSI-COMMENTS' | translate}}</label>
                        <textarea
                          id="fo-comment"
                          class="form-control"
                          [formControl]="form.get('comment')"
                        ></textarea>
                      </div>
                    </div>
                  </div>
                </div>
              </accordion-group>
            </accordion>
          </div>
        </div>
      </vol-transactions-accordion-dc>
    </div>
  </div>
</ng-container>
<div class="row" *ngIf="reportAppeal.length > 0">
  <div class="col-12">
    <gosi-document-list-view-dc [documents]="reportAppeal"
                                [isAccordionView]="true"
    ></gosi-document-list-view-dc>
  </div>
</div>
