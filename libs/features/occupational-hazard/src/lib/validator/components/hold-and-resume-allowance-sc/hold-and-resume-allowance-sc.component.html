<!-- Copyright GOSI. All Rights Reserved.
This software is the proprietary information of GOSI.
Use is subject to license terms. -->
<!-- Common breadcrumb component -->
<gosi-breadcrumb-dc> </gosi-breadcrumb-dc>

<div class="content">
  <div id="mainHeading">
    <frm-main-heading-dc [heading]="mainHeading | translate"> </frm-main-heading-dc>
    <!-- Comment and Document Area-->
    <frm-main-content-dc [comments]="comment ? comment : []" [canEdit]="false">
      <div id="contentArea">
        <!--Contributor Details-->
        <oh-engagement-details-dc
          [establishment]="establishment"
          [contributor]="contributor"
          [registrationNo]="registrationNo"
        >
        </oh-engagement-details-dc>
        <!--Hold and Resume ALlowance Details-->

        <div class="row">
          <div class="col-md-12 col-sm-12 col-lg-12">
            <frm-content-heading-dc icon="coins" [heading]="subHeading" [canEdit]="false"> </frm-content-heading-dc>
            <div class="row" *ngIf="holdResumeDetails">
              <div class="col-sm-6 col-md-6 col-lg-6">
                <gosi-label-dc
                  id="injuryId"
                  [value]="payeeId"
                  [label]="idLabel"
                  isLink="true"
                  noMargin="true"
                  (select)="viewDetails()"
                >
                </gosi-label-dc>
              </div>
              <div class="col-sm-6 col-md-6 col-lg-6" *ngIf="holdResumeDetails.ohDate">
                <gosi-label-dc
                  id="injuryDate"
                  [value]="holdResumeDetails.ohDate.gregorian | date: 'dd/MM/yyyy'"
                  [label]="dateLabel"
                >
                </gosi-label-dc>
              </div>
              <ng-container *ngIf="resourceType === 'Hold Allowance'; else resume">
                <div class="col-sm-6 col-md-6 col-lg-6">
                  <gosi-label-dc
                    id="holdFromDate"
                    [value]="holdResumeDetails.holdFromDate.gregorian | date: 'dd/MM/yyyy'"
                    label="OCCUPATIONAL-HAZARD.ALLOWANCE.HOLD-START-DATE"
                  >
                  </gosi-label-dc>
                </div>
                <div class="col-sm-6 col-md-6 col-lg-6">
                  <gosi-label-dc
                    id="reasonForHold"
                    [value]="holdResumeDetails.reason | bilingualText"
                    label="OCCUPATIONAL-HAZARD.ALLOWANCE.REASON-FOR-HOLD"
                  >
                  </gosi-label-dc>
                </div>
              </ng-container>
              <ng-template #resume>
                <div class="col-sm-6 col-md-6 col-lg-6">
                  <gosi-label-dc
                    id="ohHoldSince"
                    [value]="holdResumeDetails.holdFromDate.gregorian | date: 'dd/MM/yyyy'"
                    label="OCCUPATIONAL-HAZARD.ALLOWANCE.ON-HOLD-SINCE"
                  >
                  </gosi-label-dc>
                </div>
              </ng-template>
            </div>
          </div>
        </div>
      </div>
      <div id="actionArea">
        <div class="row">
          <div class="col-lg-12 form-action">
            <div class="button-actions">
              <div class="btn-section float-right" *ngIf="canApprove">
                <gosi-button-dc [id]="'approve'" [type]="'primary'" (click)="approveModal(approveAllowanceTemplate)">
                  {{ 'OCCUPATIONAL-HAZARD.APPROVE' | translate }}</gosi-button-dc
                >
              </div>
              <div class="btn-section float-right" *ngIf="canReject">
                <gosi-button-dc type="danger" id="reject" (click)="rejectAllowance(rejectTemplate)">
                  {{ 'OCCUPATIONAL-HAZARD.REJECT' | translate }}</gosi-button-dc
                >
              </div>
              <div class="btn-section float-left">
                <gosi-button-dc [id]="'cancel'" [type]="'secondary'" (submit)="allowanceCancel(cancelTemplate)">
                  {{ 'OCCUPATIONAL-HAZARD.CANCEL' | translate }}</gosi-button-dc
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </frm-main-content-dc>
  </div>
</div>
<ng-template #cancelTemplate>
  <gosi-confirm-modal-dc
    [message]="'OCCUPATIONAL-HAZARD.CONFIRM-CANCEL'"
    (onCancel)="hideModal()"
    (onConfirm)="confirmCancel()"
  >
  </gosi-confirm-modal-dc>
</ng-template>
<!------------------------  Modals ----------------------------->
<ng-template #modal>
  <gosi-modal-dc [modalHeader]="'OCCUPATIONAL-HAZARD.INJURY.REPORT-OCCUPATIONAL-HAZARD' | translate">
    <div class="btn-section float-left">
      <gosi-button-dc [id]="'cancelApproveBtn'" [type]="'secondary'" name="cancelAllowance" (submit)="hideModal()">
        {{ 'OCCUPATIONAL-HAZARD.CANCEL' | translate }}
      </gosi-button-dc>
    </div>
  </gosi-modal-dc>
</ng-template>
<!--Use Labels for the button-->

<ng-template #approveAllowanceTemplate>
  <frm-approve-template-dc
    [heading]="'OCCUPATIONAL-HAZARD.CNF-APPROVE'"
    (cancelEvent)="hideModal()"
    (approveEvent)="approveAllowance()"
    [parentForm]="reportAllowanceForm"
  >
  </frm-approve-template-dc>
</ng-template>
<!--Info Message For Disease Id-->
<ng-template #errorTemplate>
  <div class="row message justify-content-center">
    <gosi-modal-dc>
      <div modalContent>
        <gosi-alert-dc [message]="infoMesssage | translate" type="info" [dismissible]="false" [noPadding]="true">
        </gosi-alert-dc>
      </div>
      <div class="d-flex justify-content-center close-button" modalAction>
        <gosi-button-dc type="secondary" id="close" (submit)="clearModal()">
          {{ 'OCCUPATIONAL-HAZARD.CLOSE' | translate }}</gosi-button-dc
        >
      </div>
    </gosi-modal-dc>
  </div>
</ng-template>
<!----Reject template---->
<ng-template #rejectTemplate>
  <frm-reject-template-dc
    [rejectReasonList$]="rejectReasonList"
    [warningMessage]="'OCCUPATIONAL-HAZARD.REJECT-TRANSACTION-INFO' | translate: { transactionNo: transactionNumber }"
    (cancelEvent)="hideModal()"
    [parentForm]="reportAllowanceForm"
    (rejectEvent)="confirmRejectAllowance()"
    [commentsMandatory]="true"
  >
  </frm-reject-template-dc>
</ng-template>
