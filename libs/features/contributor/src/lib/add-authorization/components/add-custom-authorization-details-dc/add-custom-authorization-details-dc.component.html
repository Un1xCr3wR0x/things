<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->
<cnt-person-details-input-dc
  *ngIf="!person"
  [isAttorney]="isAttorney"
  [enableRelationshipToMinors]="!isAttorney"
  [personDetailsSmartForm]="personDetailsSmartForm"
  [nationalityList]="nationalityList"
  [genderList]="genderList"
  [showPersonIdentityFields]="false"
  [showPersonNameFields]="!person"
  [isEnglishNameMandatory]="true"
  [noBorder]="false"
  [showCard]="true"
  [cardType]="'secondary'"
  [heading]="
    isAttorney
      ? 'CONTRIBUTOR.ADD-AUTHORIZATION.AUTHORIZED-ATTORNEY-DETAILS'
      : 'CONTRIBUTOR.ADD-AUTHORIZATION.AUTHORIZED-CUSTODIAN-DETAILS'
  "
>
</cnt-person-details-input-dc>
<gosi-card-dc
  [heading]="'CONTRIBUTOR.ADD-AUTHORIZATION.DETAILS' | translate"
  [noHeadingMargin]="false"
  type="secondary"
>
  <div class="row">
    <div class="form-group col-md-6" *ngIf="isAttorney">
      <label>
        {{ 'CONTRIBUTOR.ADD-AUTHORIZATION.ATTORNEY.AUTH-PURPOSE' | translate }}
      </label>
      <div
        class="invalid-feedback invalid-purpose-error-msg"
        id="authorization-purpose-feedback"
        *ngIf="authPurposeForm.invalid"
      >
        {{ 'CORE.THIS-FIELD-IS-REQUIRED' | translate }}
      </div>
      <div class="row auth-purpose-checkbox">
        <gosi-input-checkbox-dc
          id="requestBenefit"
          [label]="'CONTRIBUTOR.ADD-AUTHORIZATION.ATTORNEY.REQUEST-BENEFIT' | translate"
          name="requestBenefit"
          [control]="authPurposeForm.get('isRequestBenefitPurpose')"
        >
        </gosi-input-checkbox-dc>
        <gosi-input-checkbox-dc
          id="receiveBenefit"
          [label]="'CONTRIBUTOR.ADD-AUTHORIZATION.ATTORNEY.RECEIVE-BENEFIT' | translate"
          name="receiveBenefit"
          [control]="authPurposeForm.get('isReceiveBenefitPurpose')"
        >
        </gosi-input-checkbox-dc>
      </div>
    </div>
    <div class="col-md-6">
      <gosi-input-select-dc
        name="countryOfIssue"
        [label]="'CONTRIBUTOR.ADD-AUTHORIZATION.COUNTRY-OF-ISSUE' | translate"
        id="CountryOfIssue"
        [list]="countryList | async"
        [control]="customAuthDetailsForm.get('countryOfIssue')"
      >
      </gosi-input-select-dc>
    </div>
    <div class="col-md-6">
      <gosi-input-date-dc
        id="authIssueDate"
        [label]="'CONTRIBUTOR.ADD-AUTHORIZATION.ISSUE-DATE' | translate"
        [control]="customAuthDetailsForm.get('authIssueDate')"
        [maxDate]="systemDate"
      >
      </gosi-input-date-dc>
    </div>
    <div class="col-md-6">
      <gosi-input-date-dc
        id="authExpiryDate"
        *ngIf="isAttorney"
        [label]="'CONTRIBUTOR.ADD-AUTHORIZATION.EXPIRY-DATE' | translate"
        [control]="customAuthDetailsForm.get('authExpiryDate')"
        [minDate]="systemDate"
        [maxDate]="maxAuthExpiryDate"
      >
      </gosi-input-date-dc>
    </div>
  </div>
</gosi-card-dc>

<cnt-authorizer-person-dc
  #authorizerPersonComponent
  [isAttorney]="isAttorney"
  [personForm]="authorizerPersonForm"
  [nationalityList]="nationalityList"
  [genderList]="genderList"
  [authorizerList]="authorizerList"
  (onVerifyAuthorizer)="onVerifyAuthorizer.emit($event)"
  (onResetAuthorizer)="onResetAuthorizer.emit()"
  (onAddAuthorizer)="onAddAuthorizer.emit()"
  (onDeleteAuthorizer)="onDeleteAuthorizer.emit($event)"
  (onEditAuthorizer)="onEditAuthorizer.emit($event)"
>
</cnt-authorizer-person-dc>

<div class="row form-action">
  <div class="col-lg-12" modalAction>
    <div class="float-right btn-separator">
      <gosi-button-dc type="primary" (submit)="saveCustomAuthDetails()">
        {{ 'CONTRIBUTOR.SAVE-AND-NEXT' | translate }}
      </gosi-button-dc>
    </div>
    <div class="btn-section float-left btn-margins">
      <gosi-button-dc type="secondary" (submit)="popUp(cancelTemplate)">
        {{ 'CONTRIBUTOR.CANCEL' | translate }}
      </gosi-button-dc>
    </div>
    <div class="float-right btn-separator">
      <gosi-button-dc id="backBtn" type="secondary" (submit)="goToPreviousSection()">
        {{ 'CONTRIBUTOR.PRE-SECTION' | translate }}
      </gosi-button-dc>
    </div>
  </div>
</div>

<ng-template #cancelTemplate>
  <gosi-confirm-modal-dc message="BILLING.INFO-CANCEL" (onConfirm)="confirmCancel()" (onCancel)="decline()">
  </gosi-confirm-modal-dc>
</ng-template>
