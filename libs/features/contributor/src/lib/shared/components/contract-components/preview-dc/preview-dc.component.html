<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->
<div class="mobile-view">
  <div class="d-inline-block view-mode">
    <div class="view-mode-toggler-resp">
      <div
        class="column-left view-text"
        [ngClass]="{
          'view-mode-selected': viewMode == 'english',
          'view-mode-unselected': viewMode == 'arabic'
        }"
        (click)="contributionViewChange('english')"
      >
        {{ 'CONTRIBUTOR.ENGLISH' | translate }}
      </div>

      <div
        class="column-right view-text"
        [ngClass]="{
          'view-mode-selected': viewMode == 'arabic',
          'view-mode-unselected': viewMode == 'english'
        }"
        (click)="contributionViewChange('arabic')"
      >
        {{ 'CONTRIBUTOR.ARABIC' | translate }}
      </div>
    </div>
  </div>
  <ng-container *ngIf="isEnglish">
    <cnt-contract-preview-english-dc
      *ngIf="establishment && contractAtDraft && personDetails"
      [section]="agreementPartyHeading"
      [establishment]="establishment"
      [contractAtDraft]="contractAtDraft"
      [personDetails]="personDetails"
    >
    </cnt-contract-preview-english-dc>
    <cnt-contract-preview-english-dc
      *ngIf="establishment && establishment?.contactDetails && contractAtDraft"
      [cardDetails]="firstParty"
      [establishment]="establishment"
      [contractAtDraft]="contractAtDraft"
    >
    </cnt-contract-preview-english-dc>
    <cnt-contract-preview-english-dc
      *ngIf="personDetails"
      [cardDetails]="secondParty"
      [personDetails]="personDetails"
      [contractAtDraft]="contractAtDraft"
    >
    </cnt-contract-preview-english-dc>
    <cnt-preview-heading-dc [section]="generalTermsConditionHeading" [isEnglish]="isEnglish"></cnt-preview-heading-dc>
    <cnt-contract-preview-english-dc
      *ngIf="contractAtDraft && activeEngagement"
      [cardDetails]="jobTitle"
      [contractAtDraft]="contractAtDraft"
      [activeEngagement]="activeEngagement"
    >
    </cnt-contract-preview-english-dc>
    <cnt-contract-preview-english-dc
      *ngIf="contractAtDraft"
      [cardDetails]="contractPeriod"
      (onEditClicked)="editPreview($event)"
    ></cnt-contract-preview-english-dc>
    <cnt-contract-preview-english-dc
      *ngIf="
        contractAtDraft &&
        contractAtDraft?.workDetails?.probationPeriodInDays &&
        contractAtDraft?.workDetails?.probationPeriodInDays > 0
      "
      [cardDetails]="probationaryPeriod"
    >
    </cnt-contract-preview-english-dc>
    <cnt-contract-preview-english-dc
      *ngIf="contractAtDraft"
      [cardDetails]="workingDays"
      (onEditClicked)="editPreview($event)"
    >
    </cnt-contract-preview-english-dc>
    <!-- Annual Leave -->
    <cnt-contract-preview-english-dc
      *ngIf="contractAtDraft"
      [cardDetails]="annualLeave"
      (onEditClicked)="editPreview($event)"
    >
    </cnt-contract-preview-english-dc>
    <!-- Wage and Benefits -->
    <cnt-contract-preview-english-dc
      *ngIf="activeEngagement"
      [cardDetails]="wageBenefits"
      [activeEngagement]="activeEngagement"
      [transportationAllowance]="transportationAllowance"
      (onEditClicked)="editPreview($event)"
    ></cnt-contract-preview-english-dc>
    <!-- Bank Account-->
    <cnt-contract-preview-english-dc
      *ngIf="bankInfo && bankInfo?.ibanAccountNo"
      [cardDetails]="bankAccount"
      [bankInfo]="bankInfo"
      (onEditClicked)="editPreview($event)"
    ></cnt-contract-preview-english-dc>
    <!-- First party obligation -->
    <cnt-contract-preview-english-dc
      [cardDetails]="firstObligation"
      (onEditClicked)="editPreview($event)"
      [probationPeriodInDays]="contractAtDraft?.workDetails?.probationPeriodInDays"
    ></cnt-contract-preview-english-dc>
    <!-- Second party obligation -->
    <cnt-contract-preview-english-dc
      [cardDetails]="secondObligation"
      (onEditClicked)="editPreview($event)"
      [probationPeriodInDays]="contractAtDraft?.workDetails?.probationPeriodInDays"
    ></cnt-contract-preview-english-dc>
    <!-- General Provision -->
    <cnt-contract-preview-english-dc
      [cardDetails]="generalProvision"
      (onEditClicked)="editPreview($event)"
      [probationPeriodInDays]="contractAtDraft?.workDetails?.probationPeriodInDays"
    ></cnt-contract-preview-english-dc>
    <!-- Notice period -->
    <cnt-contract-preview-english-dc
      *ngIf="fromApi?.instruction?.length > 0"
      [cardDetails]="instruction"
      (onEditClicked)="editPreview($event)"
    ></cnt-contract-preview-english-dc>
    <!-- Optional Terms-->
    <cnt-contract-preview-english-dc
      *ngIf="optionalTerms?.grids?.length > 0"
      [cardDetails]="optionalTerms"
      (onEditClicked)="editPreview($event)"
    ></cnt-contract-preview-english-dc>
    <!-- Additional Terms -->
    <cnt-contract-preview-english-dc
      *ngIf="fromApi?.additionalTerms?.length > 0"
      [cardDetails]="additionalTerms"
      (onEditClicked)="editPreview($event)"
    ></cnt-contract-preview-english-dc>
  </ng-container>
  <ng-container *ngIf="isArabic">
    <cnt-contract-preview-arabic-dc
      *ngIf="establishment && contractAtDraft && personDetails"
      [section]="agreementPartyHeading"
      [establishment]="establishment"
      [contractAtDraft]="contractAtDraft"
      [personDetails]="personDetails"
    >
    </cnt-contract-preview-arabic-dc>
    <cnt-contract-preview-arabic-dc
      *ngIf="establishment && establishment?.contactDetails && contractAtDraft"
      [cardDetails]="firstParty"
      [establishment]="establishment"
      [contractAtDraft]="contractAtDraft"
    >
    </cnt-contract-preview-arabic-dc>
    <cnt-contract-preview-arabic-dc
      *ngIf="personDetails"
      [cardDetails]="secondParty"
      [personDetails]="personDetails"
      [contractAtDraft]="contractAtDraft"
    >
    </cnt-contract-preview-arabic-dc>
    <cnt-preview-heading-dc [section]="generalTermsConditionHeading"></cnt-preview-heading-dc>
    <cnt-contract-preview-arabic-dc
      *ngIf="contractAtDraft && activeEngagement"
      [cardDetails]="jobTitle"
      [contractAtDraft]="contractAtDraft"
      [activeEngagement]="activeEngagement"
    >
    </cnt-contract-preview-arabic-dc>
    <cnt-contract-preview-arabic-dc
      *ngIf="contractAtDraft"
      [cardDetails]="contractPeriod"
      (onEditClicked)="editPreview($event)"
    ></cnt-contract-preview-arabic-dc>
    <cnt-contract-preview-arabic-dc
      *ngIf="
        contractAtDraft &&
        contractAtDraft?.workDetails?.probationPeriodInDays &&
        contractAtDraft?.workDetails?.probationPeriodInDays > 0
      "
      [cardDetails]="probationaryPeriod"
    >
    </cnt-contract-preview-arabic-dc>
    <cnt-contract-preview-arabic-dc
      *ngIf="contractAtDraft"
      [cardDetails]="workingDays"
      (onEditClicked)="editPreview($event)"
    >
    </cnt-contract-preview-arabic-dc>
    <!-- Annual Leave -->
    <cnt-contract-preview-arabic-dc
      *ngIf="contractAtDraft"
      [cardDetails]="annualLeave"
      (onEditClicked)="editPreview($event)"
    >
    </cnt-contract-preview-arabic-dc>
    <!-- Wage and Benefits -->
    <cnt-contract-preview-arabic-dc
      *ngIf="activeEngagement"
      [cardDetails]="wageBenefits"
      [activeEngagement]="activeEngagement"
      [transportationAllowance]="transportationAllowance"
      (onEditClicked)="editPreview($event)"
    ></cnt-contract-preview-arabic-dc>
    <!-- Bank Account-->
    <cnt-contract-preview-arabic-dc
      *ngIf="bankInfo && bankInfo?.ibanAccountNo"
      [cardDetails]="bankAccount"
      [bankInfo]="bankInfo"
      (onEditClicked)="editPreview($event)"
    ></cnt-contract-preview-arabic-dc>
    <!-- First party obligation -->
    <cnt-contract-preview-arabic-dc
      [cardDetails]="firstObligation"
      (onEditClicked)="editPreview($event)"
      [probationPeriodInDays]="contractAtDraft?.workDetails?.probationPeriodInDays"
    ></cnt-contract-preview-arabic-dc>
    <!-- Second party obligation -->
    <cnt-contract-preview-arabic-dc
      [cardDetails]="secondObligation"
      (onEditClicked)="editPreview($event)"
      [probationPeriodInDays]="contractAtDraft?.workDetails?.probationPeriodInDays"
    ></cnt-contract-preview-arabic-dc>
    <!-- General Provision -->
    <cnt-contract-preview-arabic-dc
      [cardDetails]="generalProvision"
      (onEditClicked)="editPreview($event)"
      [probationPeriodInDays]="contractAtDraft?.workDetails?.probationPeriodInDays"
    ></cnt-contract-preview-arabic-dc>
    <!-- Notice period -->
    <cnt-contract-preview-arabic-dc
      *ngIf="fromApi?.instruction?.length > 0"
      [cardDetails]="instruction"
      (onEditClicked)="editPreview($event)"
    ></cnt-contract-preview-arabic-dc>
    <!-- Optional Terms-->
    <cnt-contract-preview-arabic-dc
      *ngIf="optionalTerms?.grids?.length > 0"
      [cardDetails]="optionalTerms"
      (onEditClicked)="editPreview($event)"
    ></cnt-contract-preview-arabic-dc>
    <!-- Additional Terms -->
    <cnt-contract-preview-arabic-dc
      *ngIf="fromApi?.additionalTerms?.length > 0"
      [cardDetails]="additionalTerms"
      (onEditClicked)="editPreview($event)"
    ></cnt-contract-preview-arabic-dc>
  </ng-container>
  <div class="row" *ngIf="isPreviewEdit">
    <div class="col-lg-12">
      <cnt-action-area-dc
        primaryButtonLabel="CONTRIBUTOR.SUBMIT"
        [showPreviousSection]="true"
        (previous)="navigateTopreviousTab()"
        (submit)="saveContractDetails()"
        (cancel)="cancelForm()"
        [disablePrimary]="isApiTriggered"
      >
      </cnt-action-area-dc>
    </div>
  </div>
</div>
<div class="desktop-view">
  <cnt-preview-agreement-table-dc
    *ngIf="establishment && contractAtDraft && personDetails"
    [section]="agreementPartyHeading"
    [establishment]="establishment"
    [contractAtDraft]="contractAtDraft"
    [personDetails]="personDetails"
  >
  </cnt-preview-agreement-table-dc>
  <!-- First Party table -->
  <cnt-preview-card-dc
    *ngIf="establishment && establishment?.contactDetails && contractAtDraft"
    [cardDetails]="firstParty"
    [establishment]="establishment"
    [contractAtDraft]="contractAtDraft"
  >
  </cnt-preview-card-dc>
  <!-- Second Party table -->
  <cnt-preview-card-dc
    *ngIf="personDetails"
    [cardDetails]="secondParty"
    [personDetails]="personDetails"
    [contractAtDraft]="contractAtDraft"
    (onEditClicked)="editPreview($event)"
  >
  </cnt-preview-card-dc>
  <cnt-preview-heading-dc [section]="generalTermsConditionHeading"></cnt-preview-heading-dc>
  <!-- Job title and work location -->
  <cnt-preview-card-dc
    *ngIf="contractAtDraft && activeEngagement"
    [cardDetails]="jobTitle"
    [contractAtDraft]="contractAtDraft"
    [activeEngagement]="activeEngagement"
    (onEditClicked)="editPreview($event)"
  >
  </cnt-preview-card-dc>
  <!-- Contracts Period -->
  <cnt-preview-card-dc *ngIf="contractAtDraft" [cardDetails]="contractPeriod" (onEditClicked)="editPreview($event)">
  </cnt-preview-card-dc>
  <!-- Probationary period-->
  <cnt-preview-card-dc
    *ngIf="
      contractAtDraft &&
      contractAtDraft?.workDetails?.probationPeriodInDays &&
      contractAtDraft?.workDetails?.probationPeriodInDays > 0
    "
    [cardDetails]="probationaryPeriod"
    (onEditClicked)="editPreview($event)"
  ></cnt-preview-card-dc>
  <!-- Working Days, Rest Days -->
  <cnt-preview-card-dc *ngIf="contractAtDraft" [cardDetails]="workingDays" (onEditClicked)="editPreview($event)">
  </cnt-preview-card-dc>
  <!-- Annual Leave -->
  <cnt-preview-card-dc *ngIf="contractAtDraft" [cardDetails]="annualLeave" (onEditClicked)="editPreview($event)">
  </cnt-preview-card-dc>
  <!-- Wage and Benefits -->
  <cnt-preview-card-dc
    *ngIf="activeEngagement"
    [cardDetails]="wageBenefits"
    [activeEngagement]="activeEngagement"
    [transportationAllowance]="transportationAllowance"
    (onEditClicked)="editPreview($event)"
  ></cnt-preview-card-dc>
  <!-- Bank Account-->
  <cnt-preview-card-dc
    *ngIf="bankInfo && bankInfo?.ibanAccountNo"
    [cardDetails]="bankAccount"
    [bankInfo]="bankInfo"
    (onEditClicked)="editPreview($event)"
  ></cnt-preview-card-dc>
  <!-- First party obligation -->
  <cnt-preview-card-dc
    [cardDetails]="firstObligation"
    (onEditClicked)="editPreview($event)"
    [probationPeriodInDays]="contractAtDraft?.workDetails?.probationPeriodInDays"
  ></cnt-preview-card-dc>
  <!-- Second party obligation -->
  <cnt-preview-card-dc
    [cardDetails]="secondObligation"
    (onEditClicked)="editPreview($event)"
    [probationPeriodInDays]="contractAtDraft?.workDetails?.probationPeriodInDays"
  ></cnt-preview-card-dc>
  <!-- General Provision -->
  <cnt-preview-card-dc
    [cardDetails]="generalProvision"
    (onEditClicked)="editPreview($event)"
    [probationPeriodInDays]="contractAtDraft?.workDetails?.probationPeriodInDays"
  ></cnt-preview-card-dc>
  <!-- Notice period -->
  <cnt-preview-card-dc
    *ngIf="fromApi?.instruction?.length > 0"
    [cardDetails]="instruction"
    (onEditClicked)="editPreview($event)"
  ></cnt-preview-card-dc>
  <!-- Optional Terms-->
  <cnt-preview-card-dc
    *ngIf="optionalTerms?.grids?.length > 0"
    [cardDetails]="optionalTerms"
    (onEditClicked)="editPreview($event)"
  ></cnt-preview-card-dc>
  <!-- Additional Terms -->
  <cnt-preview-card-dc
    *ngIf="fromApi?.additionalTerms?.length > 0"
    [cardDetails]="additionalTerms"
    (onEditClicked)="editPreview($event)"
  ></cnt-preview-card-dc>
  <!-- Footer Section -->

  <!-- Action area -->
  <div class="row" *ngIf="isPreviewEdit">
    <div class="col-lg-12">
      <cnt-action-area-dc
        primaryButtonLabel="CONTRIBUTOR.SUBMIT"
        [showPreviousSection]="true"
        (previous)="navigateTopreviousTab()"
        (submit)="saveContractDetails()"
        (cancel)="cancelForm()"
        [disablePrimary]="isApiTriggered"
      >
      </cnt-action-area-dc>
    </div>
  </div>
</div>
