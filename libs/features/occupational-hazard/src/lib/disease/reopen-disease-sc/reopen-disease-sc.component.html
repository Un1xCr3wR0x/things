<!-- Copyright GOSI. All Rights Reserved.
This software is the proprietary information of GOSI.
Use is subject to license terms. -->
<gosi-breadcrumb-dc> </gosi-breadcrumb-dc>
<!--   Repen Disease Main Heading  -->
<div class="report-oh-frame content">
  <div class="row">
    <div class="col-md-12">
      <div class="main-heading">
        {{ 'OCCUPATIONAL-HAZARD.DISEASE.REOPEN-DISEASE-TRANSACTION' | translate }}
      </div>
    </div>
  </div>

  <gosi-comments-dc [comments]="comment ? comment : []"></gosi-comments-dc>
  <gosi-alert-sc></gosi-alert-sc>

  <gosi-progress-wizard-dc
    [wizardItems]="addDiseaseWizard"
    (clickWizard)="selectWizard($event)"
    #reportComplicationWizard
  >
  </gosi-progress-wizard-dc>
  <div class="row">
    <div class="col-lg-12">
      <div class="hide-tab">
        <tabset class="pills">
          <tab [active]="currentTab === 0">
            <div class="row">
              <div class="col-md-12">
                <gosi-card-dc type="secondary">
                  <div class="row" [formGroup]="reopenDiseaseForm">
                    <div class="col-lg-12">
                      <div class="row">
                        <div class="col-lg-6">
                          <gosi-input-select-dc
                            id="reopenReason"
                            [label]="'OCCUPATIONAL-HAZARD.REASON-FOR-REOPENING' | translate"
                            [control]="reopenDiseaseForm.get('reopenReason')"
                            [list]="reopenReason$ | async"
                            (selectLov)="selectedReason($event)"
                            [disabled]="disabled"
                          >
                          </gosi-input-select-dc>
                        </div>
                      </div>
                    </div>
                    <!-- <div class="col-lg-12" formGroupName="modifyDiseaseIndicator" *ngIf="ShowToggle">
                      <div class="d-flex bd-highlight">
                        <div class="bd-highlight reopen-details">
                          <span>{{ 'OCCUPATIONAL-HAZARD.DISEASE.REOPEN-DISEASE-DETAILS' | translate }}</span>
                        </div>
                        <gosi-input-toggle-dc
                          id="modifyIndicator"
                          [name]="'modified'"
                          [control]="reopenDiseaseForm.get('modifyDiseaseIndicator')"
                          (changeEvent)="modifyDisease($event)"
                        >
                        </gosi-input-toggle-dc>
                      </div>
                    </div> -->
                  </div>
                </gosi-card-dc>

              </div>
            </div>
            <div class="row">
              <div class="col-lg-12 form-action">
                <div class="disease-details">
                  <div class="float-right btn-section">
                    <gosi-button-dc id="diseaseSaveAndNext" (submit)="saveReopenDiseaseDetails()" type="primary">
                      {{ 'OCCUPATIONAL-HAZARD.SAVE-AND-NEXT' | translate }}</gosi-button-dc
                    >
                  </div>
            
                  <div class="float-left btn-section">
                    <gosi-button-dc (submit)="showCancelTemplate()" id="cancel" type="secondary">
                      {{ 'OCCUPATIONAL-HAZARD.CANCEL' | translate }}</gosi-button-dc
                    >
                  </div>
                </div>
              </div>
            </div>

            <!-- <div class="row">
              <div class="col-md-12">
                <oh-select-occupation-dc
                  [isOccupation]="true"
                  [occupationDetailsForm]="occupationDetailsForm"
                  [parentForm]="diseaseDetailsForm"
                  [establishmentName]="establishmentName$"
                  [processType]="processType"
                  [disableEst]="disableEst"
                  [engagementOccupationDetails]="engagementOccupationDetails"
                  [occupationsList]="newOccupationList"
                  [isOccupationsLoaded]="isOccupationsLoaded"
                  [registeredOccupatonsList]="registeredOccupatonsList"
                  [occupationsCausedDisease]="occupationsCausedDisease"
                  [minDate]="minDate"
                  (getOccupationDetails)="setOccupationDetails($event)"
                  (getEngagementDetails)="getEngagementDetails($event)"
                  (onDelete)="onDeleteOccupationDetails($event)"
                  (edited)="editedOcc($event)"
                ></oh-select-occupation-dc>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12">
                <oh-disease-details-dc
                  [diseaseDetails]="diseaseDetails"
                  [processType]="processType"
                  [diseaseDetailsForm]="diseaseDetailsForm"
                  [diseaseCauseList]="diseaseCauseList$ | async"
                  [disableEst]="disableEst"
                  [diseaseDiagnosisList]="diseaseDiagnosisList$ | async"
                  [routerData]="routerData"
                  [isAppPrivate]="isAppPrivate"
                  (submit)="saveReopenDiseaseDetails()"
                  (template)="showCancelTemplate()"
                ></oh-disease-details-dc>
              </div>
            </div> -->
          </tab>

          <tab [active]="currentTab === 1">
            <div class="row">
              <div class="col-md-12 upload-documents">
                <oh-document-dc
                  #documentDetailsForm
                  [transactionId]="diseaseTransactionId"
                  [businessKey]="diseaseId"
                  [requiredList]="documentsList"
                  [isValidator1]="isValidator1"
                  [isValidator2]="isValidator2"
                  [documentList]="documentItem"
                  [documents]="reqdocumentList"
                  (submit)="submitDocument($event)"
                  (uploadFailed)="showMandatoryDocErrorMessage($event)"
                  (documentFormDetails)="showFormValidation()"
                  (previous)="previousForm()"
                  (refresh)="refreshDocument($event)"
                  [isWorkflow]="isWorkflow"
                  [taskId]="taskid"
                  (delete)="deleteDocument($event)"
                  [parentForm]="documentForm"
                  (template)="showCancelTemplate()"
                  [processType]="processType"
                  [isSelectedReasonOthers]="isSelectedReasonOthers"
                >
                </oh-document-dc>
              </div>
            </div>
            <div class="row">
              <div class="col-md-12">
                <ng-template #cancelDisease>
                  <gosi-confirm-modal-dc
                    [message]="'OCCUPATIONAL-HAZARD.CONFIRM-CANCEL'"
                    (onConfirm)="confirmCancel()"
                    (onCancel)="decline()"
                  >
                  </gosi-confirm-modal-dc>
                </ng-template>
              </div>
            </div>
          </tab>
        </tabset>
      </div>
    </div>
  </div>
</div>
