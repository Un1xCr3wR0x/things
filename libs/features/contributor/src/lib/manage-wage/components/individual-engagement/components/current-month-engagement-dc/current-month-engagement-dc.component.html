<!-- /**
 * Copyright GOSI. All Rights Reserved.
 * This software is the proprietary information of GOSI.
 * Use is subject to license terms.
 */ -->

<div class="row">
  <div class="col-lg-12">
    <div class="col-md-12">
      <fa-icon class="admin-icon" [icon]="['fas', 'user-clock']" size="2x"></fa-icon
      ><span class="heading">
        {{ 'DASHBOARD.CURRENT-MONTH-ENGAGEMENT-DETAILS' | translate }}
      </span>
    </div>
    <div class="table-responsives">
      <table class="table table-borderless">
        <thead class="header">
          <tr>
            <th>{{ 'DASHBOARD.OCCUPATION' | translate }}</th>
            <th>
              {{ 'DASHBOARD.WORKING-DAYS' | translate }}
              <span>
                <fa-icon icon="info-circle" [tooltip]="workingDays" size="md"></fa-icon>
              </span>
            </th>
            <th>{{ 'DASHBOARD.WORKING-HOURS-VALUE' | translate }}</th>
            <th>{{ 'DASHBOARD.WAGE' | translate }}</th>
            <th>
              {{ 'DASHBOARD.TOTAL-WAGE' | translate }}
              <span>
                <fa-icon icon="info-circle" placement="bottom" [tooltip]="wageValue" size="md"></fa-icon>
              </span>
            </th>
          </tr>
        </thead>
        <tbody class="border-bottom">
          <ng-container *ngFor="let engagement of engagementDetails">
            <tr>
              <td>{{ engagement.actualEngagementPeriod?.occupation | bilingualText }}</td>
              <td>
                {{
                  'DASHBOARD.DAYS-WEEK'
                    | translate
                      : {
                          days: getDaysOfWeek(
                            engagement.actualEngagementPeriod?.endDate,
                            engagement.actualEngagementPeriod?.startDate
                          )
                        }
                }}
              </td>
              <td>
                {{
                  'DASHBOARD.HOURS-MONTH'
                    | translate: { hours: engagement.actualEngagementPeriod?.periodDuration?.noOfDays }
                }}
              </td>
              <td>{{ engagement.actualEngagementPeriod?.wage?.contributoryWage | number: '1.2-2' }}</td>
              <td>{{ engagement.actualEngagementPeriod?.wage?.totalWage | number: '1.2-2' }}</td>
            </tr>
          </ng-container>
        </tbody>
      </table>
    </div>
  </div>
</div>
<div class="d-flex flex-row info-section">
  <div *ngIf="engagementDetails" class="last-updated">
    {{ 'DASHBOARD.LAST-UPDATED-ON' | translate
    }}{{ getLastUpdatedDate(engagementDetails[0]?.actualEngagementPeriod?.lastUpdatedDate) | date: 'dd/MM/yyyy' }}
  </div>
  <div class="sar">{{ 'DASHBOARD.ALL-VALUES-IN' | translate }}</div>
</div>

<!-- CONTRIBUTORY WAGE, COVERAGE SECTION -->
<div class="row border-item">
  <div calss="col-auto">
    <div class="d-flex justify-content-start total-section border-right mt-4">
      <div class="flex-container d-flex flex-column">
        <div>
          <div class="con-label">
            {{ 'DASHBOARD.CONTRIBUTORY-WAGE' | translate }}
          </div>
        </div>
        <div class="d-flex justify-content-start">
          <div class="con-wage d-inline-flex p-2 bd-highlight" *ngIf="engagementDetails">
            {{ engagementDetails[0]?.actualEngagementPeriod?.wage?.contributoryWage | number: '1.2-2' }}
            {{ 'DASHBOARD.SAR' | translate }}
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-auto">
    <div class="d-flex justify-content-start total-section mt-4 px-2">
      <div class="d-flex flex-column">
        <div>
          <span class="con-label mx-3">
            {{ 'DASHBOARD.COVERAGE' | translate }}
          </span>
        </div>

        <div>
          <div class="d-flex justify-content-start mobile-coverage-section" *ngIf="engagementDetails">
            <ng-container *ngFor="let coverage of engagementDetails[0]?.actualEngagementPeriod?.coverages">
              <div class="icon-wrapper d-flex">
                <ng-template #annuityMessage>
                  <ng-container></ng-container>
                </ng-template>
                <ng-container *ngIf="coverage.coverageType?.english === annuity">
                  <img
                    src="assets/images/annuity.svg"
                    [placement]="lang === 'en' ? 'right' : 'left'"
                    [tooltip]="displayIcon ? annuityMessage : null"
                    alt="annuity"
                  />
                  <ng-container
                    ><div class="pr-2 pl-2">
                      <div>
                        <span class="small-label"> {{ 'DASHBOARD.ANNUITY' | translate }}</span>
                      </div>
                      <div class="mid-label">
                        {{ coverage?.coverage }}
                        {{ 'DASHBOARD.SAR' | translate }}
                      </div>
                    </div>
                  </ng-container>
                </ng-container>
              </div>
              <div class="icon-wrapper d-flex">
                <ng-template #uiMessage>
                  <ng-container></ng-container>
                </ng-template>
                <ng-container *ngIf="coverage.coverageType?.english === ui">
                  <img
                    src="assets/images/unemployment-insurance.svg"
                    [placement]="lang === 'en' ? 'right' : 'left'"
                    [tooltip]="displayIcon ? uiMessage : null"
                    alt="Unemployment insurance"
                  />
                  <ng-container
                    ><div class="pr-2 pl-2">
                      <div>
                        <span class="small-label"> {{ 'DASHBOARD.UNEMPLOYMENT-INSURANCE' | translate }}</span>
                      </div>
                      <div class="mid-label">
                        {{ coverage?.coverage }}
                        {{ 'DASHBOARD.SAR' | translate }}
                      </div>
                    </div>
                  </ng-container>
                </ng-container>
              </div>
              <div class="icon-wrapper d-flex">
                <ng-template #ohMessage>
                  <ng-container></ng-container>
                </ng-template>
                <ng-container *ngIf="coverage.coverageType?.english === oh">
                  <img
                    src="assets/images/occupational-hazard.svg"
                    [placement]="lang === 'en' ? 'right' : 'left'"
                    [tooltip]="displayIcon ? ohMessage : null"
                    alt="Occupational Hazard"
                  />
                  <ng-container
                    ><div class="pr-2 pl-2">
                      <div>
                        <span class="small-label"> {{ 'DASHBOARD.OCCUPATIONAL-HAZARD' | translate }}</span>
                      </div>
                      <div class="mid-label">
                        {{ coverage.coverage }}
                        {{ 'DASHBOARD.SAR' | translate }}
                      </div>
                    </div>
                  </ng-container>
                </ng-container>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<ng-template #workingDays>
  <div class="row px-2">{{ 'DASHBOARD.WORKING-DAYS' | translate }} 4</div>
  <div class="row px-2">Monday, Tuesday, Wednesday, Thursday</div>
</ng-template>
<ng-template #wageValue>
  <ng-container class="wage-tip">
    <div class="row px-2">
      {{ 'DASHBOARD.TOTAL-WAGE-CALCULATION' | translate }}
    </div>
    <ng-container>
      <div class="row">
        <div class="tooltip-border">
          <div class="block work-value">{{ 'DASHBOARD.MONTHLY-WORKING-HOURS' | translate }}</div>
          <div class="value">
            {{
              'DASHBOARD.NUMBER-HOURS'
                | translate
                  : {
                      hours: 50
                    }
            }}
          </div>
        </div>
        *
        <div class="tooltip-border">
          <div class="block work-value">{{ 'DASHBOARD.WAGE-HOUR' | translate }}</div>
          <div class="value">50 {{ 'DASHBOARD.SAR' | translate }}</div>
        </div>
        =
        <div class="tooltip-border">
          <div class="block work-value">{{ 'DASHBOARD.MONTHLY-WORKING-HOURS' | translate }}</div>
          <div class="value">5000 {{ 'DASHBOARD.SAR' | translate }}</div>
        </div>
      </div>
    </ng-container>
  </ng-container>
</ng-template>
