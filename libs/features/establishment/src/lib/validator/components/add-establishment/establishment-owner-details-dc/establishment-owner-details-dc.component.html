<!--* Copyright GOSI. All Rights Reserved.
 * This software is the proprietary information of GOSI.
 * Use is subject to license terms.
-->
<div class="row">
  <div class="col-md-12">
    <frm-content-heading-dc
      class="content-cmp"
      [ngClass]="[hasOwnerDeleted ? 'owner-deleted' : '']"
      icon="user"
      [canEdit]="canEdit"
      [heading]="'ESTABLISHMENT.OWNERS' | translate"
      (onEdit)="onEditOwnerDetails()"
    ></frm-content-heading-dc>
    <div class="row pb-4">
      <div class="col-md-12">
        <accordion class="owner-accordion">
          <ng-container *ngFor="let owner of newOwners; let i = index">
            <ng-container *ngIf="owner">
              <accordion-group
                class="wrapper-accordion-group"
                [ngClass]="ownersToHighlight.includes(owner.personId) ? 'modified' : ''"
              >
                <div accordion-heading class="float-left font-weight-bold owner-name">
                  <ng-container *ngIf="getOwnerName(owner) !== null; else defaultHeading">
                    {{ getOwnerName(owner) }}
                  </ng-container>
                  <ng-template #defaultHeading>
                    {{ 'ESTABLISHMENT.OWNER-INDEX' | translate: { index: i + 1 } }}
                  </ng-template>
                </div>

                <div class="header-wrapper ml-auto" accordion-heading>
                  <span class="arrow-up">
                    <fa-icon class="icon-wrapper-angle" icon="angle-up" size="2x"></fa-icon>
                  </span>
                  <span class="arrow-down" accordion-heading>
                    <fa-icon class="icon-wrapper-angle" icon="angle-down" size="2x"></fa-icon>
                  </span>
                </div>
                <est-owner-details-dc
                  [index]="i"
                  [isGcc]="isGcc"
                  [showDate]="false"
                  [person]="owner"
                  [showHeading]="false"
                >
                </est-owner-details-dc>
              </accordion-group>
            </ng-container>
          </ng-container>

          <!-- establishment as owner    -->

          <ng-container *ngFor="let ownerest of estOwnersList; let i = index">
            <ng-container *ngIf="ownerest.person == null">
              <accordion-group class="wrapper-accordion-group">
                <div accordion-heading class="float-left font-weight-bold owner-name">
                  <ng-container *ngIf="ownerest?.estOwner?.name !== null; else defaultHeading">
                    {{ ownerest?.estOwner?.name }}
                  </ng-container>
                  <ng-template #defaultHeading>
                    {{ 'ESTABLISHMENT.OWNER-INDEX' | translate: { index: i + 1 } }}
                  </ng-template>
                </div>
                <div class="header-wrapper ml-auto" accordion-heading>
                  <span class="arrow-up">
                    <fa-icon class="icon-wrapper-angle" icon="angle-up" size="2x"></fa-icon>
                  </span>
                  <span class="arrow-down" accordion-heading>
                    <fa-icon class="icon-wrapper-angle" icon="angle-down" size="2x"></fa-icon>
                  </span>
                </div>

                <div class="accordian-wrapper">
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <gosi-label-dc
                        id="name"
                        [control]="ownerest?.estOwner?.name"
                        label="ESTABLISHMENT.ESTABLISHMENT-OWNER-NAME"
                      >
                      </gosi-label-dc>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <gosi-label-dc
                        id="partyId"
                        [control]="ownerest?.estOwner?.partyId"
                        label="ESTABLISHMENT.PARTY-ID"
                      >
                      </gosi-label-dc>
                    </div>
                  </div>
                  <h3 class="est-owner">
                    {{ 'ESTABLISHMENT.CONTACT-DETAILS' | translate }}
                  </h3>
                  <div class="row">
                    <div class="col-sm-12 col-lg-6">
                      <gosi-label-dc
                        id="mobileNo"
                        [control]="ownerest?.estOwner?.mobileNo"
                        label="ESTABLISHMENT.MOBILE-NUMBER"
                      >
                      </gosi-label-dc>
                    </div>
                    <div class="col-sm-12 col-lg-6">
                      <gosi-label-dc id="email" [control]="ownerest?.estOwner?.emailId" label="ESTABLISHMENT.EMAIL-ID">
                      </gosi-label-dc>
                    </div>
                  </div>
                </div>
              </accordion-group>
            </ng-container>
          </ng-container>
        </accordion>
      </div>
    </div>
  </div>
</div>
