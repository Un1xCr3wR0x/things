<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->

<!-- Section to show eligibility errors if any. -->
<div class="content" *ngIf="!canTransfer">
  <!-- Alert Component -->
  <gosi-alert-sc></gosi-alert-sc>
</div>
<div class="content" *ngIf="canTransfer && !successMessage">
  <!-- Heading -->
  <cnt-header-section-dc
    heading="CONTRIBUTOR.TRANSFER-CON.TRANSFER-ALL-CONTRIBUTORS"
    (goBack)="cancelTransferAll(cancelTemplate)"
  ></cnt-header-section-dc>

  <gosi-alert-sc></gosi-alert-sc>

  <div class="row mt-4">
    <div class="col-12">
      <cnt-transfer-all-details-dc
        [registrationNoList]="registrationNumberList"
        [establishmentNameList]="estNameList"
        [branchList]="branchList"
        [establishmentType]="establishmentType$ | async"
        [parentForm]="parentForm"
        [transferAllDetails]="transferAllDetails"
        [contributorCount]="contributorCount"
        [isEditMode]="isEditMode"
        (showAlert)="$event ? alertService.showErrorByKey($event) : alertService.clearAlerts()"
        (changeInFromEst)="fetchActiveCont($event)"
      ></cnt-transfer-all-details-dc>
    </div>
  </div>
  <div class="row" *ngIf="documents.length > 0 || !isAppPrivate">
    <div class="col-12">
      <cnt-document-upload-dc
        [documentList]="documents"
        [businessKey]="isEditMode ? requestId : mainEstRegistrationNo"
        [transactionId]="transactionId"
        [parentForm]="parentForm"
        [referenceNo]="referenceNo"
        [showDocuments]="isAppPrivate"
        [showComments]="true"
        [uuid]="uuid"
        (refresh)="refreshTransferDocument($event)"
      ></cnt-document-upload-dc>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-12">
      <cnt-action-area-dc
        primaryButtonLabel="CONTRIBUTOR.SUBMIT"
        [disablePrimary]="!isTransferable"
        (submit)="submitTransferAll()"
        (cancel)="cancelTransferAll(cancelTemplate)"
      ></cnt-action-area-dc>
    </div>
  </div>
</div>

<div class="content" *ngIf="successMessage">
  <cnt-transfer-all-feedback-dc [message]="successMessage"></cnt-transfer-all-feedback-dc>
</div>

<ng-template #cancelTemplate>
  <gosi-confirm-modal-dc
    [message]="'CONTRIBUTOR.CONFIRM-CANCEL'"
    (onConfirm)="checkRevertTransaction()"
    (onCancel)="hideModal()"
  >
  </gosi-confirm-modal-dc>
</ng-template>
