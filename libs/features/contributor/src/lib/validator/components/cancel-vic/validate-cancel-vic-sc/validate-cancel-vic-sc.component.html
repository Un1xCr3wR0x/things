<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->

<div class="content">
  <frm-main-content-dc [comments]="comments" [documents]="documents" [canEdit]="canEdit" (onEdit)="navigateToEdit(1)">
    <div id="mainHeading">
      <frm-main-heading-dc
        [heading]="'CONTRIBUTOR.CANCEL-VIC.CANCEL-VIC-TITLE' | translate"
        [transactionRefNo]="referenceNo"
        [formSubmissionDate]="cancellationDetails?.formSubmissionDate?.gregorian"
        [subLabel]="'CONTRIBUTOR.SOCIAL-INSURANCE-NO' | translate | uppercase"
        [subValue]="socialInsuranceNo"
      >
      </frm-main-heading-dc>
    </div>

    <!-- alter message on sama  Verification -->
    <div id="contentArea" class="row" *ngIf="isVerifiedStatus">
      <div class="col-lg-12 mt-4">
        <gosi-alert-dc
          [message]="
            isVerifiedAlert ? 'CONTRIBUTOR.IBAN-VERIFICACTION-PROGRESS' : 'CONTRIBUTOR.IBAN-VERIFICATION-FAILED'
          "
          type="info"
          [dismissible]="false"
          [noPadding]="true"
        >
        </gosi-alert-dc>
      </div>
    </div>

    <div id="contentArea">
      <div class="content-item" *ngIf="contributor">
        <!-- Personal Details Section -->
        <cnt-vic-personal-details-dc
          [contributor]="contributor"
          [age]="age"
          [isMobileOnly]="true"
          [canEdit]="false"
          [isBeneficiary]="isBeneficiary"
          [showContributorStatus]="true"
        ></cnt-vic-personal-details-dc>
      </div>

      <!-- Cancel Details Section -->
      <div class="content-item">
        <div *ngIf="cancellationDetails">
          <cnt-view-cancel-vic-details-dc
            [vicCancelDetails]="cancellationDetails"
            [contributionDetails]="vicContributionDetails"
            [bankAccountDetails]="bankDetails"
            [canEdit]="canEdit"
            [isPREligible]="isPREligible"
            [lang]="lang"
            (onEdit)="navigateToEdit(0)"
          ></cnt-view-cancel-vic-details-dc>
        </div>
      </div>
    </div>

    <!-- Action area -->
    <div id="actionArea">
      <frm-action-area-dc
        [canReject]="canReject"
        [canReturn]="canReturn"
        [isReturn]="false"
        (approveEvent)="showModal(approveModal)"
        (returnEvent)="showModal(returnTemplate)"
        (rejectEvent)="showModal(rejectTemplate)"
        (cancelEvent)="navigateToInbox()"
        [disableApprove]="isBillBatch || isVerified"
      >
      </frm-action-area-dc>
    </div>
  </frm-main-content-dc>
</div>

<!-- Modals -->

<ng-template #approveModal>
  <frm-approve-template-dc
    [infoMessage]="isBeneficiary ? 'CONTRIBUTOR.INFO-VALIDATOR-BENEFICIARY' : null"
    [parentForm]="validatorForm"
    (cancelEvent)="hideModal()"
    (approveEvent)="vicCancelWorkflowEvents(0)"
  ></frm-approve-template-dc>
</ng-template>

<ng-template #rejectTemplate>
  <frm-reject-template-dc
    [parentForm]="validatorForm"
    [heading]="'CONTRIBUTOR.CANCEL-VIC.REJECT-CANCEL-VIC'"
    [rejectReasonList$]="rejectReasonList$"
    [transactionNumber]="referenceNo"
    warningMessage="CONTRIBUTOR.INFO-VALIDATOR-REJECTION"
    (cancelEvent)="hideModal()"
    (rejectEvent)="vicCancelWorkflowEvents(1)"
  >
  </frm-reject-template-dc>
</ng-template>

<ng-template #returnTemplate>
  <frm-return-template-dc
    [parentForm]="validatorForm"
    [heading]="'CONTRIBUTOR.CANCEL-VIC.RETURN-CANCEL-VIC'"
    [returnReasonList$]="returnReasonList$"
    [warningMessage]="
      isReturnToAdmin ? 'CORE.INFO.RETURN-TO-ADMIN-TRANSACTION-INFO' : 'CORE.INFO.RETURN-TO-VALIDATOR-TRANSACTION-INFO'
    "
    (cancelEvent)="hideModal()"
    (returnEvent)="vicCancelWorkflowEvents(2)"
  >
  </frm-return-template-dc>
</ng-template>
