<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->
<div class="content" *ngIf="imprisonmentDetails">
  <gosi-alert-sc></gosi-alert-sc>
  <div class="col-auto mr-auto header mb-4">{{ 'BENEFITS.JAILED-CONTRIBUTOR-MODIFY-IMPRISONMENT' | translate }}</div>
  <gosi-card-dc heading="{{ 'BENEFITS.IMPRISONMENT-DETAILS' | translate }}" type="secondary" lessPadding="true">
    <div class="row">
      <div class="col-md-6">
        <gosi-label-dc
          id="imprisonmentDate"
          label="{{ 'BENEFITS.IMPRISONMENT-DATE' | translate }}"
          [value]="imprisonmentDetails?.imprisonmentPeriod?.enteringDate | dateType"
        ></gosi-label-dc>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6" *ngIf="imprisonmentForm">
        <gosi-input-date-dc
          id="releaseDate"
          label="{{ 'BENEFITS.RELEASE-DATE' | translate }}"
          [control]="imprisonmentForm.get('releaseDate').get('gregorian')"
          [noMargin]="true"
          [minDate]="minDateGregorian"
        >
        </gosi-input-date-dc>
      </div>
      <div class="col-md-6" *ngIf="imprisonmentVerifyRsp?.benefitStopDate?.gregorian">
        <gosi-label-dc
          id="benefitStopDate"
          label="{{ 'BENEFITS.BENEFIT-STOP-DATE' | translate }}"
          [value]="imprisonmentVerifyRsp?.benefitStopDate | dateType"
        ></gosi-label-dc>
      </div>
    </div>
    <div class="row mt-3">
      <div class="col-md-12 pt-2 verified-text" *ngIf="imprisonmentVerifyRsp && imprisonmentVerifyRsp?.verified">
        {{ 'BENEFITS.RELEASE-DATE-VERIFIED-MESSAGE' | translate }}
      </div>
      <div class="col-md-12 pt-2 verified-text" *ngIf="imprisonmentVerifyRsp && !imprisonmentVerifyRsp?.verified">
        {{ 'BENEFITS.RELEASE-DATE-NOT-VERIFIED-MESSAGE' | translate }}
      </div>
    </div>
    <div class="row verify-btn">
      <div class="col-md-6" *ngIf="!imprisonmentVerifyRsp">
        <gosi-button-dc id="verify" (submit)="verifyReleaseDate()" type="primary">{{
          'BENEFITS.SEARCH' | translate
        }}</gosi-button-dc>
      </div>
      <div class="col-md-6" *ngIf="imprisonmentVerifyRsp">
        <gosi-button-dc id="reset" (click)="reset()" type="primary">{{ 'BENEFITS.RESET' | translate }}</gosi-button-dc>
      </div>
    </div>
  </gosi-card-dc>

  <gosi-card-dc
    type="secondary"
    lessPadding="true"
    *ngIf="(imprisonmentVerifyRsp && !imprisonmentVerifyRsp?.verified) || inImprisonmentEditMode"
  >
    <div [formGroup]="uploadDocumentForm">
      <gosi-alert-dc [message]="'CORE.ERROR.DOCUMENT-UPLOAD'" type="info"> </gosi-alert-dc>
      <ng-container *ngFor="let items of documentList; let i = index">
        <gosi-input-file-sc
          (uploadedEvent)="docUploadStatus(items)"
          (refresh)="refreshDocument(items)"
          (delete)="checkSubmitDisable(items)"
          [index]="i"
          [isScan]="isAppPrivate"
          [businessKey]="benefitRequestId"
          [document]="items"
          [uuid]="inImprisonmentEditMode ? null : uuid"
          [transactionId]="transactionId"
        >
        </gosi-input-file-sc>
      </ng-container>
    </div>
  </gosi-card-dc>
  <ng-container *ngIf="(imprisonmentVerifyRsp && !imprisonmentVerifyRsp?.verified) || inImprisonmentEditMode">
    <div class="row" [formGroup]="uploadDocumentForm">
      <div class="col-lg-12">
        <gosi-input-text-area-dc id="comments" label="BENEFITS.COMMENTS" [control]="uploadDocumentForm.get('comments')">
        </gosi-input-text-area-dc>
      </div>
    </div>
  </ng-container>
  <div class="row">
    <div class="col-auto">
      <gosi-button-dc id="cancel" type="secondary" (submit)="popUp(cancelTemplate)">
        {{ 'BENEFITS.CANCEL' | translate }}
      </gosi-button-dc>
    </div>
    <div class="col-auto ml-auto justify-content-end">
      <gosi-button-dc id="save" type="primary" (submit)="submit()" [disabled]="isSubmitDisable">
        {{ 'BENEFITS.SUBMIT' | translate }}
      </gosi-button-dc>
    </div>
  </div>
</div>
<ng-template #cancelTemplate>
  <gosi-confirm-modal-dc message="BENEFITS.INFO-CANCEL" (onConfirm)="confirmCancel()" (onCancel)="decline()">
  </gosi-confirm-modal-dc>
</ng-template>
