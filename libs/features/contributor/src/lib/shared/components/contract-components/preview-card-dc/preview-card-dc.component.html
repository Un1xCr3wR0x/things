<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->

<div class="card custom-card" dir="ltr">
  <div class="card-body">
    <ng-container *ngIf="cardDetails.colGrid === 4; else twoCol">
      <div class="table-responsive">
        <div [ngSwitch]="cardDetails.table">
          <div *ngSwitchCase="'firstParty'" class="table-bordered">
            <table class="table mb-0 custom-nowrap-mb">
              <tr class="card-heading custom-card-header">
                <th colspan="2" class="custom-borderless">{{ cardDetails.heading?.english }}</th>
                <th colspan="2" class="custom-borderless">
                  <div class="custom-text-end">
                    <div class="right-direction custom-heading-font">
                      {{ cardDetails.heading?.arabic }}
                      <span>
                        <a>
                          <fa-icon
                            *ngIf="cardDetails.canEdit"
                            [icon]="['fas', 'pencil-alt']"
                            id="{{ cardDetails.table }}"
                            (click)="navigateToTab(cardDetails.table)"
                          >
                          </fa-icon> </a
                      ></span>
                    </div>
                  </div>
                </th>
              </tr>
              <!-- <ng-container *ngIf="appToken !== 'INDIVIDUAL_APP'"> -->
              <ng-container *ngIf="establishment?.contactDetails">
                <tr *ngIf="getNationalAddress(establishment?.contactDetails?.addresses)">
                  <td class="w-25">National Address:</td>
                  <td class="custom-white w-25">
                    {{ getNationalAddress(establishment?.contactDetails?.addresses)?.buildingNo }}
                    {{ getNationalAddress(establishment?.contactDetails?.addresses)?.streetName }} <br />
                    {{ getNationalAddress(establishment?.contactDetails?.addresses)?.city?.english }}
                    {{ getNationalAddress(establishment?.contactDetails?.addresses)?.district }} <br />
                    {{ getNationalAddress(establishment?.contactDetails?.addresses)?.postalCode }} <br />
                    {{ getNationalAddress(establishment?.contactDetails?.addresses)?.unitNo }}
                    {{ getNationalAddress(establishment?.contactDetails?.addresses)?.additionalNo }}
                  </td>
                  <td class="custom-white custom-end w-25">
                    {{ getNationalAddress(establishment?.contactDetails?.addresses)?.buildingNo }}
                    {{ getNationalAddress(establishment?.contactDetails?.addresses)?.streetName }} <br />
                    {{ getNationalAddress(establishment?.contactDetails?.addresses)?.city?.arabic }}
                    {{ getNationalAddress(establishment?.contactDetails?.addresses)?.district }} <br />
                    {{ getNationalAddress(establishment?.contactDetails?.addresses)?.postalCode }} <br />
                    {{ getNationalAddress(establishment?.contactDetails?.addresses)?.unitNo }}
                    {{ getNationalAddress(establishment?.contactDetails?.addresses)?.additionalNo }}
                  </td>
                  <td class="w-25 right-arabic">:العنوان الوطني</td>
                </tr>
                <tr *ngIf="establishment?.contactDetails?.telephoneNo?.primary">
                  <td class="w-25">Phone Number:</td>
                  <td class="custom-white w-25">{{ establishment?.contactDetails?.telephoneNo?.primary }}</td>
                  <td class="custom-white custom-end w-25">
                    {{ establishment?.contactDetails?.telephoneNo?.primary }}
                  </td>
                  <td class="w-25 right-arabic">:رقم هاتف</td>
                </tr>
                <tr *ngIf="establishment?.contactDetails?.emailId?.primary">
                  <td class="w-25">Email:</td>
                  <td class="custom-white w-25">{{ establishment?.contactDetails?.emailId?.primary }}</td>
                  <td class="custom-white custom-end w-25">
                    {{ establishment?.contactDetails?.emailId?.primary }}
                  </td>
                  <td class="w-25 right-arabic">:البريد الالكتروني</td>
                </tr>
                <tr *ngIf="establishment?.contactDetails?.mobileNo?.primary">
                  <td class="w-25">Mobile Number:</td>
                  <td class="custom-white w-25">{{ establishment?.contactDetails?.mobileNo?.primary }}</td>
                  <td class="custom-white custom-end w-25">
                    {{ establishment?.contactDetails?.mobileNo?.primary }}
                  </td>
                  <td class="w-25 right-arabic">:رقم الجوال</td>
                </tr>
              </ng-container>
              <!-- <ng-container *ngIf="appToken === 'INDIVIDUAL_APP'"> -->
              <ng-container *ngIf="establishment?.establishmentContactDetails">
                <tr *ngIf="getNationalAddress(establishment?.establishmentContactDetails?.addresses)">
                  <td class="w-25">National Address:</td>
                  <td class="custom-white w-25">
                    {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.buildingNo }}
                    {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.streetName }} <br />
                    {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.city?.english }}
                    {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.district }} <br />
                    {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.postalCode }} <br />
                    {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.unitNo }}
                    {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.additionalNo }}
                  </td>
                  <td class="custom-white custom-end w-25">
                    {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.buildingNo }}
                    {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.streetName }} <br />
                    {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.city?.arabic }}
                    {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.district }} <br />
                    {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.postalCode }} <br />
                    {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.unitNo }}
                    {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.additionalNo }}
                  </td>
                  <td class="w-25 right-arabic">:العنوان الوطني</td>
                </tr>
                <tr *ngIf="establishment?.establishmentContactDetails?.telephoneNo?.primary">
                  <td class="w-25">Phone Number:</td>
                  <td class="custom-white w-25">
                    {{ establishment?.establishmentContactDetails?.telephoneNo?.primary }}
                  </td>
                  <td class="custom-white custom-end w-25">
                    {{ establishment?.establishmentContactDetails?.telephoneNo?.primary }}
                  </td>
                  <td class="w-25 right-arabic">:رقم هاتف</td>
                </tr>
                <tr *ngIf="establishment?.establishmentContactDetails?.emailId?.primary">
                  <td class="w-25">Email:</td>
                  <td class="custom-white w-25">{{ establishment?.establishmentContactDetails?.emailId?.primary }}</td>
                  <td class="custom-white custom-end w-25">
                    {{ establishment?.establishmentContactDetails?.emailId?.primary }}
                  </td>
                  <td class="w-25 right-arabic">:البريد الالكتروني</td>
                </tr>
                <tr *ngIf="establishment?.establishmentContactDetails?.mobileNo?.primary">
                  <td class="w-25">Mobile Number:</td>
                  <td class="custom-white w-25">{{ establishment?.establishmentContactDetails?.mobileNo?.primary }}</td>
                  <td class="custom-white custom-end w-25">
                    {{ establishment?.establishmentContactDetails?.mobileNo?.primary }}
                  </td>
                  <td class="w-25 right-arabic">:رقم الجوال</td>
                </tr>
              </ng-container>
            </table>
          </div>
          <div *ngSwitchCase="'secondParty'" class="table-bordered">
            <table class="table mb-0 custom-nowrap-mb">
              <tr class="card-heading custom-card-header">
                <th colspan="2" class="custom-borderless">{{ cardDetails.heading?.english }}</th>
                <th colspan="2" class="custom-borderless">
                  <div class="custom-text-end">
                    <div class="right-direction custom-heading-font">
                      {{ cardDetails.heading?.arabic }}
                      <span>
                        <a>
                          <fa-icon
                            *ngIf="cardDetails.canEdit"
                            [icon]="['fas', 'pencil-alt']"
                            id="{{ cardDetails.table }}"
                            (click)="navigateToTab(cardDetails.table)"
                          >
                          </fa-icon> </a
                      ></span>
                    </div>
                  </div>
                </th>
              </tr>

              <tr *ngIf="personDetails?.person?.sex">
                <td class="w-25">Gender:</td>
                <td class="custom-white w-25">{{ personDetails?.person?.sex?.english }}</td>
                <td class="custom-white custom-end w-25 arabic-font">{{ personDetails?.person?.sex?.arabic }}</td>
                <td class="w-25 right-arabic">:الجنس</td>
              </tr>
              <tr *ngIf="personDetails?.person?.birthDate">
                <td class="w-25">Birth Date:</td>
                <td class="custom-white w-25">
                  {{ personDetails?.person?.birthDate?.gregorian | date: 'dd/MM/yyyy' }}
                </td>
                <td class="custom-white custom-end w-25">
                  {{ personDetails?.person?.birthDate?.gregorian | date: 'dd/MM/yyyy' }}
                </td>
                <td class="w-25 right-arabic">:تاريخ الميلاد</td>
              </tr>
              <tr *ngIf="personDetails?.person && contractAtDraft?.religion">
                <td class="w-25">Religion:</td>
                <td class="custom-white w-25">{{ contractAtDraft?.religion?.english }}</td>
                <td class="custom-white custom-end w-25">{{ contractAtDraft?.religion?.arabic }}</td>
                <td class="w-25 right-arabic">:الديانة</td>
              </tr>
              <tr *ngIf="personDetails?.person?.contactDetail?.mobileNo?.primary">
                <td class="w-25">Mobile Number:</td>
                <td class="custom-white w-25">
                  {{ personDetails?.person?.contactDetail?.mobileNo?.primary }}
                </td>
                <td class="custom-white custom-end w-25">
                  {{ personDetails?.person?.contactDetail?.mobileNo?.primary }}
                </td>
                <td class="w-25 right-arabic">:رقم الجوال</td>
              </tr>
              <tr *ngIf="personDetails?.person?.contactDetail?.emailId?.primary">
                <td class="w-25">Email:</td>
                <td class="custom-white w-25">{{ personDetails?.person?.contactDetail?.emailId?.primary }}</td>
                <td class="custom-white custom-end w-25">
                  {{ personDetails?.person?.contactDetail?.emailId?.primary }}
                </td>
                <td class="w-25 right-arabic">:البريد الالكتروني</td>
              </tr>
              <tr *ngIf="getNationalAddress(personDetails?.person?.contactDetail?.addresses)">
                <td class="w-25">National Address:</td>
                <td class="custom-white w-25">
                  {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.buildingNo }}
                  {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.streetName }}
                  <br />
                  {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.city?.english }}
                  {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.district }}
                  <br />
                  {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.postalCode }}
                  <br />
                  {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.unitNo }}
                  {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.additionalNo }}
                </td>
                <td class="custom-white custom-end w-25">
                  {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.buildingNo }}
                  {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.streetName }}
                  <br />
                  {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.city?.arabic }}
                  {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.district }}
                  <br />
                  {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.postalCode }}
                  <br />
                  {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.unitNo }}
                  {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.additionalNo }}
                </td>
                <td class="w-25 right-arabic">:العنوان الوطني</td>
              </tr>
            </table>
          </div>
          <div *ngSwitchCase="'jobTitle'" class="table-bordered">
            <table class="table mb-0 custom-nowrap-mb">
              <tr class="card-heading custom-card-header">
                <th colspan="2" class="custom-borderless">{{ cardDetails.heading?.english }}</th>
                <th colspan="2" class="custom-borderless">
                  <div class="custom-text-end">
                    <div class="right-direction custom-heading-font">
                      {{ cardDetails.heading?.arabic }}
                      <span>
                        <a>
                          <fa-icon
                            *ngIf="cardDetails.canEdit"
                            [icon]="['fas', 'pencil-alt']"
                            id="{{ cardDetails.table }}"
                            (click)="navigateToTab(cardDetails.table)"
                          >
                          </fa-icon> </a
                      ></span>
                    </div>
                  </div>
                </th>
              </tr>
              <tr *ngIf="contractAtDraft?.workDetails?.jobTitle">
                <td class="w-25">Job Title:</td>
                <td class="custom-white w-25">{{ contractAtDraft?.workDetails?.jobTitle?.english }}</td>
                <td class="custom-white custom-end w-25">{{ contractAtDraft?.workDetails?.jobTitle?.arabic }}</td>
                <td class="w-25 right-arabic">:المسمى الوظيفي</td>
              </tr>
              <tr *ngIf="contractAtDraft?.workDetails?.location">
                <td class="w-25">Work Location:</td>
                <td class="custom-white w-25">{{ contractAtDraft?.workDetails?.location?.english }}</td>
                <td class="custom-white custom-end w-25 arabic-font">
                  {{ contractAtDraft?.workDetails?.location?.arabic }}
                </td>
                <td class="w-25 right-arabic">:مقر العمل</td>
              </tr>
              <tr>
                <td class="w-25">Work Domain:</td>
                <td class="custom-white w-25">
                  {{
                    (!(activeEngagement?.engagementPeriod)[0]?.contributorAbroad
                      ? contributorAbroadList[0]
                      : contributorAbroadList[1]
                    )?.english
                  }}
                </td>
                <td class="custom-white custom-end w-25 arabic-font">
                  {{ !(activeEngagement?.engagementPeriod)[0]?.contributorAbroad ? 'داخل المملكة' : 'خارج المملكة' }}
                </td>
                <td class="w-25 right-arabic">:نطاق العمل</td>
              </tr>
              <tr>
                <td class="w-25">Work Type:</td>
                <td class="custom-white w-25">{{ activeEngagement?.workType?.english }}</td>
                <td class="custom-white custom-end w-25 arabic-font">{{ activeEngagement?.workType?.arabic }}</td>
                <td class="w-25 right-arabic">:نوع العمل</td>
              </tr>
            </table>
          </div>
          <div *ngSwitchCase="'wageBenefits'" class="table-bordered">
            <table class="table mb-0 custom-nowrap-mb">
              <tr class="card-heading custom-card-header">
                <th colspan="2" class="custom-borderless">{{ cardDetails.heading?.english }}</th>
                <th colspan="2" class="custom-borderless">
                  <div class="custom-text-end">
                    <div class="right-direction custom-heading-font">
                      {{ cardDetails.heading?.arabic }}
                      <span>
                        <a>
                          <fa-icon
                            *ngIf="cardDetails.canEdit"
                            [icon]="['fas', 'pencil-alt']"
                            id="{{ cardDetails.table }}"
                            (click)="navigateToTab(cardDetails.table)"
                          >
                          </fa-icon> </a
                      ></span>
                    </div>
                  </div>
                </th>
              </tr>
              <tr>
                <td class="w-25" colspan="2">The second party shall be given the following wage and benefits:</td>
                <td class="w-25 right-arabic" colspan="2">:يستحق الطرف الثاني الأجر والبدلات والمزايا التالية</td>
              </tr>
              <tr>
                <td class="w-25">Basic Wage:</td>
                <td class="w-25 custom-white">
                  {{ (activeEngagement?.engagementPeriod)[0]?.wage?.basicWage || 0 | number: '1.2-2' }}
                </td>
                <td class="w-25 custom-white custom-end">
                  {{ (activeEngagement?.engagementPeriod)[0]?.wage?.basicWage || 0 | number: '1.2-2' }}
                </td>
                <td class="w-25 right-arabic">:الأجر الأساسي</td>
              </tr>
              <tr>
                <td class="w-25">Housing:</td>
                <td class="w-25 custom-white">
                  {{ (activeEngagement?.engagementPeriod)[0]?.wage?.housingBenefit || 0 | number: '1.2-2' }}
                </td>
                <td class="w-25 custom-white custom-end">
                  {{ (activeEngagement?.engagementPeriod)[0]?.wage?.housingBenefit || 0 | number: '1.2-2' }}
                </td>
                <td class="w-25 right-arabic">:السكن</td>
              </tr>
              <tr>
                <td class="w-25">Commissions:</td>
                <td class="w-25 custom-white">
                  {{ (activeEngagement?.engagementPeriod)[0]?.wage?.commission || 0 | number: '1.2-2' }}
                </td>
                <td class="w-25 custom-white custom-end">
                  {{ (activeEngagement?.engagementPeriod)[0]?.wage?.commission || 0 | number: '1.2-2' }}
                </td>
                <td class="w-25 right-arabic">:العمولات</td>
              </tr>
              <tr *ngIf="transportationAllowance">
                <td class="w-25">Transportation Allowance:</td>
                <td class="w-25 custom-white">
                  {{ transportationAllowance || 0 | number: '1.2-2' }}
                </td>
                <td class="w-25 custom-white custom-end">
                  {{ transportationAllowance || 0 | number: '1.2-2' }}
                </td>
                <td class="w-25 right-arabic">:بدل النقل</td>
              </tr>
              <tr>
                <td class="w-25">Other Allowance:</td>
                <td class="w-25 custom-white">
                  {{
                    (activeEngagement?.engagementPeriod)[0]?.wage?.otherAllowance - transportationAllowance || 0
                      | number: '1.2-2'
                  }}
                </td>
                <td class="w-25 custom-white custom-end">
                  {{
                    (activeEngagement?.engagementPeriod)[0]?.wage?.otherAllowance - transportationAllowance || 0
                      | number: '1.2-2'
                  }}
                </td>
                <td class="w-25 right-arabic">:بدلات أخرى</td>
              </tr>
              <tr class="d-none">
                <td class="w-25">Total Allowances:</td>
                <td class="w-25 custom-white">
                  {{ (activeEngagement?.engagementPeriod)[0]?.wage?.totalWage | number: '1.2-2' }}
                </td>
                <td class="w-25 custom-white custom-end">
                  {{ (activeEngagement?.engagementPeriod)[0]?.wage?.totalWage | number: '1.2-2' }}
                </td>
                <td class="w-25 right-arabic">:إجمالي البدل</td>
              </tr>
              <tr>
                <td class="w-25" colspan="2">
                  The first party pays the second party each month a total amount of
                  {{ (activeEngagement?.engagementPeriod)[0]?.wage?.totalWage | number: '1.2-2' }} Saudi riyals.
                </td>
                <td class="w-25 right-arabic custom-dir-right" colspan="2">
                  يدفع الطرف الأول للطرف الثاني اجرا قدرة
                  {{ (activeEngagement?.engagementPeriod)[0]?.wage?.totalWage | number: '1.2-2' }} فقط ريال سعودي يستحق
                  نهاية كل شهر.
                </td>
              </tr>
            </table>
          </div>
          <div *ngSwitchCase="'bankAccount'" class="table-bordered">
            <table class="table mb-0 custom-nowrap-mb">
              <tr class="card-heading custom-card-header">
                <th colspan="2" class="custom-borderless">{{ cardDetails.heading?.english }}</th>
                <th colspan="2" class="custom-borderless">
                  <div class="custom-text-end">
                    <div class="right-direction custom-heading-font">
                      {{ cardDetails.heading?.arabic }}
                      <span>
                        <a>
                          <fa-icon
                            *ngIf="cardDetails.canEdit"
                            [icon]="['fas', 'pencil-alt']"
                            id="{{ cardDetails.table }}"
                            (click)="navigateToTab(cardDetails.table)"
                          >
                          </fa-icon> </a
                      ></span>
                    </div>
                  </div>
                </th>
              </tr>
              <tr>
                <td class="w-25">Bank Name:</td>
                <td class="w-25 custom-white">{{ bankInfo?.bankName?.english }}</td>
                <td class="w-25 custom-white custom-end arabic-font">{{ bankInfo?.bankName?.arabic }}</td>
                <td class="w-25 right-arabic">:اسم البنك</td>
              </tr>
              <tr>
                <td class="w-25">IBAN:</td>
                <td class="w-25 custom-white custom-center" colspan="2">{{ bankInfo?.ibanAccountNo }}</td>
                <td class="w-25 right-arabic">:رقم الآيبان</td>
              </tr>
            </table>
          </div>
        </div>
      </div>
    </ng-container>
  </div>
  <ng-template #twoCol>
    <div class="table-responsive">
      <div class="table-bordered">
        <table class="table mb-0 table-bordered">
          <tr class="card-heading custom-card-header">
            <th class="custom-borderless custom-nowrap-mb custom-width-mb">{{ cardDetails.heading?.english }}</th>
            <th class="custom-borderless custom-nowrap-mb custom-width-mb">
              <div class="custom-text-end">
                <div class="right-direction custom-heading-font">
                  {{ cardDetails.heading?.arabic }}
                  <span>
                    <a>
                      <fa-icon
                        *ngIf="cardDetails.canEdit"
                        [icon]="['fas', 'pencil-alt']"
                        id="{{ cardDetails.table }}"
                        (click)="navigateToTab(cardDetails.table)"
                      >
                      </fa-icon> </a
                  ></span>
                </div>
              </div>
            </th>
          </tr>
          <tr
            *ngFor="let row of cardDetails.grids; let i = index"
            [ngClass]="{
              'custom-white':
                (cardDetails?.table === 'firstObligation' ||
                  cardDetails?.table === 'secondObligation' ||
                  cardDetails?.table === 'generalProvision' ||
                  cardDetails?.table === 'optionalTerms' ||
                  cardDetails?.table === 'additionalTerms') &&
                i % 2 === 0 &&
                cardDetails.grids.length > 1
            }"
          >
            <td class="w-50">
              <div class="d-flex">
                <div class="d-inline-block">
                  <span
                    *ngIf="
                      cardDetails?.table === 'firstObligation' ||
                      cardDetails?.table === 'secondObligation' ||
                      cardDetails?.table === 'generalProvision'
                    "
                  >
                    {{ cardDetails?.cardIndex }}.{{ i + 1 }}.
                  </span>
                  <span *ngIf="cardDetails?.table === 'optionalTerms' || cardDetails?.table === 'additionalTerms'">
                    {{ i + 1 }}.
                  </span>
                </div>
                <span class="mr-1"></span>
                <span [ngClass]="cardDetails?.table === 'additionalTerms' ? 'custom-break' : ''">{{
                  row?.english
                }}</span>
              </div>
            </td>
            <td dir="rtl" class="w-50 right-arabic">
              <div class="d-flex">
                <div class="d-inline-block">
                  <span
                    *ngIf="
                      cardDetails?.table === 'firstObligation' ||
                      cardDetails?.table === 'secondObligation' ||
                      cardDetails?.table === 'generalProvision'
                    "
                  >
                    {{ i + 1 }}.{{ cardDetails?.cardIndex }}.
                  </span>
                  <span
                    *ngIf="
                      cardDetails?.table === 'optionalTerms' ||
                      (cardDetails?.table === 'additionalTerms' && row?.arabic)
                    "
                  >
                    {{ i + 1 }}.
                  </span>
                </div>
                <span class="mr-1"></span>
                <span [ngClass]="cardDetails?.table === 'additionalTerms' ? 'custom-break' : ''">
                  {{ row?.arabic }}
                </span>
              </div>
            </td>
          </tr>
        </table>
      </div>
    </div>
  </ng-template>
</div>
