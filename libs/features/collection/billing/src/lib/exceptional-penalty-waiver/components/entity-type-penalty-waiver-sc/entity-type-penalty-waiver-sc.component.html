<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->
<gosi-breadcrumb-dc> </gosi-breadcrumb-dc>

<div class="content">
  <ng-container>
    <div class="row extra-margin heading-margin">
      <span class="header"> {{ 'BILLING.EXCEPTIONAL-LATE-FEE-WAIVER' | translate }}</span>
    </div>
    <gosi-alert-sc [noSpacing]="true"></gosi-alert-sc>
    <div class="row" *ngIf="isCommentsPresent">
      <div class="col-12">
        <gosi-comments-dc [comments]="comments"> </gosi-comments-dc>
      </div>
    </div>
    <span *ngIf="searchOption === 'entityType'">
      <gosi-alert-dc
        message="BILLING.ENTITY-EXCEPTIONAL-WAVIER-INFO"
        type="info"
        [dismissible]="true"
        [noPadding]="true"
      >
      </gosi-alert-dc>
    </span>
    <div class="row">
      <div class="col-lg-12" *ngIf="searchOption === 'entityType'">
        <blg-waiver-segment-details-dc
          [establishmentSegment]="entitySegment"
          [establishmentSegmentMultiSelect]="entitySegmentMultiSelect"
          [vicExceptionalFlag]="false"
          [entityFlag]="true"
          [bulkpenaltyCount]="totalNumberOfEntity"
        >
        </blg-waiver-segment-details-dc>
      </div>
    </div>
    <ng-container>
      <gosi-card-dc type="secondary">
        <blg-penalty-waiver-calculation-dc
          [penaltyWaiverReason]="penalityWaiverSelectedReason"
          [eventDateList]="eventDateList"
          [dataOnEditMode]="wavierDetailsOnEdit"
          [penaltyWaiverOtherReason]="penalityWaiverSelectedOtherReason"
          [waiverPeriodPenaltyAmount]="wavierDetails?.waiverPeriodPenaltyAmount"
          [isGdicEdit]="inWorkflow"
          [parentForm]="exceptionalPenalityMainForm"
          [searchOption]="searchOption"
          [isEventDateFlag]="isEventDateFlag"
          (waiverPeriod)="getWaiverAmount($event)"
          (eligiblePenaltyAmount)="passEligiblePenaltyAmount($event)"
          (newEventDateList)="newEventDateList($event)"
          (onMonthChange)="onMonthRangeChange($event)"
        ></blg-penalty-waiver-calculation-dc>
      </gosi-card-dc>

      <gosi-card-dc type="secondary">
        <blg-waiver-document-upload-dc
          (doc)="refreshDocumentsForAllSegment($event)"
          [documents]="documents"
          [isScan]="true"
          [parentForm]="exceptionalPenalityMainForm"
          [csrFlag]="true"
          [transactionId]="documentTransactionId"
          [businessKey]="businessKey"
          [uuid]="uuid"
        ></blg-waiver-document-upload-dc>
      </gosi-card-dc>
    </ng-container>

    <!-- Action area -->
    <div class="row">
      <div class="col-lg-12">
        <blg-action-area-dc
          primaryButtonLabel="BILLING.SUBMIT"
          secondaryButtonLabel="BILLING.CANCEL"
          (submit)="onSubmitEntityPenalityDetails()"
          (cancel)="showModal(cancelTemplate, 'md')"
        ></blg-action-area-dc>
      </div>
    </div>
  </ng-container>
</div>
<ng-template #cancelTemplate>
  <gosi-confirm-modal-dc [message]="'BILLING.INFO-CANCEL'" (onConfirm)="navigateBackToHome()" (onCancel)="hideModal()">
  </gosi-confirm-modal-dc>
</ng-template>
