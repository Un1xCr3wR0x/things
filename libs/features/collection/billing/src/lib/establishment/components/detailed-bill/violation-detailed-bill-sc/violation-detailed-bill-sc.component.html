<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->

<blg-detailed-bill-header-dc
  [isGccCountry]="isGccCountryVal"
  [establishmentHeader]="establishmentHeaderDetails"
  (download)="downloadViolationDetailedBill($event)"
  (Print)="printViolationDetailedBill()"
></blg-detailed-bill-header-dc>

<div class="content">
  <div class="row">
    <div class="col-lg-12">
      <div class="row" *ngIf="currencyValues.english !== undefined">
        <div class="col-lg-12">
          <blg-itemized-bill-details-dc
            [itemizedBillDetails]="billDetails"
            (itemizedDate)="getViolationDetailsOnSelectedDate($event)"
            [isAdmin]="isAdmin"
            [exchangeRate]="exchangeRate"
            [isGccCountry]="isGccCountryVal"
            [currencyType]="currencyValues"
            (itemizedDetails)="getDashboardBillDetailsForRejectedOH()"
            [itemizedBillList]="itemizedBills"
            [noOfDays]="noOfDays"
            [selectedDate]="selectedDateValue"
            [errorMessage]="errorMessage"
            [billStartDate]="billStartDate"
            [isBillNumber]="isBillNumber"
            [initialStartDate]="initialStartDate"
          >
          </blg-itemized-bill-details-dc>
          <ng-container>
            <blg-itemized-bill-tabset-dc
              [selectedTab]="'BILLING.VIOLATIONS'"
              [exchangeRate]="exchangeRate"
              [currencyType]="currencyValues"
              [tabSet]="tabValue"
              (tabSelected)="navToNewTabSelected($event)"
            >
            </blg-itemized-bill-tabset-dc>
            <div *ngIf="violationDetails?.violatedContributorsCountAggregate > 0; else noResultFound">
              <div class="row search-area-padding">
                <div class="col-auto mr-auto heading">
                  {{ 'BILLING.VIOLATIONS' | translate | titlecase }}
                  {{ 'BILLING.DETAILS' | translate | titlecase }}
                </div>
              </div>
              <blg-violation-table-dc
                [violationDetails]="violationDetails"
                (onPageChange)="selectPage($event)"
              ></blg-violation-table-dc>
            </div>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</div>
<ng-template #noResultFound>
  <div class="mt-5 text-center full-width">
    <img src="assets/images/search-error.svg" alt="search-error" />
    <br />
    <p class="text-muted">{{ 'BILLING.NO-DATA' | translate | titlecase }}</p>
  </div>
</ng-template>
