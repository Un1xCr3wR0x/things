<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->

<div class="content" *ngIf="!isTransactionSuccess; else feedback">
  <!-- Heading -->
  <cnt-header-section-dc
    heading="CONTRIBUTOR.ADD-SECONDED"
    (goBack)="checkForChanges(cancelTemplate)"
  ></cnt-header-section-dc>
  <!-- Contributor details banner -->
  <div class="row mt-4" *ngIf="contributor">
    <div class="col-lg-12">
      <cnt-contributor-banner-dc [contributor]="contributor"></cnt-contributor-banner-dc>
    </div>
  </div>

  <gosi-alert-sc></gosi-alert-sc>

  <!-- Seconded details capture section -->
  <div class="row mt-4" *ngIf="(isEditMode && secondedDetails) || (!isEditMode && establishment)">
    <div class="col-lg-12">
      <cnt-seconded-details-dc
        [establishment]="establishment"
        [parentForm]="secondedForm"
        [govtEstablishmentList]="govtEstablishmentList$ | async"
        [isEditMode]="isEditMode"
        [secondedDetails]="secondedDetails"
      ></cnt-seconded-details-dc>
    </div>
  </div>

  <!-- Document section -->
  <div class="row mt-4" *ngIf="documents.length > 0">
    <div class="col-lg-12">
      <cnt-document-upload-dc
        [documentList]="documents"
        [businessKey]="isEditMode ? secondedId : personId"
        [transactionId]="transactionId"
        [parentForm]="secondedForm"
        [referenceNo]="referenceNo"
        [showDocuments]="true"
        [showComments]="isEditMode"
        (refresh)="refreshDocument($event)"
      ></cnt-document-upload-dc>
    </div>
  </div>

  <!-- Action area -->
  <div class="row">
    <div class="col-lg-12">
      <cnt-action-area-dc
        primaryButtonLabel="CONTRIBUTOR.SUBMIT"
        (submit)="submitSecondedDetails()"
        (cancel)="checkForChanges(cancelTemplate)"
      ></cnt-action-area-dc>
    </div>
  </div>
</div>

<ng-template #feedback>
  <div class="content">
    <cnt-seconded-feedback-dc
      [message]="successMessage"
      (addAnother)="navigateBack(false)"
    ></cnt-seconded-feedback-dc></div
></ng-template>

<ng-template #cancelTemplate>
  <gosi-confirm-modal-dc
    [message]="'CONTRIBUTOR.CONFIRM-CANCEL'"
    (onConfirm)="checkRevertRequired()"
    (onCancel)="hideModal()"
  >
  </gosi-confirm-modal-dc>
</ng-template>
