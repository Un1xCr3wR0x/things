<ng-container *ngIf="section">
  <div class="card custom-card" dir="ltr">
    <div class="card-body">
      <div class="table-responsive custom-overflow">
        <div class="table-bordered">
          <table class="table mb-0 custom-nowrap-mb">
            <tr class="card-heading custom-card-header">
              <th class="custom-borderless custom-width-mb">
                <div class="custom-text-end">
                  <div class="right-direction custom-heading-font">{{ section?.arabic }}</div>
                </div>
              </th>
            </tr>
            <tr>
              <td class="w-50">
                <cnt-agreement-arabic-dc
                  *ngIf="establishment && contractAtDraft && personDetails"
                  [establishment]="establishment"
                  [contractAtDraft]="contractAtDraft"
                  [personDetails]="personDetails"
                >
                </cnt-agreement-arabic-dc>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>
  <div class="card p-0" dir="ltr">
    <div class="card-body">
      <div class="table-responsive">
        <div class="table-bordered">
          <table class="table mb-0">
            <tr>
              <td class="w-50 custom-padding custom-width-mb">
                <div class="right-arabic">.ويشار لهما معاً بـ (الطرفين أو الطرفان)</div>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>
  <div class="card p-0" dir="ltr">
    <div class="card-body m-0 p-0">
      <div class="table-responsive">
        <div class="table-bordered">
          <table class="table mb-0">
            <tr>
              <td class="w-50 custom-padding custom-width-mb">
                <div class="right-arabic custom-dir-right">
                  تعتبر بيانات الطرفين أعلاه جزءاً لا يتجزأ من هذا العقد، وتشكل مع ملاحقه وحدة متكاملة وتعتبر جزءاً من
                  العقد بحيث تفسر ويتمم بعضها بعضاً.
                </div>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>
</ng-container>
<ng-container *ngIf="!section">
  <div class="card custom-card" dir="ltr">
    <div class="card-body">
      <ng-container *ngIf="cardDetails.colGrid === 4; else twoCol">
        <div class="table-responsive">
          <div [ngSwitch]="cardDetails.table">
            <div *ngSwitchCase="'firstParty'" class="table-bordered">
              <table class="table mb-0 custom-nowrap-mb">
                <tr class="card-heading custom-card-header">
                  <th colspan="2" class="custom-borderless">
                    <div class="custom-text-end">
                      <div class="right-direction custom-heading-font">
                        {{ cardDetails.heading?.arabic }}
                      </div>
                    </div>
                  </th>
                </tr>
                <!-- <ng-container *ngIf="appToken === 'INDIVIDUAL_APP'"> -->
                <ng-container *ngIf="establishment?.establishmentContactDetails">
                  <tr *ngIf="getNationalAddress(establishment?.establishmentContactDetails?.addresses)">
                    <td class="custom-white custom-end w-50">
                      {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.buildingNo }}
                      {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.streetName }} <br />
                      {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.city?.arabic }}
                      {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.district }} <br />
                      {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.postalCode }} <br />
                      {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.unitNo }}
                      {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.additionalNo }}
                    </td>
                    <td class="w-50 right-arabic">:العنوان الوطني</td>
                  </tr>
                  <tr *ngIf="establishment?.establishmentContactDetails?.telephoneNo?.primary">
                    <td class="custom-white custom-end w-50">
                      {{ establishment?.establishmentContactDetails?.telephoneNo?.primary }}
                    </td>
                    <td class="w-50 right-arabic">:رقم هاتف</td>
                  </tr>
                  <tr *ngIf="establishment?.establishmentContactDetails?.emailId?.primary">
                    <td class="custom-white custom-end w-50">
                      {{ establishment?.establishmentContactDetails?.emailId?.primary }}
                    </td>
                    <td class="w-50 right-arabic">:البريد الالكتروني</td>
                  </tr>
                  <tr *ngIf="establishment?.establishmentContactDetails?.mobileNo?.primary">
                    <td class="custom-white custom-end w-50">
                      {{ establishment?.establishmentContactDetails?.mobileNo?.primary }}
                    </td>
                    <td class="w-50 right-arabic">:رقم الجوال</td>
                  </tr>
                </ng-container>
                <ng-container *ngIf="establishment?.contactDetails">
                  <tr *ngIf="getNationalAddress(establishment?.contactDetails?.addresses)">
                    <td class="custom-white custom-end w-50">
                      {{ getNationalAddress(establishment?.contactDetails?.addresses)?.buildingNo }}
                      {{ getNationalAddress(establishment?.contactDetails?.addresses)?.streetName }} <br />
                      {{ getNationalAddress(establishment?.contactDetails?.addresses)?.city?.arabic }}
                      {{ getNationalAddress(establishment?.contactDetails?.addresses)?.district }} <br />
                      {{ getNationalAddress(establishment?.contactDetails?.addresses)?.postalCode }} <br />
                      {{ getNationalAddress(establishment?.contactDetails?.addresses)?.unitNo }}
                      {{ getNationalAddress(establishment?.contactDetails?.addresses)?.additionalNo }}
                    </td>
                    <td class="w-50 right-arabic">:العنوان الوطني</td>
                  </tr>
                  <tr *ngIf="establishment?.contactDetails?.telephoneNo?.primary">
                    <td class="custom-white custom-end w-50">
                      {{ establishment?.contactDetails?.telephoneNo?.primary }}
                    </td>
                    <td class="w-50 right-arabic">:رقم هاتف</td>
                  </tr>
                  <tr *ngIf="establishment?.contactDetails?.emailId?.primary">
                    <td class="custom-white custom-end w-50">
                      {{ establishment?.contactDetails?.emailId?.primary }}
                    </td>
                    <td class="w-50 right-arabic">:البريد الالكتروني</td>
                  </tr>
                  <tr *ngIf="establishment?.contactDetails?.mobileNo?.primary">
                    <td class="custom-white custom-end w-50">
                      {{ establishment?.contactDetails?.mobileNo?.primary }}
                    </td>
                    <td class="w-50 right-arabic">:رقم الجوال</td>
                  </tr>
                </ng-container>
              </table>
            </div>
            <div *ngSwitchCase="'secondParty'" class="table-bordered">
              <table class="table mb-0 custom-nowrap-mb">
                <tr class="card-heading custom-card-header">
                  <th colspan="2" class="custom-borderless">
                    <div class="custom-text-end">
                      <div class="right-direction custom-heading-font">
                        {{ cardDetails.heading?.arabic }}
                      </div>
                    </div>
                  </th>
                </tr>

                <tr *ngIf="personDetails?.person?.sex">
                  <td class="custom-white custom-end w-50 arabic-font">{{ personDetails?.person?.sex?.arabic }}</td>
                  <td class="w-50 right-arabic">:الجنس</td>
                </tr>
                <tr *ngIf="personDetails?.person?.birthDate">
                  <td class="custom-white custom-end w-50">
                    {{ personDetails?.person?.birthDate?.gregorian | date: 'dd/MM/yyyy' }}
                  </td>
                  <td class="w-50 right-arabic">:تاريخ الميلاد</td>
                </tr>
                <tr *ngIf="personDetails?.person && contractAtDraft?.religion">
                  <td class="custom-white custom-end w-50">{{ contractAtDraft?.religion?.arabic }}</td>
                  <td class="w-50 right-arabic">:الديانة</td>
                </tr>
                <tr *ngIf="personDetails?.person?.contactDetail?.mobileNo?.primary">
                  <td class="custom-white custom-end w-50">
                    {{ personDetails?.person?.contactDetail?.mobileNo?.primary }}
                  </td>
                  <td class="w-50 right-arabic">:رقم الجوال</td>
                </tr>
                <tr *ngIf="personDetails?.person?.contactDetail?.emailId?.primary">
                  <td class="custom-white custom-end w-50">
                    {{ personDetails?.person?.contactDetail?.emailId?.primary }}
                  </td>
                  <td class="w-50 right-arabic">:البريد الالكتروني</td>
                </tr>
                <tr *ngIf="getNationalAddress(personDetails?.person?.contactDetail?.addresses)">
                  <td class="custom-white custom-end w-50">
                    {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.buildingNo }}
                    {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.streetName }}
                    <br />
                    {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.city?.arabic }}
                    {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.district }}
                    <br />
                    {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.postalCode }}
                    <br />
                    {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.unitNo }}
                    {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.additionalNo }}
                  </td>
                  <td class="w-50 right-arabic">:العنوان الوطني</td>
                </tr>
              </table>
            </div>
            <div *ngSwitchCase="'jobTitle'" class="table-bordered">
              <table class="table mb-0 custom-nowrap-mb">
                <tr class="card-heading custom-card-header">
                  <th colspan="2" class="custom-borderless">
                    <div class="custom-text-end">
                      <div class="right-direction custom-heading-font">
                        {{ cardDetails.heading?.arabic }}
                      </div>
                    </div>
                  </th>
                </tr>
                <tr *ngIf="contractAtDraft?.workDetails?.jobTitle">
                  <td class="custom-white custom-end w-50">{{ contractAtDraft?.workDetails?.jobTitle?.arabic }}</td>
                  <td class="w-50 right-arabic">:المسمى الوظيفي</td>
                </tr>
                <tr *ngIf="contractAtDraft?.workDetails?.location">
                  <td class="custom-white custom-end w-50 arabic-font">
                    {{ contractAtDraft?.workDetails?.location?.arabic }}
                  </td>
                  <td class="w-50 right-arabic">:مقر العمل</td>
                </tr>
                <tr>
                  <td class="custom-white custom-end w-50 arabic-font">
                    {{ !(activeEngagement?.engagementPeriod)[0]?.contributorAbroad ? 'داخل المملكة' : 'خارج المملكة' }}
                  </td>
                  <td class="w-50 right-arabic">:نطاق العمل</td>
                </tr>
                <tr>
                  <td class="custom-white custom-end w-50 arabic-font">{{ activeEngagement?.workType?.arabic }}</td>
                  <td class="w-50 right-arabic">:نوع العمل</td>
                </tr>
              </table>
            </div>
            <div *ngSwitchCase="'wageBenefits'" class="table-bordered">
              <table class="table mb-0 custom-nowrap-mb">
                <tr class="card-heading custom-card-header">
                  <th colspan="2" class="custom-borderless">
                    <div class="custom-text-end">
                      <div class="right-direction custom-heading-font">
                        {{ cardDetails.heading?.arabic }}
                      </div>
                    </div>
                  </th>
                </tr>
                <tr>
                  <td class="w-50 right-arabic" colspan="2">:يستحق الطرف الثاني الأجر والبدلات والمزايا التالية</td>
                </tr>
                <tr>
                  <td class="w-50 custom-white custom-end">
                    {{ (activeEngagement?.engagementPeriod)[0]?.wage?.basicWage || 0 | number: '1.2-2' }}
                  </td>
                  <td class="w-50 right-arabic">:الأجر الأساسي</td>
                </tr>
                <tr>
                  <td class="w-50 custom-white custom-end">
                    {{ (activeEngagement?.engagementPeriod)[0]?.wage?.housingBenefit || 0 | number: '1.2-2' }}
                  </td>
                  <td class="w-50 right-arabic">:السكن</td>
                </tr>
                <tr>
                  <td class="w-50 custom-white custom-end">
                    {{ (activeEngagement?.engagementPeriod)[0]?.wage?.commission || 0 | number: '1.2-2' }}
                  </td>
                  <td class="w-50 right-arabic">:العمولات</td>
                </tr>
                <tr *ngIf="transportationAllowance">
                  <td class="w-50 custom-white custom-end">
                    {{ transportationAllowance || 0 | number: '1.2-2' }}
                  </td>
                  <td class="w-50 right-arabic">:بدل النقل</td>
                </tr>
                <tr>
                  <td class="w-50 custom-white custom-end">
                    {{
                      (activeEngagement?.engagementPeriod)[0]?.wage?.otherAllowance - transportationAllowance || 0
                        | number: '1.2-2'
                    }}
                  </td>
                  <td class="w-50 right-arabic">:بدلات أخرى</td>
                </tr>
                <tr class="d-none">
                  <td class="w-50 custom-white custom-end">
                    {{ (activeEngagement?.engagementPeriod)[0]?.wage?.totalWage | number: '1.2-2' }}
                  </td>
                  <td class="w-50 right-arabic">:إجمالي البدل</td>
                </tr>
                <tr>
                  <td class="w-50 right-arabic custom-dir-right" colspan="2">
                    يدفع الطرف الأول للطرف الثاني اجرا قدرة
                    {{ (activeEngagement?.engagementPeriod)[0]?.wage?.totalWage | number: '1.2-2' }} فقط ريال سعودي
                    يستحق نهاية كل شهر.
                  </td>
                </tr>
              </table>
            </div>
            <div *ngSwitchCase="'bankAccount'" class="table-bordered">
              <table class="table mb-0 custom-nowrap-mb">
                <tr class="card-heading custom-card-header">
                  <th colspan="4" class="custom-borderless">
                    <div class="custom-text-end">
                      <div class="right-direction custom-heading-font">
                        {{ cardDetails.heading?.arabic }}
                      </div>
                    </div>
                  </th>
                </tr>
                <tr>
                  <td class="w-50 custom-white custom-end arabic-font" colspan="2">{{ bankInfo?.bankName?.arabic }}</td>
                  <td class="w-50 right-arabic">:اسم البنك</td>
                </tr>
                <tr>
                  <td class="w-50 custom-white custom-center" colspan="2">{{ bankInfo?.ibanAccountNo }}</td>
                  <td class="w-50 right-arabic">:رقم الآيبان</td>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
    <ng-template #twoCol>
      <div class="table-responsive">
        <div class="table-bordered">
          <table class="table mb-0 table-bordered">
            <tr class="card-heading custom-card-header">
              <th class="custom-borderless custom-nowrap-mb custom-width-mb">
                <div class="custom-text-end">
                  <div class="right-direction custom-heading-font">
                    {{ cardDetails.heading?.arabic }}
                  </div>
                </div>
              </th>
            </tr>
            <tr
              *ngFor="let row of cardDetails.grids; let i = index"
              [ngClass]="{
                'custom-white':
                  (cardDetails?.table === 'firstObligation' ||
                    cardDetails?.table === 'secondObligation' ||
                    cardDetails?.table === 'generalProvision' ||
                    cardDetails?.table === 'optionalTerms' ||
                    cardDetails?.table === 'additionalTerms') &&
                  i % 2 === 0 &&
                  cardDetails.grids.length > 1
              }"
            >
              <td dir="rtl" class="w-50 right-arabic">
                <div class="d-flex">
                  <div class="d-inline-block">
                    <span
                      *ngIf="
                        cardDetails?.table === 'firstObligation' ||
                        cardDetails?.table === 'secondObligation' ||
                        cardDetails?.table === 'generalProvision'
                      "
                    >
                      {{ i + 1 }}.{{ cardDetails?.cardIndex }}.
                    </span>
                    <span
                      *ngIf="
                        cardDetails?.table === 'optionalTerms' ||
                        (cardDetails?.table === 'additionalTerms' && row?.arabic)
                      "
                    >
                      {{ i + 1 }}.
                    </span>
                  </div>
                  <span class="mr-1"></span>
                  <span [ngClass]="cardDetails?.table === 'additionalTerms' ? 'custom-break' : ''">
                    {{ row?.arabic }}
                  </span>
                </div>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </ng-template>
  </div>
</ng-container>
