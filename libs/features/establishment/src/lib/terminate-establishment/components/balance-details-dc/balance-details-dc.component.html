<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->

<gosi-card-dc type="secondary">
  <div class="row">
    <div class="col-md-9 pb-4 header-row">
      <h4 class="balance-details">{{ 'ESTABLISHMENT.BALANCE-DETAILS' | translate }}</h4>
    </div>
    <div class="col-md-3 pb-4 text-right header-row">
      <a class="bill-details" (click)="trigerBillDashboard.emit()" target="_blank">
        {{ 'ESTABLISHMENT.VIEW-BILL' | translate }}
      </a>
    </div>
    <div class="col-md-12">
      <table class="table">
        <thead class="thead-light">
          <tr>
            <th class="balance-type px-4">{{ 'ESTABLISHMENT.BALANCE-TYPE' | translate }}</th>
            <th class="balance-type amount-heading text-right">
              {{ 'ESTABLISHMENT.AMOUNT' | translate }} ({{ 'ESTABLISHMENT.SAR' | translate }})
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngIf="balance?.billedAmount > 0">
            <td class="pt-2 px-4">
              {{ 'ESTABLISHMENT.UNPAID-BALANCE' | translate }}
            </td>
            <td class="text-right">
              {{ balance?.billedAmount | number: '1.2-2' }}
            </td>
          </tr>
          <tr *ngIf="balance?.creditBalance > 0 || (balance?.creditBalance === 0 && balance?.billedAmount === 0)">
            <td class="px-4">
              {{ 'ESTABLISHMENT.CURRENT-CREDIT-BALANCE' | translate }}
            <td class="text-right debit-status" *ngIf="balance?.outStandingAmount && isDebit === true">
              {{ balance?.outStandingAmount | number: '1.2-2' }}
            </td>
            <td class="text-right">
              {{ balance?.creditBalance | number: '1.2-2' }}
            </td>
          </tr>
          <tr>
            <td class="pt-2 px-4">
              {{ 'ESTABLISHMENT.UNBILLED-AMT-VIOLATION' | translate }}
            </td>
            <td class="text-right">
              {{ violationAmount | number: '1.2-2' }}
            </td>
          </tr>
          <tr>
            <td class="pt-2 px-4">
              {{ 'ESTABLISHMENT.UNBILLED-AMT-OH' | translate }}
            </td>
            <td class="text-right">
              {{ balance?.unBilledRejectedOHAmount | number: '1.2-2' }}
            </td>
          </tr>
          <tr>
            <td class="pt-2 px-4">
              {{ 'ESTABLISHMENT.UNBILLED-AMT-CONTRIBUTION' | translate }}
            </td>
            <td class="text-right">
              {{ balance?.unBilledContributions | number: '1.2-2' }}
            <td class="text-right debit-status" *ngIf="balance?.outStandingAmount && isDebit === true">
              {{ balance?.unBilledRejectedOHAmount | number: '1.2-2' }}
            </td>
            <td class="text-right credit-status" *ngIf="balance?.outStandingAmount >= 0 && isDebit === false">
              {{ balance?.unBilledRejectedOHAmount | number: '1.2-2' }}
            </td>
          </tr>
          <tr>
            <td class="pt-2 px-4">
              {{ 'ESTABLISHMENT.UNBILLED-AMT-ADJUSTMENT' | translate }}
            </td>
            <td class="text-right">
              {{ adjustmentAmount | number: '1.2-2' }}
            </td>
          </tr>
          <tr>
            <td class="pt-2 px-4">
              {{ 'ESTABLISHMENT.UNBILLED-AMT-LATE-FEE' | translate }}
            </td>
            <td class="text-right">
              {{ lateFeeAmount | number: '1.2-2' }}
            <td class="text-right debit-status" *ngIf="balance?.outStandingAmount && isDebit === true">
              {{ balance?.unBilledViolationAmount | number: '1.2-2' }}
            </td>
            <td class="text-right credit-status" *ngIf="balance?.outStandingAmount >= 0 && isDebit === false">
              {{ balance?.unBilledViolationAmount | number: '1.2-2' }}
            </td>
          </tr>
          <tr>
            <td class="balance px-4" *ngIf="balanceAmount < 0">
              {{ 'ESTABLISHMENT.TOTAL-CREDIT' | translate }}
            </td>
            <td class="balance-amt text-right credit-status" *ngIf="balanceAmount < 0">
              {{ displayBalanceAmount | number: '1.2-2' }}
            </td>
            <td class="balance px-4" *ngIf="balanceAmount >= 0">
              {{ 'ESTABLISHMENT.ESTIMATED-BALANCE' | translate }}
            </td>
            <td
              class="balance-amt text-right"
              [ngClass]="{ 'credit-status': balanceAmount == 0, 'debit-status': balanceAmount > 0 }"
              *ngIf="balanceAmount >= 0"
            >
              {{ displayBalanceAmount | number: '1.2-2' }}
            <td class="balance-amt text-right debit-status" *ngIf="balanceAmount && isDebit === true">
              {{ balanceAmount | number: '1.2-2' }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="col-md-12 pt-1 balance-info d-flex">
      <div class="info ml-0 mr-2">
        <fa-icon class="back-icon" [icon]="['fas', 'info-circle']"></fa-icon>
      </div>
      <span>{{ 'ESTABLISHMENT.BALANCE-INFO' | translate }}</span>
    </div>
  </div>
</gosi-card-dc>
