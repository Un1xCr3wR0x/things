<div class="container" >
    <div class="top-bar d-flex justify-content-between">
        <div class="dc-heading">
            {{ 'CONTRIBUTOR.CONTRACT-APP.ENGAGEMENT-DETAILS' | translate }}
        </div>
        <div class="due-status-section d-flex" *ngIf="!acceptOrRejectFlag">
            <div class="color-gray">
                <fa-icon icon="clock" size="md" class="icon-color mr-1"></fa-icon>
                {{ 'CONTRIBUTOR.CONTRACT-AUTH.ENGAGEMENT-AUTO-DUE' | translate | uppercase }}
            </div>
            <div class="d-flex due-dates-section">

                <div class="day-count p-1 ml-lg-3 mr-3">
                    <span *ngIf="showCount" style="font-size: 20px;">{{ daysCount  }}</span>
                    <span  class="ml-2">{{days | translate}}</span>
                </div>
                <div class="separator"></div>
                <div class="day-count p-2 ml-lg-3">
                    <span>{{'CONTRIBUTOR.CONTRACT-AUTH.ENGAGEMENT-AUTO-DUE' | translate}} : </span>
                    <span *ngIf="pendingEngagement.engagementExpiryDate">{{ pendingEngagement.engagementExpiryDate.gregorian | date: 'dd/MM/yyyy' }}</span>
                </div>

            </div>
        </div>

    </div>
    <div class=" mt-4">
        <gosi-card-dc type="secondary">
            <div class="custom-sub-heading">{{'CONTRIBUTOR.WAGE.CONTRIBUTOR-DETAILS' | translate}}</div>
            <div class="d-flex mt-3 flex-wrap">
                <div class="col-6 col-lg-4 pl-0">
                    <gosi-label-dc
                    class="custom-label "
                    [value]="pendingEngagement?.contributorDetails?.name?.english?.name"
                    [label]=" 'CONTRIBUTOR.CONTRIBUTOR-NAME' | translate">
                </gosi-label-dc>
                </div>
                <div class="col-6 col-lg-4 pl-0">
                    <ng-container >
                        <ng-container *ngFor="let item of pendingEngagement?.contributorDetails?.identity">
                          <div *ngIf="item?.newNin" >
                            <gosi-label-dc
                                id="nin"
                                [value]="item?.newNin"
                                class="custom-label"
                                [label]=" 'CONTRIBUTOR.NIN' | translate">
                            </gosi-label-dc>
                          </div>
                        </ng-container>

                      </ng-container>
                    <!-- <gosi-label-dc
                    class="custom-label"
                    [value]="pendingEngagement.contributorDetails.identity[0].newNin "
                    [label]=" 'CONTRIBUTOR.NIN' | translate">
                    </gosi-label-dc> -->
                </div>
                <div class="col-6 col-lg-4 pl-0">
                    <gosi-label-dc
                    class="custom-label"
                    [value]="pendingEngagement?.contributorDetails?.birthDate?.gregorian | date: 'dd/MM/yyyy' "
                    [label]=" 'CONTRIBUTOR.DATE-OF-BIRTH' | translate">
                </gosi-label-dc>
                </div>

            </div>
        </gosi-card-dc>

        <gosi-card-dc type="secondary">
            <div class="custom-sub-heading">{{'CONTRIBUTOR.WAGE.ENGAGEMENT-DETAILS' | translate}}</div>
            <div class="d-flex mt-3 flex-wrap">
                <div class="col-6 col-lg-4 pl-0">
                    <gosi-label-dc
                    class="custom-label"
                    [value]="pendingEngagement?.establishmentName?.english? pendingEngagement?.establishmentName?.english : pendingEngagement?.establishmentName?.arabic"
                    [label]=" 'CONTRIBUTOR.ESTABLISHMENT-NAME' | translate">
                </gosi-label-dc>
                </div>
                <div class="col-6 col-lg-4 pl-0">
                    <gosi-label-dc
                    class="custom-label"
                    [value]="pendingEngagement?.registrationNo"
                    [label]=" 'CONTRIBUTOR.REGISTRATION-NO' | translate">
                </gosi-label-dc>
                </div>
                <div class="col-6 col-lg-4 pl-0">
                    <gosi-label-dc
                    class="custom-label"
                    [value]="pendingEngagement?.joiningDate.gregorian | date: 'dd/MM/yyyy'"
                    [label]=" 'CONTRIBUTOR.WAGE.ENGAGEMENT-START-DATE' | translate ">
                </gosi-label-dc>
                </div>
                <div class=" col-6 col-lg-4 pl-0">

                  <gosi-label-dc
                    class="custom-label"
                    [value]="pendingEngagement?.engagementPeriod?.occupation | bilingualText"
                    [label]=" 'CONTRIBUTOR.OCCUPATION' | translate ">
                </gosi-label-dc>

                </div>

            </div>
            <div class="custom-sub-heading mt-2">{{'CONTRIBUTOR.WAGE.WAGE-DETAILS' | translate}}</div>
            <div class="mt-4 table-wrapper">

                <div class="table-common-content-wrapper">
                    <div class="d-flex table-head">

                            <span class="th-custom col">{{'CONTRIBUTOR.BASIC-WAGE' | translate}}</span>
                            <span class="th-custom col">{{'CONTRIBUTOR.HRA' | translate}}</span>
                            <span class="th-custom col">{{'CONTRIBUTOR.PREVIEW-DETAILS.COMMISSIONS' | translate}}</span>
                            <span class="th-custom col">{{'CONTRIBUTOR.OTHER-ALLOWANCE' | translate}}</span>
                            <span class="th-custom col">{{'CONTRIBUTOR.TOTAL-WAGE' | translate}}</span>
                    </div>
                    <div class="d-flex table-body">

                        <span class="td-custom col">{{ pendingEngagement?.engagementPeriod?.wage?.basicWage }}</span>
                        <span class="td-custom col">{{ pendingEngagement?.engagementPeriod?.wage?.housingBenefit }}</span>
                        <span class="td-custom col">{{ pendingEngagement?.engagementPeriod?.wage?.commission }}</span>
                        <span class="td-custom col">{{ pendingEngagement?.engagementPeriod?.wage?.otherAllowance}}</span>
                        <span class="td-custom col">{{ pendingEngagement?.engagementPeriod?.wage?.totalWage}}</span>
                    </div>

                </div>

            </div>
            <p class="mt-3 color-gray updation-msg">
                 {{'CONTRIBUTOR.ALL-VALUES-IN-SAR' | translate}}
            </p>
        </gosi-card-dc>
        <div *ngIf="!acceptOrRejectFlag">
            <gosi-input-checkbox-dc
                id="declarationMessage"
                name="declaration"
                [control]="declarationForm.get('checkBoxFlag')"
                [label]="'CONTRIBUTOR.E-DECLARATION-MESSAGE' | translate"
            >
            </gosi-input-checkbox-dc>
        </div>
    </div>

    <div>

        <div class="row form-action" *ngIf="!acceptOrRejectFlag">
            <div class="col-lg-12">
              <div class="btn-section float-right padding-left">
                <gosi-button-dc id="accept" type="primary" (submit)="showModal(acceptPreview)">
                  {{ 'CONTRIBUTOR.CONTRACT-APP.ACCEPT' | translate }}
                </gosi-button-dc>
              </div>
              <div class="btn-section float-right padding-left">
                <gosi-button-dc id="reject" type="danger" (submit)="RejectModal(rejectPreview)">
                  {{ 'CONTRIBUTOR.CONTRACT-APP.REJECT' | translate }}</gosi-button-dc
                >
              </div>
              <div class="btn-section float-left padding-left">
                <gosi-button-dc id="cancel" type="secondary" (submit)="navigateToHome()">
                  {{ 'CONTRIBUTOR.CANCEL' | translate }}</gosi-button-dc
                >
              </div>
            </div>
        </div>

        <ng-template #acceptPreview>
            <div class="custom-modal">
              <gosi-modal-dc>
                <div modalContent>
                  <div class="confirmation-popup">
                    <div class="do-you-wish">{{ 'CONTRIBUTOR.CONTRACT-APP.E-ACCEPT-CONTENT' | translate }}</div>
                  </div>
                </div>

                <div modalAction>
                  <div class="row">
                    <div class="col-md-12 form-action">
                      <div class="float-right btn-section">
                        <gosi-button-dc id="confirm" type="primary" [size]="'md'" (submit)="confirmAcceptPreview()">
                          {{ 'CONTRIBUTOR.CONFIRM' | translate }}</gosi-button-dc
                        >
                      </div>
                      <div class="float-left btn-section">
                        <gosi-button-dc id="cancel" type="secondary" [size]="'md'" (submit)="hideModal()">
                          {{ 'CONTRIBUTOR.CANCEL' | translate }}</gosi-button-dc
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </gosi-modal-dc>
            </div>
          </ng-template>

          <ng-template #rejectPreview>
            <div class="custom-modal">
              <gosi-modal-dc [modalHeader]="'CONTRIBUTOR.CONTRACT-APP.REJECT-HEADER' | translate">
                <div modalContent>
                  <div class="confirmation-popup">
                    <div class="row">
                      <div class="col-lg-12">
                        <gosi-input-select-dc
                          id="rejectReason"
                          label="CONTRIBUTOR.CONTRACT-APP.REJECT-REASON"
                          [control]="rejectDetailsForm.get('reasonForReject')"
                          [list]="rejectReasonList$ | async"
                          [placeholder]="'CONTRIBUTOR.CONTRACT-APP.SELECT-REASON' | translate"
                          (select)="otherValueSelect()"
                        >
                        </gosi-input-select-dc>
                      </div>
                      <div class="col-lg-12" *ngIf="otherReasonFlag">
                        <gosi-input-text-area-dc
                          id="comment"
                          label="CONTRIBUTOR.COMMENTS"
                          [control]="rejectDetailsForm.get('rejectedMessage')"
                          [placeholder]="'CONTRIBUTOR.COMMENTS' | translate"
                          [ignoreLabel]="true"
                        >
                        </gosi-input-text-area-dc>
                      </div>
                      <div class="col-lg-12 mb-5 d-none d-md-block"></div>
                    </div>
                  </div>
                </div>

                <div modalAction>
                  <div class="row">
                    <div class="col-md-12 form-action">
                      <div class="float-right btn-section">
                        <gosi-button-dc id="confirm" type="primary" [size]="'md'" (submit)="confirmRejectPreview()">
                          {{ 'CONTRIBUTOR.CONFIRM' | translate }}</gosi-button-dc
                        >
                      </div>
                      <div class="float-left btn-section">
                        <gosi-button-dc id="cancel" type="secondary" [size]="'md'" (submit)="hideModal()">
                          {{ 'CONTRIBUTOR.CANCEL' | translate }}</gosi-button-dc
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </gosi-modal-dc>
            </div>
          </ng-template>

    </div>
</div>
