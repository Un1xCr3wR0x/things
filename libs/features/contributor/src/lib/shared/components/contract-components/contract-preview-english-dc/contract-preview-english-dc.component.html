<ng-container *ngIf="section">
  <div class="card custom-card" dir="ltr">
    <div class="card-body">
      <div class="table-responsive custom-overflow">
        <div class="table-bordered">
          <table class="table mb-0 custom-nowrap-mb">
            <tr class="card-heading custom-card-header">
              <th class="custom-borderless custom-width-mb">{{ section?.english }}</th>
            </tr>
            <tr>
              <td class="w-50">
                <div class="row">
                  <div class="col-lg-12 mb-3">
                    <span class="font-weight-bold"
                      >This Agreement was made in
                      {{ contractAtDraft?.startDate?.gregorian | date: 'dd/MM/yyyy' }} between:</span
                    >
                  </div>
                  <div class="col-lg-12 mb-3" [ngClass]="{ 'arabic-font': !establishment?.name?.english }">
                    {{ establishment?.name?.english || establishment?.name?.arabic }}
                  </div>
                  <div class="col-lg-12 mb-3">
                    Establishment Number in General Organization for Social Insurance:
                    {{ establishment?.registrationNo }}
                  </div>
                  <div class="col-lg-12 mb-3">
                    Establishment Number in Ministry of Labor: {{ establishment.molEstablishmentIds?.molOfficeId }} -
                    {{ establishment.molEstablishmentIds?.molunId }}
                  </div>
                  <div class="col-lg-12 mb-3">
                    Authorized Signatory: {{ contractAtDraft?.authorisedSignatory?.name?.english }}
                  </div>
                  <div class="col-lg-12 mb-3">
                    Capacity of: {{ contractAtDraft?.authorisedSignatory?.role?.english }}
                  </div>
                  <div class="col-lg-12 mb-5">Referred to hereinafter as (First Party).</div>
                  <div class="col-lg-12 mb-3 font-weight-bold">
                    <span>And;</span>
                    <span class="mr-1"></span>
                    <span [ngClass]="{ 'font-kufi': !personDetails?.person?.name?.english?.name }">
                      <span *ngIf="personDetails?.person?.name?.english?.name; else arabicPerson">{{
                        personDetails?.person?.name?.english?.name
                      }}</span>
                      <ng-template #arabicPerson>
                        {{ personDetails?.person?.name?.arabic?.firstName }}
                        {{ personDetails?.person?.name?.arabic?.secondName }}
                        {{ personDetails?.person?.name?.arabic?.thirdName }}
                        {{ personDetails?.person?.name?.arabic?.familyName }}
                      </ng-template>
                    </span>
                  </div>
                  <div class="col-lg-12 mb-3">Nationality: {{ personDetails?.person?.nationality?.english }}</div>
                  <div class="col-lg-12 mb-3">
                    {{
                      this.getPersonIdentity(personDetails)?.idType === 'NIN'
                        ? 'National ID'
                        : this.getPersonIdentity(personDetails)?.idType === 'IQAMA'
                        ? 'IQAMA'
                        : this.getPersonIdentity(personDetails)?.idType === 'PASSPORT'
                        ? 'Passport No'
                        : this.getPersonIdentity(personDetails)?.idType
                    }}: {{ this.getPersonIdentity(personDetails)?.id }}
                  </div>
                  <div class="col-lg-12 mb-3">Referred to hereinafter as (Second Party).</div>
                </div>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>

  <div class="card p-0" dir="ltr">
    <div class="card-body">
      <div class="table-responsive">
        <div class="table-bordered">
          <table class="table mb-0">
            <tr>
              <td class="w-50 custom-padding custom-width-mb">
                And together they are referred to as (the two parties or both parties).
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>
  <div class="card p-0" dir="ltr">
    <div class="card-body m-0 p-0">
      <div class="table-responsive">
        <div class="table-bordered">
          <table class="table mb-0">
            <tr>
              <td class="w-50 custom-padding custom-width-mb">
                The above Parties details shall be deemed as an integral part of this Contract, and together with its
                Annexes, they form an integrated unit and are considered part of the contract to be interpreted and
                complemented by each other.
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
  </div>
</ng-container>
<ng-container *ngIf="!section">
  <div class="card custom-card" dir="ltr">
    <div class="card-body">
      <ng-container *ngIf="cardDetails.colGrid === 4; else twoCol">
        <div class="table-responsive">
          <div [ngSwitch]="cardDetails.table">
            <div *ngSwitchCase="'firstParty'" class="table-bordered">
              <table class="table mb-0 custom-nowrap-mb">
                <tr class="card-heading custom-card-header">
                  <th colspan="2" class="custom-borderless">{{ cardDetails.heading?.english }}</th>
                </tr>
                <!-- <ng-container *ngIf="appToken === 'INDIVIDUAL_APP'"> -->
                <ng-container *ngIf="establishment?.establishmentContactDetails">
                  <tr *ngIf="getNationalAddress(establishment?.establishmentContactDetails?.addresses)">
                    <td class="w-50">National Address:</td>
                    <td class="custom-white w-50">
                      {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.buildingNo }}
                      {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.streetName }} <br />
                      {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.city?.english }}
                      {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.district }} <br />
                      {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.postalCode }} <br />
                      {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.unitNo }}
                      {{ getNationalAddress(establishment?.establishmentContactDetails?.addresses)?.additionalNo }}
                    </td>
                  </tr>
                  <tr *ngIf="establishment?.establishmentContactDetails?.telephoneNo?.primary">
                    <td class="w-50">Phone Number:</td>
                    <td class="custom-white w-50">
                      {{ establishment?.establishmentContactDetails?.telephoneNo?.primary }}
                    </td>
                  </tr>
                  <tr *ngIf="establishment?.establishmentContactDetails?.emailId?.primary">
                    <td class="w-50">Email:</td>
                    <td class="custom-white w-50">
                      {{ establishment?.establishmentContactDetails?.emailId?.primary }}
                    </td>
                  </tr>
                  <tr *ngIf="establishment?.establishmentContactDetails?.mobileNo?.primary">
                    <td class="w-50">Mobile Number:</td>
                    <td class="custom-white w-50">
                      {{ establishment?.establishmentContactDetails?.mobileNo?.primary }}
                    </td>
                  </tr>
                </ng-container>
                <ng-container *ngIf="establishment?.contactDetails">
                  <tr *ngIf="getNationalAddress(establishment?.contactDetails?.addresses)">
                    <td class="w-50">National Address:</td>
                    <td class="custom-white w-50">
                      {{ getNationalAddress(establishment?.contactDetails?.addresses)?.buildingNo }}
                      {{ getNationalAddress(establishment?.contactDetails?.addresses)?.streetName }} <br />
                      {{ getNationalAddress(establishment?.contactDetails?.addresses)?.city?.english }}
                      {{ getNationalAddress(establishment?.contactDetails?.addresses)?.district }} <br />
                      {{ getNationalAddress(establishment?.contactDetails?.addresses)?.postalCode }} <br />
                      {{ getNationalAddress(establishment?.contactDetails?.addresses)?.unitNo }}
                      {{ getNationalAddress(establishment?.contactDetails?.addresses)?.additionalNo }}
                    </td>
                  </tr>
                  <tr *ngIf="establishment?.contactDetails?.telephoneNo?.primary">
                    <td class="w-50">Phone Number:</td>
                    <td class="custom-white w-50">
                      {{ establishment?.contactDetails?.telephoneNo?.primary }}
                    </td>
                  </tr>
                  <tr *ngIf="establishment?.contactDetails?.emailId?.primary">
                    <td class="w-50">Email:</td>
                    <td class="custom-white w-50">{{ establishment?.contactDetails?.emailId?.primary }}</td>
                  </tr>
                  <tr *ngIf="establishment?.contactDetails?.mobileNo?.primary">
                    <td class="w-50">Mobile Number:</td>
                    <td class="custom-white w-50">{{ establishment?.contactDetails?.mobileNo?.primary }}</td>
                  </tr>
                </ng-container>
              </table>
            </div>
            <div *ngSwitchCase="'secondParty'" class="table-bordered">
              <table class="table mb-0 custom-nowrap-mb">
                <tr class="card-heading custom-card-header">
                  <th colspan="2" class="custom-borderless">{{ cardDetails.heading?.english }}</th>
                </tr>

                <tr *ngIf="personDetails?.person?.sex">
                  <td class="w-50">Gender:</td>
                  <td class="custom-white w-50">{{ personDetails?.person?.sex?.english }}</td>
                </tr>
                <tr *ngIf="personDetails?.person?.birthDate">
                  <td class="w-50">Birth Date:</td>
                  <td class="custom-white w-50">
                    {{ personDetails?.person?.birthDate?.gregorian | date: 'dd/MM/yyyy' }}
                  </td>
                </tr>
                <tr *ngIf="personDetails?.person && contractAtDraft?.religion">
                  <td class="w-50">Religion:</td>
                  <td class="custom-white w-50">{{ contractAtDraft?.religion?.english }}</td>
                </tr>
                <tr *ngIf="personDetails?.person?.contactDetail?.mobileNo?.primary">
                  <td class="w-50">Mobile Number:</td>
                  <td class="custom-white w-50">
                    {{ personDetails?.person?.contactDetail?.mobileNo?.primary }}
                  </td>
                </tr>
                <tr *ngIf="personDetails?.person?.contactDetail?.emailId?.primary">
                  <td class="w-50">Email:</td>
                  <td class="custom-white w-50">{{ personDetails?.person?.contactDetail?.emailId?.primary }}</td>
                </tr>
                <tr *ngIf="getNationalAddress(personDetails?.person?.contactDetail?.addresses)">
                  <td class="w-50">National Address:</td>
                  <td class="custom-white w-50">
                    {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.buildingNo }}
                    {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.streetName }}
                    <br />
                    {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.city?.english }}
                    {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.district }}
                    <br />
                    {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.postalCode }}
                    <br />
                    {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.unitNo }}
                    {{ getNationalAddress(personDetails?.person?.contactDetail?.addresses)?.additionalNo }}
                  </td>
                </tr>
              </table>
            </div>
            <div *ngSwitchCase="'jobTitle'" class="table-bordered">
              <table class="table mb-0 custom-nowrap-mb">
                <tr class="card-heading custom-card-header">
                  <th colspan="2" class="custom-borderless">{{ cardDetails.heading?.english }}</th>
                </tr>
                <tr *ngIf="contractAtDraft?.workDetails?.jobTitle">
                  <td class="w-50">Job Title:</td>
                  <td class="custom-white w-50">{{ contractAtDraft?.workDetails?.jobTitle?.english }}</td>
                </tr>
                <tr *ngIf="contractAtDraft?.workDetails?.location">
                  <td class="w-50">Work Location:</td>
                  <td class="custom-white w-50">{{ contractAtDraft?.workDetails?.location?.english }}</td>
                </tr>
                <tr>
                  <td class="w-50">Work Domain:</td>
                  <td class="custom-white w-50">
                    {{
                      (!(activeEngagement?.engagementPeriod)[0]?.contributorAbroad
                        ? contributorAbroadList[0]
                        : contributorAbroadList[1]
                      )?.english
                    }}
                  </td>
                </tr>
                <tr>
                  <td class="w-50">Work Type:</td>
                  <td class="custom-white w-50">{{ activeEngagement?.workType?.english }}</td>
                </tr>
              </table>
            </div>
            <div *ngSwitchCase="'wageBenefits'" class="table-bordered">
              <table class="table mb-0 custom-nowrap-mb">
                <tr class="card-heading custom-card-header">
                  <th colspan="2" class="custom-borderless">{{ cardDetails.heading?.english }}</th>
                </tr>
                <tr>
                  <td class="w-50" colspan="2">The second party shall be given the following wage and benefits:</td>
                </tr>
                <tr>
                  <td class="w-50">Basic Wage:</td>
                  <td class="w-50 custom-white">
                    {{ (activeEngagement?.engagementPeriod)[0]?.wage?.basicWage || 0 | number: '1.2-2' }}
                  </td>
                </tr>
                <tr>
                  <td class="w-50">Housing:</td>
                  <td class="w-50 custom-white">
                    {{ (activeEngagement?.engagementPeriod)[0]?.wage?.housingBenefit || 0 | number: '1.2-2' }}
                  </td>
                </tr>
                <tr>
                  <td class="w-50">Commissions:</td>
                  <td class="w-50 custom-white">
                    {{ (activeEngagement?.engagementPeriod)[0]?.wage?.commission || 0 | number: '1.2-2' }}
                  </td>
                </tr>
                <tr *ngIf="transportationAllowance">
                  <td class="w-50">Transportation Allowance:</td>
                  <td class="w-50 custom-white">
                    {{ transportationAllowance || 0 | number: '1.2-2' }}
                  </td>
                </tr>
                <tr>
                  <td class="w-50">Other Allowance:</td>
                  <td class="w-50 custom-white">
                    {{
                      (activeEngagement?.engagementPeriod)[0]?.wage?.otherAllowance - transportationAllowance || 0
                        | number: '1.2-2'
                    }}
                  </td>
                </tr>
                <tr class="d-none">
                  <td class="w-50">Total Allowances:</td>
                  <td class="w-50 custom-white">
                    {{ (activeEngagement?.engagementPeriod)[0]?.wage?.totalWage | number: '1.2-2' }}
                  </td>
                </tr>
                <tr>
                  <td class="w-50" colspan="2">
                    The first party pays the second party each month a total amount of
                    {{ (activeEngagement?.engagementPeriod)[0]?.wage?.totalWage | number: '1.2-2' }} Saudi riyals.
                  </td>
                </tr>
              </table>
            </div>
            <div *ngSwitchCase="'bankAccount'" class="table-bordered">
              <table class="table mb-0 custom-nowrap-mb">
                <tr class="card-heading custom-card-header">
                  <th colspan="2" class="custom-borderless">{{ cardDetails.heading?.english }}</th>
                </tr>
                <tr>
                  <td class="w-50">Bank Name:</td>
                  <td class="w-50 custom-white">{{ bankInfo?.bankName?.english }}</td>
                </tr>
                <tr>
                  <td class="w-50">IBAN:</td>
                  <td class="w-50 custom-white custom-center" colspan="2">{{ bankInfo?.ibanAccountNo }}</td>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
    <ng-template #twoCol>
      <div class="table-responsive">
        <div class="table-bordered">
          <table class="table mb-0 table-bordered">
            <tr class="card-heading custom-card-header">
              <th class="custom-borderless custom-nowrap-mb custom-width-mb">{{ cardDetails.heading?.english }}</th>
            </tr>
            <tr
              *ngFor="let row of cardDetails.grids; let i = index"
              [ngClass]="{
                'custom-white':
                  (cardDetails?.table === 'firstObligation' ||
                    cardDetails?.table === 'secondObligation' ||
                    cardDetails?.table === 'generalProvision' ||
                    cardDetails?.table === 'optionalTerms' ||
                    cardDetails?.table === 'additionalTerms') &&
                  i % 2 === 0 &&
                  cardDetails.grids.length > 1
              }"
            >
              <td class="w-50">
                <div class="d-flex">
                  <div class="d-inline-block">
                    <span
                      *ngIf="
                        cardDetails?.table === 'firstObligation' ||
                        cardDetails?.table === 'secondObligation' ||
                        cardDetails?.table === 'generalProvision'
                      "
                    >
                      {{ cardDetails?.cardIndex }}.{{ i + 1 }}.
                    </span>
                    <span *ngIf="cardDetails?.table === 'optionalTerms' || cardDetails?.table === 'additionalTerms'">
                      {{ i + 1 }}.
                    </span>
                  </div>
                  <span class="mr-1"></span>
                  <span [ngClass]="cardDetails?.table === 'additionalTerms' ? 'custom-break' : ''">{{
                    row?.english
                  }}</span>
                </div>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </ng-template>
  </div>
</ng-container>
