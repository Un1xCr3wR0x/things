<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->

<gosi-modal-dc
  [modalHeader]="
    (benefitRequestCancelled ? 'BENEFITS.BENEFIT-REJECTED' : 'BENEFITS.ELIGIBILITY-CRITERIA')
      | translate: { benefitType: benefitType | bilingualText }
  "
  [needCloseButton]="true"
  (closeModal)="hideModal()"
>
  <div class="row" modalContent>
    <div class="col-md-12" *ngIf="benefitRequestCancelled">
      <div class="container">
        <p>
          {{ 'BENEFITS.BENEFIT-REJECTED-REASON' | translate }}
        </p>
      </div>
    </div>
    <div class="col-md-12" *ngIf="failedEligibilities?.length > 0; else noItems">
      <!--      <div class="total" *ngIf="!isSaned">-->
      <!--        <span class="eligibility-description">{{-->
      <!--          'BENEFITS.VIEW-ELIGIBILITY-DESC'-->
      <!--            | translate: {failedCount: failedCount, totalCount: totalCount, benefitType: benefitType | bilingualText}-->
      <!--          }}</span>-->
      <!--      </div>-->
      <div class="total">
        <span class="eligibility-description">{{
          (isSaned ? 'BENEFITS.VIEW-ELIGIBILITY-SUB-HEADING' : 'BENEFITS.VIEW-ELIGIBILITY-DESC')
            | translate
              : {
                  failedCount: failedCount,
                  totalCount: totalCount,
                  benefitType: benefitType | bilingualText
                }
        }}</span>
      </div>
      <div class="container">
        <div class="row" *ngFor="let eligibility of failedEligibilities; let i = index">
          <div class="message">{{ i + 1 }} . {{ eligibility.message | bilingualText }}</div>

          <div class="icon">
            <fa-icon class="icon-wrapper-times-circle" icon="times-circle"></fa-icon>
          </div>
          <div class="py-1 pl-3 col-md-12" *ngFor="let msg of eligibility?.subMessages; let k = index">
            {{ msg | bilingualText }}
          </div>
        </div>
        <ng-container *ngIf="!benefitRequestCancelled">
          <div class="row" *ngFor="let eligibility of passedEligibilities; let i = index">
            <div class="message">{{ failedCount + 1 + i }} . {{ eligibility.message | bilingualText }}</div>
            <div class="icon">
              <fa-icon class="icon-wrapper-check-circle" icon="check-circle"></fa-icon>
            </div>
          </div>
        </ng-container>
      </div>
    </div>
    <ng-template #noItems>
      <div class="col-md-12">
        <div class="container">
          <p>
            {{ 'BENEFITS.NO-ITEM-FOUND' | translate }}
          </p>
        </div>
      </div>
    </ng-template>
  </div>
  <gosi-button-dc modalAction id="closeBtn" type="secondary" (submit)="hideModal()">
    {{ 'BENEFITS.CLOSE' | translate }}</gosi-button-dc
  >
</gosi-modal-dc>
