<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->


<accordion>
  <accordion-group class="accordion-group-class" heading="{{ 'BILLING.CANCELLED-PAYMENTS' | translate }}">
    <span class="arrow-ups arrow-color" accordion-heading>
        <span>({{ 'BILLING.TOTAL' | translate }}: {{ total * exchangeRate | number: '1.2-2' }} {{ currencyType | bilingualText }} )</span>
          <fa-icon class="icon-margin" icon="angle-up" size="lg"></fa-icon>
        </span>
    <span class="arrow-downs arrow-color" accordion-heading>
        <span>({{ 'BILLING.TOTAL' | translate }}: {{ total * exchangeRate | number: '1.2-2' }} {{ currencyType | bilingualText }} )</span>
          <fa-icon class="icon-margin" icon="angle-down" size="lg"></fa-icon>
    </span>
    <div class="col-lg-12">
        <div class="table-scroll table-responsive">
          <table class="table table-borderless">
            <thead class="thead-light">
              <tr>
                <th colspan="1" class="text-center">{{ 'BILLING.RECEIPT-CANCELLATION-DATE' | translate }}</th>
                <th colspan="5" class="text-center">{{ 'BILLING.CANCELLED-RECEIPT-DETAILS' | translate }}</th>
              </tr>
            </thead>
            <tbody>
              <ng-container *ngFor="let receipt of cancledReceiptDetails.receiptDetailDto">
                <tr>
                  <td [attr.rowspan]="receipt.receiptBreakupDto.length + 4" class="text-center">{{ receipt.transactionDate.gregorian | date: 'dd/MM/yyyy' }}</td>
                </tr>
                <tr>
                  <td class="heading">{{ 'BILLING.PAYMENT-REFERENCE-NUMBER' | translate }}</td>
                  <td class="heading">{{ 'BILLING.RECEIPT-NUMBER' | translate }}</td>
                  <td class="heading">{{ 'BILLING.RECEIPT-DATE' | translate }}</td>
                  <td class="heading">{{ 'BILLING.RECEIPT-MODE' | translate }}</td>
                  <td class="heading">{{ 'BILLING.AMOUNT-SAR' | translate  }}</td>
                </tr>
                <tr>
                  <td>{{ receipt.referenceNo }}</td>
                  <td>{{ receipt.parentReceiptNo }}</td>
                  <td>{{ receipt.receiptDate.gregorian | date: 'dd/MM/yyyy' }}</td>
                  <td>{{ receipt.receiptMode | bilingualText }}</td>
                  <td>{{ receipt.amountReceived | number: '1.2-2'}}</td>
                </tr>
                <tr>
                  <td colspan="5" class="heading text-center">{{ 'BILLING.BREAKUP-OF-RECEIPT-AMOUNT-RECOVERY' | translate }}</td>
                </tr>
                <ng-container *ngFor="let receiptDto of receipt.receiptBreakupDto">
                  <!-- General recovery and other products -->
                  <tr *ngIf="receiptDto.type.english === 'UI Cancelled Payment'">
                    <td colspan="2" class="heading">{{ 'BILLING.UI-SHORT' | translate }}</td>
                    <td colspan="3">{{ receiptDto.amount | number: '1.2-2' }}</td>
                  </tr>
                  <tr *ngIf="receiptDto.type.english === 'Ui Penalty Cancelled Payment'">
                    <td colspan="2" class="heading">{{ 'BILLING.UI-PENALTY' | translate }}</td>
                    <td colspan="3">{{ receiptDto.amount | number: '1.2-2' }}</td>
                  </tr>
                  <tr *ngIf="receiptDto.type.english === 'Annuity Cancelled Payment'">
                    <td colspan="2" class="heading">{{ 'BILLING.ANNUITY' | translate }}</td>
                    <td colspan="3">{{ receiptDto.amount | number: '1.2-2' }}</td>
                  </tr>
                  <tr *ngIf="receiptDto.type.english === 'Annuity Penalty Cancelled Payment'">
                    <td colspan="2" class="heading">{{ 'BILLING.ANNUITY-PENALTY' | translate }}</td>
                    <td colspan="3">{{ receiptDto.amount | number: '1.2-2' }}</td>
                  </tr>
                  <tr *ngIf="receiptDto.type.english === 'OH Cancelled Payment'">
                    <td colspan="2" class="heading">{{ 'BILLING.OH' | translate }}</td>
                    <td colspan="3">{{ receiptDto.amount | number: '1.2-2' }}</td>
                  </tr>
                  <tr *ngIf="receiptDto.type.english === 'OH Penalty Cancelled Payment'">
                    <td colspan="2" class="heading">{{ 'BILLING.OH-PENALTY' | translate }}</td>
                    <td colspan="3">{{ receiptDto.amount | number: '1.2-2' }}</td>
                  </tr>
                  <tr *ngIf="receiptDto.type.english === 'Rejected OH Cancelled Payment'">
                    <td colspan="2" class="heading">{{ 'BILLING.REJECTED-OH' | translate }}</td>
                    <td colspan="3">{{ receiptDto.amount  | number: '1.2-2' }}</td>
                  </tr>
                  <tr *ngIf="receiptDto.type.english === 'Violation Cancelled Payment'">
                    <td colspan="2" class="heading">{{ 'BILLING.VIOLATION' | translate }}</td>
                    <td colspan="3">{{ receiptDto.amount  | number: '1.2-2' }}</td>
                  </tr>
                  <tr *ngIf="receiptDto.type.english === 'Cancelled Payment General Recovery Amount'">
                    <td colspan="2" class="heading">{{ 'BILLING.CANCELLED-PAYMENT-GENERAL-RECOVERY-AMOUNT' | translate }}</td>
                    <td colspan="3">{{ receiptDto.amount  | number: '1.2-2' }}</td>
                  </tr>
                  <tr *ngIf="receiptDto.type.english === 'PPA Annuity Cancelled Payment'">
                    <td colspan="2" class="heading">{{ 'BILLING.PPA-ANNUITY' | translate }}</td>
                    <td colspan="3">{{ receiptDto.amount  | number: '1.2-2' }}</td>
                  </tr>
                  <tr *ngIf="receiptDto.type.english === 'PPA Annuity Penalty Cancelled Payment'">
                    <td colspan="2" class="heading">{{ 'BILLING.PPA-PENALTY' | translate }}</td>
                    <td colspan="3">{{ receiptDto.amount  | number: '1.2-2' }}</td>
                  </tr>
                  <tr *ngIf="receiptDto.type.english === 'PPA Annuity Cancelled Payment Penalty'">
                    <td colspan="2" class="heading">{{ 'BILLING.PPA-CANCELLED-PENALTY' | translate }}</td>
                    <td colspan="3">{{ receiptDto.amount  | number: '1.2-2' }}</td>
                  </tr>
                  <tr *ngIf="receiptDto.type.english === 'Pension Reform Annuity Cancelled Payment'">
                    <td colspan="2" class="heading">{{ 'BILLING.PPA-PENSION' | translate }}</td>
                    <td colspan="3">{{ receiptDto.amount  | number: '1.2-2' }}</td>
                  </tr>
                  <tr *ngIf="receiptDto.type.english === 'Pension Reform Annuity Penalty Cancelled Payment'">
                    <td colspan="2" class="heading">{{ 'BILLING.PPA-PENSION-ANNUITY' | translate }}</td>
                    <td colspan="3">{{ receiptDto.amount  | number: '1.2-2' }}</td>
                  </tr>
                  <tr *ngIf="receiptDto.type.english === 'Pension Reform Annuity Cancelled Payment Penalty'">
                    <td colspan="2" class="heading">{{ 'BILLING.PPA-PENSION-CANCELLED-PENALTY' | translate }}</td>
                    <td colspan="3">{{ receiptDto.amount  | number: '1.2-2' }}</td> 
                  </tr>
                </ng-container>
              </ng-container>
            </tbody>
          </table>
        </div>
    </div>
  </accordion-group>
</accordion>
