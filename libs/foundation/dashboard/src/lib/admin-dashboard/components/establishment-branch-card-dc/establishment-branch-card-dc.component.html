<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->
<gosi-card-dc
  *ngIf="list"
  [mobilePaddingBottom]="false"
  [mobilePaddingTop]="false"
  [isHeading]="false"
  [noPadding]="true"
  [minHeight]="minHeight"
  [noGutters]="width < 767 ? true : false"
  [isBoxShadow]="true"
>
  <div class="header hover-state px-4 pt-3 pb-3" (click)="navigateToBranch()">
    <div class="heading">
      {{ list.name | bilingualText }}
      <span class="d-flex float-right">
        <div class="main-type" *ngIf="list?.establishmentType?.english === 'Main'">
          {{ 'DASHBOARD.MAIN' | translate | uppercase }}
        </div>
        <div *ngIf="list?.isAuthorized && isShowCES" class="edit-icon">
          <ds-dropdown-dc [list]="actionDropDown" (selectedItem)="navigateToComplaints($event)">
            <fa-icon class="dropdown-icon" icon="ellipsis-v"> </fa-icon>
          </ds-dropdown-dc>
        </div>
      </span>
    </div>
    <div class="d-flex justify-content-between pb-1 sub-value">
      {{ 'DASHBOARD.REGISTRATION-NUMBER' | translate }} : {{ list.registrationNo }}
    </div>
<!--here should have a mother div for all 2 divs> 1(text / buton/pic) 2(the estimator)-->
<!--here should have a div for the estimort-->
  </div>



  <div class="d-flex padding-row" [ngClass]="[list.isBillDashboardAuthorized ? 'pt-0' : 'pt-2']">
    <div class="col-8" *ngIf="!hide">
      <div
        class="d-flex"
        [ngClass]="[list.isBillDashboardAuthorized ? 'hover-state' : '']"
        (click)="navigateToBillingView()"
      >
        <fa-icon class="icon-wrapper dollar-icon" icon="file-invoice-dollar" size="lg"></fa-icon>
        <div class="label pl-2" [ngClass]="[list.isBalanceLoading ? 'flex-grow-1' : '']" dir="ltr">
          <div class="d-flex flex-column">
            <div class="title-label">{{ 'DASHBOARD.UNPAID-BALANCE' | translate | uppercase }}</div>
            <ng-container *ngIf="!list.isBalanceLoading; else loadingTemplate">
              <div class="value" *ngIf="list?.billDetails?.totalDebitBalance !== null; else noValueTemplate">
                {{ 'DASHBOARD.SAR' | translate }} {{ list?.billDetails?.totalDebitBalance | number: '1.2-2' }}
              </div>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
    <div
      class="col-4 d-flex align-items-center justify-content-end"
      *ngIf="list?.billDetails?.totalDebitBalance !== null && !hide"
    >
      <gosi-status-badge-dc
        [key]="list?.billDetails?.totalDebitBalance === 0 ? 'DASHBOARD.PAID' : 'DASHBOARD.UN-PAID'"
        [type]="list?.billDetails?.totalDebitBalance === 0 ? 'success' : 'danger'"
      ></gosi-status-badge-dc>
    </div>
  </div>
  <div class="d-flex padding-row pt-0" *ngIf="certificateRequired">
    <div class="col-12">
      <div
        class="d-flex"
        [ngClass]="[!list.gccCountry && list.isCertificateAuthorized ? 'hover-state' : '']"
        (click)="navigateToCertificateView()"
      >
        <fa-icon class="icon-wrapper award-icon" icon="award" size="lg"></fa-icon>
        <div class="label pl-2" [ngClass]="[list.isCertificateLoading ? 'flex-grow-1' : '']">
          <div class="d-flex flex-column">
            <div class="title-label">{{ 'DASHBOARD.GOSI-CERTIFICATE' | translate | uppercase }}</div>
            <ng-container *ngIf="!list.gccCountry; else notApplicableTemplate">
              <ng-container *ngIf="!list.isCertificateLoading; else loadingTemplate">
                <div class="value" *ngIf="list?.isCertificateEligible !== null; else noValueTemplate">
                  {{
                    list?.isCertificateEligible
                      ? ('DASHBOARD.ELIGIBLE' | translate)
                      : ('DASHBOARD.NOT-ELIGIBLE' | translate)
                  }}
                  <fa-icon
                    *ngIf="!list?.isCertificateEligible"
                    class="icon-wrapper ban-icon"
                    icon="ban"
                    size="sm"
                  ></fa-icon>
                  <fa-icon
                    *ngIf="list?.isCertificateEligible"
                    [icon]="['far', 'check-circle']"
                    size="sm"
                    class="icon-wrapper check-circle"
                  ></fa-icon>
                </div>
              </ng-container>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="d-flex border-class">
    <div class="col-6 py-4 d-flex align-items-center justify-content-center border-right text-center">
      <ng-container *ngIf="list?.nationalityCode; else noValueTemplate">
        <fa-icon
          [icon]="['fas', 'map-marker-alt']"
          size="lg"
          class="location-icon pr-2 d-flex align-items-center"
        ></fa-icon>
        <span>{{ list.nationalityCode | bilingualText }}</span>
      </ng-container>
    </div>
    <div class="col-6 py-4 d-flex align-items-center justify-content-center text-center">
      <ng-container *ngIf="list?.status; else noValueTemplate">
        <fa-icon
          *ngIf="!isCloseIcon"
          icon="check-circle"
          size="lg"
          class="pr-2 d-flex align-items-center check-icon"
        ></fa-icon>
        <fa-icon
          *ngIf="isCloseIcon"
          icon="times-circle"
          size="lg"
          class="pr-2 d-flex align-items-center check-icon"
        ></fa-icon>
        <span>{{ list.status | bilingualText }}</span>
      </ng-container>
    </div>
  </div>
  <div class="d-flex justify-content-center border-class">
    <div class="col-6 pt-3 d-flex justify-content-center text-center">
      <a class="d-flex drop-item" (click)="addRemoveEstablishmentFromFavorite()">
        <ng-container *ngIf="!list?.starred">
          <fa-icon
            [icon]="['far', 'star']"
            size="lg"
            class="pr-2 d-flex check-icon"
          ></fa-icon>
          <span>{{'DASHBOARD.ADD_EST_TO_FAV'|translate}}</span>
        </ng-container>
        <ng-container *ngIf="list?.starred">
          <fa-icon
            [icon]="['fas', 'star']"
            size="lg"
            class="pr-2 d-flex favorite-filled-icon"
          ></fa-icon>
          <span>{{'DASHBOARD.ADD_EST_TO_FAV'|translate}}</span>
        </ng-container>
      </a>
  </div>
</div>
</gosi-card-dc>
<ng-template #loadingTemplate>
  <div class="py-1">
    <gosi-skeleton-text-dc></gosi-skeleton-text-dc>
  </div>
</ng-template>
<ng-template #noValueTemplate>
  <span class="null-value">
    {{ 'DASHBOARD.NOT-AVAILABLE' | translate }}
  </span>
</ng-template>
<ng-template #notApplicableTemplate>
  <span class="null-value">
    {{ 'DASHBOARD.NOT-APPLICABLE-LABEL' | translate }}
  </span>
</ng-template>

<!--<ng-template #zeroCompliance >-->
<!--  <div class="health-insurance-est-card">-->
<!--    <svg width="13" height="15" viewBox="0 0 13 15" fill="none" xmlns="http://www.w3.org/2000/svg">-->
<!--      <path d="M9.5 0.25L13 3.75H9.5V0.25ZM8.625 3.75C8.625 4.24219 9.00781 4.625 9.5 4.625H13V12.9375C13 13.6758 12.3984 14.25 11.6875 14.25H3.8125C3.07422 14.25 2.5 13.6758 2.5 12.9375V9H4.41406L5.15234 10.5312C5.23438 10.668 5.37109 10.75 5.5625 10.75C5.72656 10.75 5.86328 10.668 5.94531 10.5312L7.3125 7.79688L7.77734 8.78125C7.85938 8.91797 7.99609 9 8.1875 9H10.375C10.5938 9 10.8125 8.80859 10.8125 8.5625C10.8125 8.34375 10.5938 8.125 10.375 8.125H8.43359L7.69531 6.62109C7.53125 6.34766 7.06641 6.34766 6.90234 6.62109L5.5625 9.35547L5.07031 8.37109C4.98828 8.23438 4.85156 8.125 4.6875 8.125H1.1875C0.941406 8.125 0.75 7.93359 0.75 7.6875V6.8125C0.75 6.59375 0.941406 6.375 1.1875 6.375H2.5V1.5625C2.5 0.851562 3.07422 0.25 3.8125 0.25H8.625V3.75Z" fill="#25815B"/>-->
<!--    </svg>-->
<!--    <button class="add-new-cont-button" (click)="navigateToHealthInsurance()" > {{ 'ESTABLISHMENT.CREATE-NEW-POLICY' | translate }}</button>-->
<!--  </div>-->
<!--</ng-template>-->
<ng-template #fullCompliance >
  <div class="health-insurance-est-card">
    <svg width="19" height="15" viewBox="0 0 19 15" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M6.99219 8.5625C10.6172 8.5625 12.75 10.6953 12.75 13.3203C12.75 13.8398 12.3125 14.25 11.793 14.25H1.42969C0.910156 14.25 0.5 13.8398 0.5 13.3203C0.5 10.6953 2.60547 8.5625 5.23047 8.5625H7.99219ZM6.625 7.25C4.68359 7.25 3.125 5.69141 3.125 3.75C3.125 1.83594 4.68359 0.25 6.625 0.25C8.53906 0.25 10.125 1.83594 10.125 3.75C10.125 5.69141 8.53906 7.25 6.625 7.25ZM17.7812 3.94141C18.0547 4.1875 18.0547 4.59766 17.8086 4.87109L14.9648 7.93359C14.8555 8.07031 14.6641 8.125 14.5 8.125C14.3086 8.125 14.1445 8.07031 14.0352 7.93359L12.5039 6.40234C12.2305 6.15625 12.2305 5.74609 12.5039 5.5C12.75 5.22656 13.1602 5.22656 13.4062 5.5L14.4727 6.53906L16.8516 3.96875C17.0977 3.69531 17.5078 3.69531 17.7812 3.94141Z" fill="#25815B"/>
    </svg>
    <p class="disable-btn">{{ 'ESTABLISHMENT.ALL-CONTRIBUTORS-ALREADY-ADDED' | translate }}</p>
  </div>
</ng-template>
<ng-template #partialCompliance >
  <div class="health-insurance-est-card">
    <svg width="18" height="15" viewBox="0 0 18 15" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M6.625 7.25C4.68359 7.25 3.125 5.69141 3.125 3.75C3.125 1.83594 4.68359 0.25 6.625 0.25C8.53906 0.25 10.125 1.83594 10.125 3.75C10.125 5.69141 8.53906 7.25 6.625 7.25ZM7.99219 8.5625C10.6172 8.5625 12.75 10.6953 12.75 13.3203C12.75 13.8398 12.3125 14.25 11.793 14.25H1.42969C0.910156 14.25 0.5 13.8398 0.5 13.3203C0.5 10.6953 2.60547 8.5625 5.23047 8.5625H7.99219ZM17.3438 5.71875C17.6992 5.71875 18 6.01953 18 6.375C18 6.75781 17.6992 7.03125 17.3438 7.03125H16.0312V8.34375C16.0312 8.72656 15.7305 9 15.375 9C14.9922 9 14.7188 8.72656 14.7188 8.34375V7.03125H13.4062C13.0234 7.03125 12.75 6.75781 12.75 6.375C12.75 6.01953 13.0234 5.71875 13.4062 5.71875H14.7188V4.40625C14.7188 4.05078 14.9922 3.75 15.375 3.75C15.7305 3.75 16.0312 4.05078 16.0312 4.40625V5.71875H17.3438Z" fill="#25815B"/>
    </svg>
    <p class="disable-btn-button"> {{ 'ESTABLISHMENT.ADD-CONTRIBUTOR-TO-MEDICAL-INSURANCE' | translate }}</p>
  </div>
</ng-template>
