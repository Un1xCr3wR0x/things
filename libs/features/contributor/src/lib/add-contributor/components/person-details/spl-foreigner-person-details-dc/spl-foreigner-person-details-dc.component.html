<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->

  <div class="row">
    <div class="col-md-12" [formGroup]="splForeignerPersonDetailsForm">
      <gosi-card-dc [heading]="'CONTRIBUTOR.PERSONAL-DETAILS' | translate" type="secondary">
        <!-- Person details section -->
        <div class="row" formGroupName="name">
          <div class="col-md-6 col-lg-3" formGroupName="arabic">
            <gosi-input-text-dc
              name="arabicFirstName"
              gosiArabicMask
              id="arabicFirstName"
              [label]="'CONTRIBUTOR.NAME-IN-ARABIC' | translate"
              [placeholder]="'CONTRIBUTOR.FIRST-NAME' | translate"
              [control]="splForeignerPersonDetailsForm.get('name').get('arabic').get('firstName')"
              [maxLength]="arbMaxLength"
              [disabled]="isEditMode"
            >
            </gosi-input-text-dc>
          </div>
          <div class="col-md-6 col-lg-3" formGroupName="arabic">
            <gosi-input-text-dc
              [readOnly]=""
              gosiArabicMask
              name="arabicSecondName"
              id="arabicSecondName"
              [ignoreLabel]="true"
              [placeholder]="'CONTRIBUTOR.SECOND-NAME' | translate"
              [control]="splForeignerPersonDetailsForm.get('name').get('arabic').get('secondName')"
              [maxLength]="arbMaxLength"
              [disabled]="isEditMode || true"
            >
            </gosi-input-text-dc>
          </div>
          <div class="col-md-6 col-lg-3" formGroupName="arabic">
            <gosi-input-text-dc
              gosiArabicMask
              name="arabicThirdName"
              id="arabicThirdName"
              [ignoreLabel]="true"
              [placeholder]="'CONTRIBUTOR.THIRD-NAME' | translate"
              [control]="splForeignerPersonDetailsForm.get('name').get('arabic').get('thirdName')"
              [maxLength]="arbMaxLength"
              [disabled]="isEditMode || true"
            >
            </gosi-input-text-dc>
          </div>
          <div class="col-md-6 col-lg-3" formGroupName="arabic">
            <gosi-input-text-dc
              gosiArabicMask
              name="arabicFamilyName"
              id="arabicFamilyName"
              [ignoreLabel]="true"
              [placeholder]="'CONTRIBUTOR.FAMILY-NAME' | translate"
              [control]="splForeignerPersonDetailsForm.get('name').get('arabic').get('familyName')"
              [maxLength]="arbMaxLength"
              [disabled]="isEditMode"
            >
            </gosi-input-text-dc>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-6" formGroupName="english">
            <gosi-input-text-dc
              [readOnly]=""
              gosiEnglishMask
              name="englishName"
              id="contEnglishName"
              [label]="'CONTRIBUTOR.NAME-IN-ENGLISH' | translate"
              [control]="splForeignerPersonDetailsForm.get('name').get('english').get('name')"
              [maxLength]="engMaxLength"
              [disabled]="isEditMode"
            >
            </gosi-input-text-dc>
          </div>
          <div class="col-lg-6">
            <gosi-input-select-dc
              name="nationality"
              [label]="'CONTRIBUTOR.NATIONALITY' | translate"
              id="nationality"
              [list]="nationalityList | async"
              [control]="splForeignerPersonDetailsForm.get('nationality')"
              [disabled]="true"
            >
            </gosi-input-select-dc>
          </div>
        </div>
        <div class="row">
          <div class="col-lg-6" formGroupName="birthDate">
            <gosi-input-date-dc
              id="dateOfBirth"
              [label]="'CONTRIBUTOR.DATE-OF-BIRTH' | translate"
              [control]="splForeignerPersonDetailsForm.get('birthDate').get('gregorian')"
              [disabled]="true"
            >
            </gosi-input-date-dc>
          </div>

          <div class="col-lg-6"></div>
        </div>
        <ng-container *ngFor="let item of identities.controls">
          <div *ngIf="item.get('idType').value === 'IQAMA'">
            <div class="row">
              <div class="col-lg-6">
                <gosi-input-number-dc
                  id="iqamaNo"
                  [control]="item.get('iqamaNo')"
                  [label]="'CONTRIBUTOR.IQAMA-NUMBER' | translate"
                  [disabled]="true"
                >
                </gosi-input-number-dc>
              </div>
              <div class="col-lg-6">
                <gosi-input-date-dc
                  id="iqamaExpiryDate"
                  [control]="item.get('expiryDate').get('gregorian')"
                  [label]="'CONTRIBUTOR.IQAMA-EXPIRY-DATE' | translate"
                  [disabled]="!item.get('iqamaNo').value"
                  [minDate]="minExpiryDate"
                >
                </gosi-input-date-dc>
              </div>
            </div>
          </div>
        </ng-container>
        <div *ngIf="!isAppPrivate && !isSpecialResidents">
          <ng-container *ngFor="let item of identities.controls">
            <div *ngIf="item.get('idType').value === 'BORDERNO'">
              <div class="row">
                <div class="col-lg-12 mt-4">
                  <gosi-alert-dc
                    message="CONTRIBUTOR.BORDER-NUMBER-INFO"
                    type="info"
                    [dismissible]="true"
                    [noPadding]="true"
                  >
                  </gosi-alert-dc>
                </div>
                <div class="col-lg-6">
                  <gosi-input-text-dc
                    [label]="'CONTRIBUTOR.BORDER-NUMBER' | translate"
                    id="borderNo"
                    [control]="item.get('id')"
                    [maxLength]="borderMaxLength"
                    [disabled]="disableBorder"
                  >
                  </gosi-input-text-dc>
                </div>
              </div>
            </div>
          </ng-container>
        </div>
        <ng-container *ngFor="let item of identities.controls">
          <div *ngIf="item.get('idType').value === 'PASSPORT'">
            <div class="row">
              <div class="col-lg-6">
                <gosi-input-text-dc
                  id="passportNo"
                  [control]="item.get('passportNo')"
                  [label]="'CONTRIBUTOR.PASSPORT-NO' | translate"
                  [disabled]="disablePassport"
                  [maxLength]="passportMaxLength"
                >
                </gosi-input-text-dc>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-6">
                <gosi-input-date-dc
                  id="passportIssueDate"
                  [control]="item.get('issueDate').get('gregorian')"
                  [label]="'CONTRIBUTOR.PASSPORT-ISSUEDATE' | translate"
                  [disabled]="!item.get('passportNo').value"
                  [maxDate]="maxIssueDate"
                >
                </gosi-input-date-dc>
              </div>
              <div class="col-lg-6">
                <gosi-input-date-dc
                  id="passportExpiryDate"
                  [control]="item.get('expiryDate').get('gregorian')"
                  [label]="'CONTRIBUTOR.PASSPORT-EXPIRYDATE' | translate"
                  [disabled]="!item.get('passportNo').value"
                  [minDate]="minExpiryDate"
                >
                </gosi-input-date-dc>
              </div>
            </div>
          </div>
        </ng-container>
        <div class="row">
          <div class="col-md-6">
            <gosi-input-radio-dc
              id="maritalStatus"
              name="maritalStatus"
              [label]="'CONTRIBUTOR.MARITAL-STATUS'"
              [control]="splForeignerPersonDetailsForm.get('maritalStatus')"
              [list]="maritalStatusList | async"
            >
            </gosi-input-radio-dc>
          </div>
          <div class="col-md-6">
            <gosi-input-radio-dc
              id="sex"
              name="sex"
              [label]="'CONTRIBUTOR.GENDER'"
              [control]="splForeignerPersonDetailsForm.get('sex')"
              [list]="genderList | async"
            >
            </gosi-input-radio-dc>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6" formGroupName="education">
            <gosi-input-select-dc
              id="education"
              [label]="'CONTRIBUTOR.EDUCATION' | translate"
              [control]="splForeignerPersonDetailsForm.get('education')"
              [list]="educationList | async"
            ></gosi-input-select-dc>
          </div>
          <div class="col-md-6" formGroupName="specialization">
            <gosi-input-select-dc
              id="specialization"
              [label]="'CONTRIBUTOR.SPECIALIZATION' | translate"
              [control]="splForeignerPersonDetailsForm.get('specialization')"
              [list]="specializationList | async"
            ></gosi-input-select-dc>
          </div>
        </div>
      </gosi-card-dc>
      <!-- Contact details section -->
      <div class="row">
        <div class="col-md-12">
          <div class="card">
            <div class="card-body">
              <frm-contact-dc
                idValue="cont"
                [contactDetails]="personDetails.contactDetail"
                #contactDetails
                [defaultOnly]="isMobileDefault"
                [emailMandatory]="true"
                [isNonSaudi]="isNonSaudi"
              ></frm-contact-dc>
            </div>
          </div>
        </div>
      </div>
      <!-- Address details section -->
      <div class="row" *ngIf="isNonSaudi">
        <div class="col-md-12">
          <div class="card">
            <div class="card-body">
              <frm-address-dc
                idValue="cont"
                [parentForm]="contactDetailParentForm"
                #addressDetails
                [cityList]="cityList | async"
                [hasNationalAddress]="true"
                [hasPOAddress]="true"
                [isSaudiAddrMandatory]="true"
                [countryList]="countryList | async"
                [addressDetails]="personDetails.contactDetail?.addresses"
                [currentMailingAddress]="
                  personDetails.contactDetail ? personDetails.contactDetail.currentMailingAddress : null
                "
              ></frm-address-dc>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Footer section -->
  <div class="row">
    <div class="col-md-12 form-action">
      <div class="float-right btn-section">
        <gosi-button-dc
          type="primary"
          (submit)="saveSplForeignerContributorDetails()"
          [disabled]="isApiTriggered"
          id="personSaveAndNext"
        >
          {{ 'CONTRIBUTOR.SAVE-AND-NEXT' | translate }}</gosi-button-dc
        >
      </div>
      <div class="float-left btn-section">
        <gosi-button-dc id="cancel" (submit)="showCancelTemplate(confirmid)" type="secondary">
          {{ 'CONTRIBUTOR.CANCEL' | translate }}</gosi-button-dc
        >
      </div>
    </div>
  </div>
  <!-- Confirmation Modal-->
  <ng-template #confirmid>
    <gosi-confirm-modal-dc message="CONTRIBUTOR.CONFIRM-CANCEL" (onConfirm)="confirmCancel()" (onCancel)="decline()">
    </gosi-confirm-modal-dc>
  </ng-template>

