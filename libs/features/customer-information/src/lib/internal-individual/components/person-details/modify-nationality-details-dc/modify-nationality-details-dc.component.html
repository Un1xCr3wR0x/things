<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->
<div class="row">
  <div class="col-md-12">
    <gosi-card-dc [heading]="'CUSTOMER-INFORMATION.MOD_NATIONALITY' | translate" type="secondary">
      <!-- Person details section -->
      <div class="row">
        <div class="col-lg-6">
          <gosi-input-select-dc
            name="nationality"
            [label]="'CONTRIBUTOR.NATIONALITY' | translate"
            id="Nationality"
            [list]="nationalityList | async"
            [control]="personDetailsForm.get('nationality')"
            [disabled]="false"
          >
          </gosi-input-select-dc>
        </div>
        <div class="col-lg-6">
          <gosi-input-date-dc
            id="dateOfBirth"
            [label]="'CONTRIBUTOR.DATE-OF-BIRTH' | translate"
            [control]="personDetailsForm.get('birthDate').get('gregorian')"
            [maxDate]="currentDate"
            [disabled]="false"
          >
          </gosi-input-date-dc>
        </div>
      </div>
      <div *ngIf="isSaudi" class="row">
        <div class="col-lg-6" *ngFor="let item of identities.controls">
          <div *ngIf="item.get('idType').value === 'GCCID'">
            <gosi-input-text-dc
              [name]="'CONTRIBUTOR.NATIONAL-ID'"
              id="id"
              [label]="'CONTRIBUTOR.NATIONAL-ID' | translate"
              [control]="item.get('id')"
              [disabled]="false"
            >
            </gosi-input-text-dc>
          </div>
        </div>
      </div>
      <div *ngIf="!isSaudi">
        <ng-container *ngFor="let item of identities.controls">
          <div *ngIf="item.get('idType').value === 'IQAMA'">
            <div class="row">
              <div class="col-lg-6">
                <gosi-input-number-dc
                  id="iqamaNo"
                  [label]="'CONTRIBUTOR.IQAMA-NUMBER' | translate"
                  [control]="item.get('iqamaNo')"
                  [maxLength]="iqamaMaxLength"
                  [disabled]="false"
                >
                </gosi-input-number-dc>
              </div>
              <!-- <div class="col-lg-6">
              <gosi-input-date-dc id="iqamaExpiryDate" [label]="'CONTRIBUTOR.IQAMA-EXPIRY-DATE' | translate"
                [control]="item.get('expiryDate').get('gregorian')" [disabled]="!item.get('iqamaNo').value"
                [minDate]="minExpiryDate">
              </gosi-input-date-dc>
            </div> -->
            </div>
          </div>
        </ng-container>

        <ng-container *ngFor="let item of identities.controls">
          <div *ngIf="item.get('idType').value === 'PASSPORT'">
            <div class="row">
              <div class="col-lg-6">
                <gosi-input-text-dc
                  id="passportNo"
                  [label]="'CONTRIBUTOR.PASSPORT-NO' | translate"
                  [control]="item.get('passportNo')"
                  [maxLength]="passportMaxLength"
                >
                </gosi-input-text-dc>
              </div>

              <div class="col-lg-6">
                <gosi-input-date-dc
                  id="passportIssueDate"
                  [label]="'CONTRIBUTOR.PASSPORT-ISSUEDATE' | translate"
                  [control]="item.get('issueDate').get('gregorian')"
                  [maxDate]="maxIssueDate"
                >
                </gosi-input-date-dc>
              </div>
              <div class="col-lg-6">
                <gosi-input-date-dc
                  id="passportExpiryDate"
                  [label]="'CONTRIBUTOR.PASSPORT-EXPIRYDATE' | translate"
                  [control]="item.get('expiryDate').get('gregorian')"
                  [minDate]="minExpiryDate"
                >
                </gosi-input-date-dc>
              </div>
            </div>
          </div>
        </ng-container>
      </div>
    </gosi-card-dc>
  </div>
</div>

<!-- Contact details section -->
<div class="row d-none">
  <div class="col-md-12">
    <div class="card">
      <div class="card-body">
        <!-- <frm-contact-dc #contactDetails idValue="cont" [contactDetails]="personDetails.contactDetail"
          [defaultOnly]="isMobileDefault"></frm-contact-dc> -->
        <frm-contact-dc
          #contactDetails
          [isHeadingRequired]="true"
          [showTelephone]="false"
          [isVerifyRequired]="false"
          [emailMandatory]="true"
          [contactDetails]="personDtls.contactDetail"
          [parentForm]="parentForm"
        >
        </frm-contact-dc>
      </div>
    </div>
  </div>
</div>

<div class="row d-none">
  <div class="col-md-12">
    <frm-address-dc
      #addressDetails
      idValue="cont"
      [parentForm]="contactDetailParentForm"
      [cityList]="cityList | async"
      [hasNationalAddress]="true"
      [countryList]="nationalityList | async"
      [hasPOAddress]="true"
      [isSaudiAddrMandatory]="false"
      [addressDetails]="personDtls.contactDetail.addresses"
      [currentMailingAddress]="personDtls.contactDetail ? personDtls.contactDetail.currentMailingAddress : null"
    ></frm-address-dc>
  </div>
</div>

<!-- Footer section -->
<div class="row">
  <div class="col-md-12 form-action">
    <div class="float-right btn-section">
      <gosi-button-dc
        id="personSaveAndNext"
        (submit)="saveContributorDetails()"
        [disabled]="isApiTriggered"
        type="primary"
      >
        {{ 'CONTRIBUTOR.SAVE-AND-NEXT' | translate }}</gosi-button-dc
      >
    </div>
    <div class="float-left btn-section">
      <gosi-button-dc id="cancel" (submit)="showCancelTemplate(confirmid)" type="secondary">
        {{ 'CONTRIBUTOR.CANCEL' | translate }}</gosi-button-dc
      >
    </div>
  </div>
</div>

<!-- Confirmation Modal-->
<ng-template #confirmid>
  <gosi-confirm-modal-dc message="CONTRIBUTOR.CONFIRM-CANCEL" (onConfirm)="confirmCancel()" (onCancel)="decline()">
  </gosi-confirm-modal-dc>
</ng-template>
