<!-- Copyright GOSI. All Rights Reserved.
This software is the proprietary information of GOSI.
Use is subject to license terms. -->

<!--ELIGIBILITY HISTORY-->
<div class="row">
  <div class="col-12">
    <div class="heading mr-auto">{{ 'CUSTOMER-INFORMATION.SURVEY' | translate }}</div>
  </div>
</div>
<div class="row" *ngIf="surveysList?.length > 0">
  <div class="col-12 sub-heading all-survey-count">
    {{ 'CUSTOMER-INFORMATION.ALL-SURVEYS' | translate }}  <span>{{' (' + surveysList[0].totalcount +')'}}</span>
  </div>
</div>
<div class="row" *ngIf="surveysList?.length > 0">
  <div class="col-md-12" 
      *ngFor="
      let survey of surveysList
        | paginate
          : {
              id: 'paginationId',
              itemsPerPage: itemsPerPage,
              currentPage: currentPage,
              totalItems: totalCount
            };
      let i = index
    "  >
    <cim-timeline-dc *ngIf="survey" [isFirstItem]="i === 0">
      <div class="row" timeline-date>
        <div class="col-12 flag-timeline">
          <span class="flag-date">{{ lang =='ar' ? (survey?.lastmodifiedtimestamp | gosiDate:'Amm:hh dd/mm/yyyy') : (survey?.lastmodifiedtimestamp | gosiDate:'hh:mmA dd/mm/yyyy') }}</span>
        </div>
      </div>
      <div timeline-content>
        <gosi-card-dc class="col-lg-12" [lessPadding]="true" [isHeading]="false" [noMarginBottom]="true">
          <div class="card-heading">
            <span class="heading">{{ lang =='ar' ? survey?.transactionnamearb :survey?.transactionnameeng }}</span>
            <a (click)="openSurveyDetails(survey)" class="view-detail float-right">{{ 'CUSTOMER-INFORMATION.DETAILS' | translate }}</a>
          </div>
          <div class="card-content has-icon">
            <div class="survey-Icon">
              <ng-container [ngSwitch]="survey?.enganswer">
                <svg *ngSwitchCase="'1'" id="b" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 54.64 54.64"><g id="c"><path d="M27.32,2c13.96,0,25.32,11.36,25.32,25.32s-11.36,25.32-25.32,25.32S2,41.28,2,27.32,13.36,2,27.32,2" style="fill:#fde4e4; stroke-width:0px;"/><path d="M27.32,2c13.96,0,25.32,11.36,25.32,25.32s-11.36,25.32-25.32,25.32S2,41.28,2,27.32,13.36,2,27.32,2M27.32,0C12.23,0,0,12.23,0,27.32s12.23,27.32,27.32,27.32,27.32-12.23,27.32-27.32S42.41,0,27.32,0h0Z" style="fill:#ae1f23; stroke-width:0px;"/><circle cx="35.52" cy="21.11" r="4.02" style="fill:#ae1f23; stroke-width:0px;"/><circle cx="19.12" cy="21.11" r="4.02" style="fill:#ae1f23; stroke-width:0px;"/><path d="M27.37,33.58c-3.67,0-7.33,1.4-10.12,4.19l-3.32,3.32c-.59.59-.59,1.54,0,2.12s1.54.59,2.12,0l3.32-3.32c4.41-4.41,11.59-4.41,16.01,0l3.22,3.22c.59.59,1.54.59,2.12,0s.59-1.54,0-2.12l-3.22-3.22c-2.79-2.79-6.46-4.19-10.12-4.19Z" style="fill:#ae1f23; stroke-width:0px;"/></g></svg>
                <svg *ngSwitchCase="'2'" id="b" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 54.64 54.64"><g id="c"><path d="M27.32,2c13.96,0,25.32,11.36,25.32,25.32s-11.36,25.32-25.32,25.32S2,41.28,2,27.32,13.36,2,27.32,2" style="fill:#fde4e4; stroke-width:0px;"/><path d="M27.32,2c13.96,0,25.32,11.36,25.32,25.32s-11.36,25.32-25.32,25.32S2,41.28,2,27.32,13.36,2,27.32,2M27.32,0C12.23,0,0,12.23,0,27.32s12.23,27.32,27.32,27.32,27.32-12.23,27.32-27.32S42.41,0,27.32,0h0Z" style="fill:#ae1f23; stroke-width:0px;"/><circle cx="35.52" cy="21.11" r="4.02" style="fill:#ae1f23; stroke-width:0px;"/><circle cx="19.12" cy="21.11" r="4.02" style="fill:#ae1f23; stroke-width:0px;"/><path d="M27.37,33.58c-3.67,0-7.33,1.4-10.12,4.19l-3.32,3.32c-.59.59-.59,1.54,0,2.12s1.54.59,2.12,0l3.32-3.32c4.41-4.41,11.59-4.41,16.01,0l3.22,3.22c.59.59,1.54.59,2.12,0s.59-1.54,0-2.12l-3.22-3.22c-2.79-2.79-6.46-4.19-10.12-4.19Z" style="fill:#ae1f23; stroke-width:0px;"/></g></svg>
                
                <svg *ngSwitchCase="'3'" id="b" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 54.64 54.64"><g id="c"><path d="M27.32,2c13.96,0,25.32,11.36,25.32,25.32s-11.36,25.32-25.32,25.32S2,41.28,2,27.32,13.36,2,27.32,2" style="fill:#f9da9d; stroke-width:0px;"/><path d="M27.32,2c13.96,0,25.32,11.36,25.32,25.32s-11.36,25.32-25.32,25.32S2,41.28,2,27.32,13.36,2,27.32,2M27.32,0C12.23,0,0,12.23,0,27.32s12.23,27.32,27.32,27.32,27.32-12.23,27.32-27.32S42.41,0,27.32,0h0Z" style="fill:#f2a638; stroke-width:0px;"/><path d="M40.72,36.22H13.91c-.83,0-1.5-.67-1.5-1.5s.67-1.5,1.5-1.5h26.81c.83,0,1.5.67,1.5,1.5s-.67,1.5-1.5,1.5Z" style="fill:#f2a638; stroke-width:0px;"/><circle cx="35.52" cy="21.11" r="4.02" style="fill:#f2a638; stroke-width:0px;"/><circle cx="19.12" cy="21.11" r="4.02" style="fill:#f2a638; stroke-width:0px;"/></g></svg>
                
                <svg *ngSwitchCase="'4'" id="b" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 54.64 54.64"><g id="c"><path d="M27.32,2c13.96,0,25.32,11.36,25.32,25.32s-11.36,25.32-25.32,25.32S2,41.28,2,27.32,13.36,2,27.32,2" style="fill:#c9e6d5; stroke-width:0px;"/><path d="M27.32,2c13.96,0,25.32,11.36,25.32,25.32s-11.36,25.32-25.32,25.32S2,41.28,2,27.32,13.36,2,27.32,2M27.32,0C12.23,0,0,12.23,0,27.32s12.23,27.32,27.32,27.32,27.32-12.23,27.32-27.32S42.41,0,27.32,0h0Z" style="fill:#019748; stroke-width:0px;"/><circle cx="35.52" cy="21.11" r="4.02" style="fill:#019748; stroke-width:0px;"/><circle cx="19.12" cy="21.11" r="4.02" style="fill:#019748; stroke-width:0px;"/><path d="M27.37,43.65c-3.67,0-7.33-1.4-10.12-4.19l-3.32-3.32c-.59-.59-.59-1.54,0-2.12s1.54-.59,2.12,0l3.32,3.32c4.41,4.41,11.59,4.41,16.01,0l3.22-3.22c.59-.59,1.54-.59,2.12,0s.59,1.54,0,2.12l-3.22,3.22c-2.79,2.79-6.46,4.19-10.12,4.19Z" style="fill:#019748; stroke-width:0px;"/></g></svg>
                <svg *ngSwitchCase="'5'" id="b" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 54.64 54.64"><g id="c"><path d="M27.32,2c13.96,0,25.32,11.36,25.32,25.32s-11.36,25.32-25.32,25.32S2,41.28,2,27.32,13.36,2,27.32,2" style="fill:#c9e6d5; stroke-width:0px;"/><path d="M27.32,2c13.96,0,25.32,11.36,25.32,25.32s-11.36,25.32-25.32,25.32S2,41.28,2,27.32,13.36,2,27.32,2M27.32,0C12.23,0,0,12.23,0,27.32s12.23,27.32,27.32,27.32,27.32-12.23,27.32-27.32S42.41,0,27.32,0h0Z" style="fill:#019748; stroke-width:0px;"/><circle cx="35.52" cy="21.11" r="4.02" style="fill:#019748; stroke-width:0px;"/><circle cx="19.12" cy="21.11" r="4.02" style="fill:#019748; stroke-width:0px;"/><path d="M27.37,43.65c-3.67,0-7.33-1.4-10.12-4.19l-3.32-3.32c-.59-.59-.59-1.54,0-2.12s1.54-.59,2.12,0l3.32,3.32c4.41,4.41,11.59,4.41,16.01,0l3.22-3.22c.59-.59,1.54-.59,2.12,0s.59,1.54,0,2.12l-3.22,3.22c-2.79,2.79-6.46,4.19-10.12,4.19Z" style="fill:#019748; stroke-width:0px;"/></g></svg>
              </ng-container>
            </div>
            <div class="survey-details">
              <div class="survey-title">{{ lang =='ar' ? survey?.arboption :survey?.engoption }}</div>
              <div class="survey-subtitle">{{ 'CUSTOMER-INFORMATION.REQUEST-NUMBER' | translate }}: #{{ survey?.transactiontraceid }}</div>
              <div class="survey-subtitle">{{ 'CUSTOMER-INFORMATION.THE-CHANNEL' | translate }}: {{ survey?.CorrespondingChannel | bilingualText}}</div>
            </div>
          </div>
        </gosi-card-dc>
      </div>
    </cim-timeline-dc>
  </div>
</div>
   <div class="d-flex justify-content-center mt-3">
    <div class="pagination">
      <gosi-pagination-dc
        *ngIf="totalCount > itemsPerPage"
        [totalSize]="totalCount"
        [itemsPerPage]="itemsPerPage"
        [itemType]="'CUSTOMER-INFORMATION.ALL-SURVEYS' | translate"
        paginationId="paginationId"
        [pageDetails]="pageDetails"
        (pageChange)="paginateSurvey($event)"
      >
      </gosi-pagination-dc>

      <gosi-no-result-dc *ngIf="!totalCount"></gosi-no-result-dc>

    </div>
 </div>
<ng-template #surveyModal>
  <gosi-modal-dc [modalHeader]="'CUSTOMER-INFORMATION.SURVEY-DETAILS' | translate" (closeModal)="hideModal()"> 
    <div modalContent>
      <div class="survey-modal-container">
        <div class="survey-modal">
          <div class="survey-Icon">
            <ng-container [ngSwitch]="selectedSurvey?.enganswer">
              <svg *ngSwitchCase="'1'" id="b" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 54.64 54.64"><g id="c"><path d="M27.32,2c13.96,0,25.32,11.36,25.32,25.32s-11.36,25.32-25.32,25.32S2,41.28,2,27.32,13.36,2,27.32,2" style="fill:#fde4e4; stroke-width:0px;"/><path d="M27.32,2c13.96,0,25.32,11.36,25.32,25.32s-11.36,25.32-25.32,25.32S2,41.28,2,27.32,13.36,2,27.32,2M27.32,0C12.23,0,0,12.23,0,27.32s12.23,27.32,27.32,27.32,27.32-12.23,27.32-27.32S42.41,0,27.32,0h0Z" style="fill:#ae1f23; stroke-width:0px;"/><circle cx="35.52" cy="21.11" r="4.02" style="fill:#ae1f23; stroke-width:0px;"/><circle cx="19.12" cy="21.11" r="4.02" style="fill:#ae1f23; stroke-width:0px;"/><path d="M27.37,33.58c-3.67,0-7.33,1.4-10.12,4.19l-3.32,3.32c-.59.59-.59,1.54,0,2.12s1.54.59,2.12,0l3.32-3.32c4.41-4.41,11.59-4.41,16.01,0l3.22,3.22c.59.59,1.54.59,2.12,0s.59-1.54,0-2.12l-3.22-3.22c-2.79-2.79-6.46-4.19-10.12-4.19Z" style="fill:#ae1f23; stroke-width:0px;"/></g></svg>
              <svg *ngSwitchCase="'2'" id="b" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 54.64 54.64"><g id="c"><path d="M27.32,2c13.96,0,25.32,11.36,25.32,25.32s-11.36,25.32-25.32,25.32S2,41.28,2,27.32,13.36,2,27.32,2" style="fill:#fde4e4; stroke-width:0px;"/><path d="M27.32,2c13.96,0,25.32,11.36,25.32,25.32s-11.36,25.32-25.32,25.32S2,41.28,2,27.32,13.36,2,27.32,2M27.32,0C12.23,0,0,12.23,0,27.32s12.23,27.32,27.32,27.32,27.32-12.23,27.32-27.32S42.41,0,27.32,0h0Z" style="fill:#ae1f23; stroke-width:0px;"/><circle cx="35.52" cy="21.11" r="4.02" style="fill:#ae1f23; stroke-width:0px;"/><circle cx="19.12" cy="21.11" r="4.02" style="fill:#ae1f23; stroke-width:0px;"/><path d="M27.37,33.58c-3.67,0-7.33,1.4-10.12,4.19l-3.32,3.32c-.59.59-.59,1.54,0,2.12s1.54.59,2.12,0l3.32-3.32c4.41-4.41,11.59-4.41,16.01,0l3.22,3.22c.59.59,1.54.59,2.12,0s.59-1.54,0-2.12l-3.22-3.22c-2.79-2.79-6.46-4.19-10.12-4.19Z" style="fill:#ae1f23; stroke-width:0px;"/></g></svg>

              <svg *ngSwitchCase="'3'" id="b" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 54.64 54.64"><g id="c"><path d="M27.32,2c13.96,0,25.32,11.36,25.32,25.32s-11.36,25.32-25.32,25.32S2,41.28,2,27.32,13.36,2,27.32,2" style="fill:#f9da9d; stroke-width:0px;"/><path d="M27.32,2c13.96,0,25.32,11.36,25.32,25.32s-11.36,25.32-25.32,25.32S2,41.28,2,27.32,13.36,2,27.32,2M27.32,0C12.23,0,0,12.23,0,27.32s12.23,27.32,27.32,27.32,27.32-12.23,27.32-27.32S42.41,0,27.32,0h0Z" style="fill:#f2a638; stroke-width:0px;"/><path d="M40.72,36.22H13.91c-.83,0-1.5-.67-1.5-1.5s.67-1.5,1.5-1.5h26.81c.83,0,1.5.67,1.5,1.5s-.67,1.5-1.5,1.5Z" style="fill:#f2a638; stroke-width:0px;"/><circle cx="35.52" cy="21.11" r="4.02" style="fill:#f2a638; stroke-width:0px;"/><circle cx="19.12" cy="21.11" r="4.02" style="fill:#f2a638; stroke-width:0px;"/></g></svg>

              <svg *ngSwitchCase="'4'" id="b" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 54.64 54.64"><g id="c"><path d="M27.32,2c13.96,0,25.32,11.36,25.32,25.32s-11.36,25.32-25.32,25.32S2,41.28,2,27.32,13.36,2,27.32,2" style="fill:#c9e6d5; stroke-width:0px;"/><path d="M27.32,2c13.96,0,25.32,11.36,25.32,25.32s-11.36,25.32-25.32,25.32S2,41.28,2,27.32,13.36,2,27.32,2M27.32,0C12.23,0,0,12.23,0,27.32s12.23,27.32,27.32,27.32,27.32-12.23,27.32-27.32S42.41,0,27.32,0h0Z" style="fill:#019748; stroke-width:0px;"/><circle cx="35.52" cy="21.11" r="4.02" style="fill:#019748; stroke-width:0px;"/><circle cx="19.12" cy="21.11" r="4.02" style="fill:#019748; stroke-width:0px;"/><path d="M27.37,43.65c-3.67,0-7.33-1.4-10.12-4.19l-3.32-3.32c-.59-.59-.59-1.54,0-2.12s1.54-.59,2.12,0l3.32,3.32c4.41,4.41,11.59,4.41,16.01,0l3.22-3.22c.59-.59,1.54-.59,2.12,0s.59,1.54,0,2.12l-3.22,3.22c-2.79,2.79-6.46,4.19-10.12,4.19Z" style="fill:#019748; stroke-width:0px;"/></g></svg>
              <svg *ngSwitchCase="'5'" id="b" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 54.64 54.64"><g id="c"><path d="M27.32,2c13.96,0,25.32,11.36,25.32,25.32s-11.36,25.32-25.32,25.32S2,41.28,2,27.32,13.36,2,27.32,2" style="fill:#c9e6d5; stroke-width:0px;"/><path d="M27.32,2c13.96,0,25.32,11.36,25.32,25.32s-11.36,25.32-25.32,25.32S2,41.28,2,27.32,13.36,2,27.32,2M27.32,0C12.23,0,0,12.23,0,27.32s12.23,27.32,27.32,27.32,27.32-12.23,27.32-27.32S42.41,0,27.32,0h0Z" style="fill:#019748; stroke-width:0px;"/><circle cx="35.52" cy="21.11" r="4.02" style="fill:#019748; stroke-width:0px;"/><circle cx="19.12" cy="21.11" r="4.02" style="fill:#019748; stroke-width:0px;"/><path d="M27.37,43.65c-3.67,0-7.33-1.4-10.12-4.19l-3.32-3.32c-.59-.59-.59-1.54,0-2.12s1.54-.59,2.12,0l3.32,3.32c4.41,4.41,11.59,4.41,16.01,0l3.22-3.22c.59-.59,1.54-.59,2.12,0s.59,1.54,0,2.12l-3.22,3.22c-2.79,2.79-6.46,4.19-10.12,4.19Z" style="fill:#019748; stroke-width:0px;"/></g></svg>
            </ng-container>
          </div>
          <div class="survey-details">
            <div class="survey-title">{{ lang =='ar' ? selectedSurvey?.arboption :selectedSurvey?.engoption }}</div>
            <div class="survey-subtitle">{{ 'CUSTOMER-INFORMATION.REQUEST-NUMBER' | translate }}: #{{ selectedSurvey?.transactiontraceid }}</div>
            <div class="survey-subtitle">{{ 'CUSTOMER-INFORMATION.THE-CHANNEL' | translate }}: {{ selectedSurvey?.CorrespondingChannel  | bilingualText }}</div>
          </div>
        </div>
        <div class="survey-reasons" *ngIf="surveyResponse">
          <div class="survey-reasons-title">{{ 'CUSTOMER-INFORMATION.REASONS-FOR-DISSATISFACTION' | translate }}:</div>
          <ul>
            <li *ngFor="let reason of surveyResponse">{{ lang =='ar' ? reason?.answer_ar : reason?.answer_en }}</li>
          </ul>
        </div>
      </div>
    </div>
  </gosi-modal-dc>
</ng-template>
