<!--
  ~ Copyright GOSI. All Rights Reserved.
  ~  This software is the proprietary information of GOSI.
  ~  Use is subject to license terms.
  -->

<div class="row">
  <div class="col-md-12" [formGroup]="gccPersonDetailsForm">
    <gosi-card-dc [heading]="'CONTRIBUTOR.PERSONAL-DETAILS' | translate" type="secondary">
      <!-- Person details section -->
      <div class="row" formGroupName="name">
        <div class="col-md-6 col-lg-3" formGroupName="arabic">
          <gosi-input-text-dc
            [readOnly]=""
            name="arabicFirstName"
            gosiArabicMask
            id="arabicFirstName"
            [label]="'CONTRIBUTOR.NAME-IN-ARABIC' | translate"
            [placeholder]="'CONTRIBUTOR.FIRST-NAME' | translate"
            [control]="gccPersonDetailsForm.get('name').get('arabic').get('firstName')"
            [maxLength]="arbMaxLength"
            [disabled]="isEditMode"
          >
          </gosi-input-text-dc>
        </div>
        <div class="col-md-6 col-lg-3" formGroupName="arabic">
          <gosi-input-text-dc
            [readOnly]=""
            gosiArabicMask
            name="arabicSecondName"
            id="arabicSecondName"
            [ignoreLabel]="true"
            [placeholder]="'CONTRIBUTOR.SECOND-NAME' | translate"
            [control]="gccPersonDetailsForm.get('name').get('arabic').get('secondName')"
            [maxLength]="arbMaxLength"
            [disabled]="isEditMode || true"
          >
          </gosi-input-text-dc>
        </div>
        <div class="col-md-6 col-lg-3" formGroupName="arabic">
          <gosi-input-text-dc
            [readOnly]=""
            gosiArabicMask
            name="arabicThirdName"
            id="arabicThirdName"
            [ignoreLabel]="true"
            [placeholder]="'CONTRIBUTOR.THIRD-NAME' | translate"
            [control]="gccPersonDetailsForm.get('name').get('arabic').get('thirdName')"
            [maxLength]="arbMaxLength"
            [disabled]="isEditMode || true"
          >
          </gosi-input-text-dc>
        </div>
        <div class="col-md-6 col-lg-3" formGroupName="arabic">
          <gosi-input-text-dc
            [readOnly]=""
            gosiArabicMask
            name="arabicFamilyName"
            id="arabicFamilyName"
            [ignoreLabel]="true"
            [placeholder]="'CONTRIBUTOR.FAMILY-NAME' | translate"
            [control]="gccPersonDetailsForm.get('name').get('arabic').get('familyName')"
            [maxLength]="arbMaxLength"
            [disabled]="isEditMode"
          >
          </gosi-input-text-dc>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-6" formGroupName="english">
          <gosi-input-text-dc
            [readOnly]=""
            gosiEnglishMask
            name="EnglishName"
            id="contEnglishName"
            [label]="'CONTRIBUTOR.NAME-IN-ENGLISH' | translate"
            [control]="gccPersonDetailsForm.get('name').get('english').get('name')"
            [maxLength]="engMaxLength"
            [disabled]="isEditMode"
          >
          </gosi-input-text-dc>
        </div>
        <div class="col-lg-6">
          <gosi-input-select-dc
            name="nationality"
            [label]="'CONTRIBUTOR.NATIONALITY' | translate"
            id="Nationality"
            [list]="nationalityList | async"
            [control]="gccPersonDetailsForm.get('nationality')"
            [disabled]="true"
          >
          </gosi-input-select-dc>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-6" formGroupName="birthDate">
          <gosi-input-date-dc
            id="dateOfBirth"
            [label]="'CONTRIBUTOR.DATE-OF-BIRTH' | translate"
            [control]="gccPersonDetailsForm.get('birthDate').get('gregorian')"
            [maxDate]="currentDate"
            [disabled]="true"
          >
          </gosi-input-date-dc>
        </div>

        <div class="col-lg-6" *ngFor="let item of identities.controls">
          <div *ngIf="item.get('idType').value === 'GCCID'">
            <gosi-input-text-dc
              [name]="'CONTRIBUTOR.GCCID'"
              id="id"
              [label]="'CONTRIBUTOR.GCCID' | translate"
              [control]="item.get('id')"
              [disabled]="true"
            >
            </gosi-input-text-dc>
          </div>
        </div>
      </div>
      <ng-container *ngFor="let item of identities.controls">
        <div *ngIf="item.get('idType').value === 'IQAMA'">
          <div class="row">
            <div class="col-lg-6">
              <gosi-input-number-dc
                id="iqamaNo"
                [label]="'CONTRIBUTOR.IQAMA-NUMBER' | translate"
                [control]="item.get('iqamaNo')"
                [maxLength]="iqamaMaxLength"
                [disabled]="true"
              >
              </gosi-input-number-dc>
            </div>
            <div class="col-lg-6">
              <gosi-input-date-dc
                id="iqamaExpiryDate"
                [label]="'CONTRIBUTOR.IQAMA-EXPIRY-DATE' | translate"
                [control]="item.get('expiryDate').get('gregorian')"
                [disabled]="!item.get('iqamaNo').value"
                [minDate]="minExpiryDate"
              >
              </gosi-input-date-dc>
            </div>
          </div>
        </div>
      </ng-container>

      <ng-container *ngFor="let item of identities.controls">
        <div *ngIf="item.get('idType').value === 'PASSPORT'">
          <div class="row">
            <div class="col-lg-6">
              <gosi-input-text-dc
                id="passportNo"
                [label]="'CONTRIBUTOR.PASSPORT-NO' | translate"
                [control]="item.get('passportNo')"
                [maxLength]="passportMaxLength"
                [disabled]="true"
              >
              </gosi-input-text-dc>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-6">
              <gosi-input-date-dc
                id="passportIssueDate"
                [label]="'CONTRIBUTOR.PASSPORT-ISSUEDATE' | translate"
                [control]="item.get('issueDate').get('gregorian')"
                [disabled]="!item.get('passportNo').value"
                [maxDate]="maxIssueDate"
              >
              </gosi-input-date-dc>
            </div>
            <div class="col-lg-6">
              <gosi-input-date-dc
                id="passportExpiryDate"
                [label]="'CONTRIBUTOR.PASSPORT-EXPIRYDATE' | translate"
                [control]="item.get('expiryDate').get('gregorian')"
                [disabled]="!item.get('passportNo').value"
                [minDate]="minExpiryDate"
              >
              </gosi-input-date-dc>
            </div>
          </div>
        </div>
      </ng-container>
      <div class="row">
        <div class="col-md-6">
          <gosi-input-radio-dc
            id="maritalStatus"
            name="maritalStatus"
            [label]="'CONTRIBUTOR.MARITAL-STATUS'"
            [control]="gccPersonDetailsForm.get('maritalStatus')"
            [list]="maritalStatusList | async"
          >
          </gosi-input-radio-dc>
        </div>
        <div class="col-md-6">
          <gosi-input-radio-dc
            id="sex"
            name="sex"
            [label]="'CONTRIBUTOR.GENDER'"
            [control]="gccPersonDetailsForm.get('sex')"
            [list]="genderList | async"
          >
          </gosi-input-radio-dc>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6" formGroupName="education">
          <gosi-input-select-dc
            id="education"
            [label]="'CONTRIBUTOR.EDUCATION' | translate"
            [control]="gccPersonDetailsForm.get('education')"
            [list]="educationList | async"
          ></gosi-input-select-dc>
        </div>
        <div class="col-md-6" formGroupName="specialization">
          <gosi-input-select-dc
            id="specialization"
            [label]="'CONTRIBUTOR.SPECIALIZATION' | translate"
            [control]="gccPersonDetailsForm.get('specialization')"
            [list]="specializationList | async"
          ></gosi-input-select-dc>
        </div>
      </div>
    </gosi-card-dc>
    <!-- Contact details section -->
    <div class="row">
      <div class="col-md-12">
        <div class="card">
          <div class="card-body">
            <frm-contact-dc
              #contactDetails
              idValue="cont"
              [contactDetails]="personDetails.contactDetail"
              [defaultOnly]="isMobileDefault"
              [isNonSaudi]="isNonSaudi"
            ></frm-contact-dc>
          </div>
        </div>
      </div>
    </div>
    <!-- Address details section -->
    <div class="row" *ngIf="isNonSaudi">
      <div class="col-md-12">
        <div class="card">
          <div class="card-body">
            <frm-address-dc
              #addressDetails
              idValue="cont"
              [parentForm]="contactDetailParentForm"
              [cityList]="cityList | async"
              [hasNationalAddress]="true"
              [countryList]="nationalityList | async"
              [hasPOAddress]="true"
              [isSaudiAddrMandatory]="true"
              [addressDetails]="personDetails.contactDetail?.addresses"
              [currentMailingAddress]="
                personDetails.contactDetail ? personDetails.contactDetail.currentMailingAddress : null
              "
            ></frm-address-dc>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Footer section -->
<div class="row">
  <div class="col-md-12 form-action">
    <div class="float-right btn-section" *ngIf="isUnclaimed">
      <gosi-button-dc
        id="personSaveAndNext"
        (submit)="saveGccContributorDetails()"
        [disabled]="isApiTriggered"
        type="primary"
      >
        {{ 'CONTRIBUTOR.SAVE-AND-NEXT' | translate }}</gosi-button-dc
      >
    </div>
    <div class="float-left btn-section">
      <gosi-button-dc id="cancel" (submit)="confirmCancel()" type="secondary">
        {{ 'CONTRIBUTOR.CANCEL' | translate }}</gosi-button-dc
      >
    </div>
  </div>
</div>

<!-- Confirmation Modal-->
<ng-template #confirmid>
  <gosi-confirm-modal-dc message="CONTRIBUTOR.CONFIRM-CANCEL" (onConfirm)="confirmCancel()" (onCancel)="decline()">
  </gosi-confirm-modal-dc>
</ng-template>
